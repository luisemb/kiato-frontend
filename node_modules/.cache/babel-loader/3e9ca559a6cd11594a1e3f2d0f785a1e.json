{"remainingRequest":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\wamp64\\www\\crm\\frontend\\src\\views\\clients\\clientlist.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\wamp64\\www\\crm\\frontend\\src\\views\\clients\\clientlist.vue","mtime":1699061999367},{"path":"C:\\wamp64\\www\\crm\\frontend\\babel.config.js","mtime":1645939880000},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1668443304941},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1652458135842},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1668443313146}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi93YW1wNjQvd3d3L2NybS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovd2FtcDY0L3d3dy9jcm0vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCBmbGF0UGlja3IgZnJvbSAidnVlLWZsYXRwaWNrci1jb21wb25lbnQiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCAiZmxhdHBpY2tyL2Rpc3QvZmxhdHBpY2tyLmNzcyI7CmltcG9ydCBMYXlvdXQgZnJvbSAiLi4vLi4vbGF5b3V0cy9tYWluLnZ1ZSI7CmltcG9ydCBQYWdlSGVhZGVyIGZyb20gIkAvY29tcG9uZW50cy9wYWdlLWhlYWRlciI7CmltcG9ydCBhcHBDb25maWcgZnJvbSAiLi4vLi4vLi4vYXBwLmNvbmZpZyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IExvdHRpZSBmcm9tICJAL2NvbXBvbmVudHMvd2lkZ2V0cy9sb3R0aWUudnVlIjsKaW1wb3J0IGFuaW1hdGlvbkRhdGEgZnJvbSAiQC9jb21wb25lbnRzL3dpZGdldHMvbXNvZWF3cW0uanNvbiI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBNdWx0aXNlbGVjdCBmcm9tICJAdnVlZm9ybS9tdWx0aXNlbGVjdCI7CmltcG9ydCAiQHZ1ZWZvcm0vbXVsdGlzZWxlY3QvdGhlbWVzL2RlZmF1bHQuc2NzcyI7IC8vIGNvbXBvbmVudHMKCmltcG9ydCBub3RlcyBmcm9tICcuLi8uLi9jb21wb25lbnRzL3VzZXJzL25vdGVzJzsKaW1wb3J0IG1lc3NhZ2VzIGZyb20gJy4uLy4uL3ZpZXdzL3dpZGdldHMvbWVzc2FnZXMnOwppbXBvcnQgZWNvbnRhY3RzIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY2xpZW50cy9lY29udGFjdHMnOwppbXBvcnQgeyByZWYsIHdhdGNoIH0gZnJvbSAidnVlIjsKaW1wb3J0IHVzZVZ1ZWxpZGF0ZSBmcm9tICJAdnVlbGlkYXRlL2NvcmUiOwppbXBvcnQgand0X2RlY29kZSBmcm9tICJqd3QtZGVjb2RlIjsKaW1wb3J0IFNpbXBsZVR5cGVhaGVhZCBmcm9tICJ2dWUzLXNpbXBsZS10eXBlYWhlYWQiOwppbXBvcnQgJ3Z1ZTMtc2ltcGxlLXR5cGVhaGVhZC9kaXN0L3Z1ZTMtc2ltcGxlLXR5cGVhaGVhZC5jc3MnOyAvL09wdGlvbmFsIGRlZmF1bHQgQ1NTCgppbXBvcnQgeyBVcGxvYWQgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tdnVlLXVwbG9hZCc7CmltcG9ydCAnQHByb2dyZXNzL2tlbmRvLXRoZW1lLWRlZmF1bHQvZGlzdC9hbGwuY3NzJzsKZXhwb3J0IGRlZmF1bHQgewogIHBhZ2U6IHsKICAgIHRpdGxlOiAiQ2xpZW50cyIsCiAgICBtZXRhOiBbewogICAgICBuYW1lOiAiZGVzY3JpcHRpb24iLAogICAgICBjb250ZW50OiBhcHBDb25maWcuZGVzY3JpcHRpb24KICAgIH1dCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMYXlvdXQ6IExheW91dCwKICAgIFBhZ2VIZWFkZXI6IFBhZ2VIZWFkZXIsCiAgICBmbGF0UGlja3I6IGZsYXRQaWNrciwKICAgIE11bHRpc2VsZWN0OiBNdWx0aXNlbGVjdCwKICAgIExvdHRpZTogTG90dGllLAogICAgbm90ZXM6IG5vdGVzLAogICAgbWVzc2FnZXM6IG1lc3NhZ2VzLAogICAgU2ltcGxlVHlwZWFoZWFkOiBTaW1wbGVUeXBlYWhlYWQsCiAgICBVcGxvYWQ6IFVwbG9hZCwKICAgIGVjb250YWN0czogZWNvbnRhY3RzCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICJDbGllbnQgTGlzdCIsCiAgICAgIGl0ZW1zOiBbewogICAgICAgIHRleHQ6ICJDbGllbnRzIiwKICAgICAgICBocmVmOiAiLyIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJDbGllbnQgTGlzdCIsCiAgICAgICAgYWN0aXZlOiB0cnVlCiAgICAgIH1dLAogICAgICBvcGVuQ3JlYXRlOiAwLAogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiAxMDAsCiAgICAgIHBhZ2VzOiBbXSwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgc2VhcmNoUXVlcnk6IG51bGwsCiAgICAgIHRpbWVDb25maWc6IHsKICAgICAgICBlbmFibGVUaW1lOiBmYWxzZSwKICAgICAgICBkYXRlRm9ybWF0OiAiZCBNLCBZIgogICAgICB9LAogICAgICBkYXRlVGltZUNvbmZpZzogewogICAgICAgIGVuYWJsZVRpbWU6IHRydWUsCiAgICAgICAgZGF0ZUZvcm1hdDogIkYgaiwgWSBIOmkgSyIKICAgICAgfSwKICAgICAgaHVtYW5mcmllbmRseUNvbmZpZzogewogICAgICAgIGRhdGVGb3JtYXQ6ICJGIGosIFkiCiAgICAgIH0sCiAgICAgIHR5cGVMaXN0OiB7fSwKICAgICAgY2xpZW50RGF0YTogW10sCiAgICAgIGRhdGE6IHsKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgIHNlYXJjaFZhbHVlczogewogICAgICAgICAgdHlwZTogJzAnLAogICAgICAgICAgbm90ZVNlYXJjaDogJycsCiAgICAgICAgICBrZXl3b3JkOiAnJywKICAgICAgICAgIGxhbmd1YWdlOiAnMycsCiAgICAgICAgICBjbGllbnRzOiAxLAogICAgICAgICAgc3RhdHVzOiAnMCcsCiAgICAgICAgICBzb3J0Qnk6ICduYW1lJywKICAgICAgICAgIG9yZGVyQnk6ICdBU0MnLAogICAgICAgICAgZGF0ZVJhbmdlOiAnMCcsCiAgICAgICAgICBkZXBhcnRtZW50OiAnMCcsCiAgICAgICAgICB0b0RhdGU6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi11cycsIHsKICAgICAgICAgICAgeWVhcjogIm51bWVyaWMiLAogICAgICAgICAgICBtb250aDogImxvbmciLAogICAgICAgICAgICBkYXk6ICJudW1lcmljIgogICAgICAgICAgfSksCiAgICAgICAgICBmcm9tRGF0ZTogbmV3IERhdGUobmV3IERhdGUoKS5zZXRGdWxsWWVhcihuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgLSAxKSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi11cycsIHsKICAgICAgICAgICAgeWVhcjogIm51bWVyaWMiLAogICAgICAgICAgICBtb250aDogImxvbmciLAogICAgICAgICAgICBkYXk6ICJudW1lcmljIgogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZmF1bHRPcHRpb25zOiB7CiAgICAgICAgYW5pbWF0aW9uRGF0YTogYW5pbWF0aW9uRGF0YQogICAgICB9LAogICAgICBsaXN0OiBbXSwKICAgICAgYWdlbnREYXRhOiB7CiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBmaXJzdE5hbWU6ICcnLAogICAgICAgIGxhc3ROYW1lOiAnJywKICAgICAgICBsYW5ndWFnZTogJycsCiAgICAgICAgc3RhdHVzOiAnJywKICAgICAgICBwaG9uZTogJycsCiAgICAgICAgZGVwYXJ0bWVudDogJycsCiAgICAgICAgc3RhdGU6ICcnLAogICAgICAgIGJpcnRoRGF0ZTogJycsCiAgICAgICAgYWRkcmVzczogJycsCiAgICAgICAgY291bnRyeTogJycsCiAgICAgICAgemlwQ29kZTogJycsCiAgICAgICAgaW50ZXJ2aWV3OiAnJywKICAgICAgICBhZ2VudE51bWJlcjogJycsCiAgICAgICAgY3JlYXRlZEJ5OiAnJywKICAgICAgICBpbnN1cmFuY2VMaWNlbnNlOiAnJywKICAgICAgICBsaWNlbnNlTnVtYmVyOiAnJwogICAgICB9LAogICAgICBkZXBhcnRtZW50TGlzdDoge30sCiAgICAgIHN0YXR1c0xpc3Q6IHt9LAogICAgICBwcm9zcGVjdFN0YXR1c0xpc3Q6IHt9LAogICAgICBub3Rlc0RhdGE6IFtdLAogICAgICBtZXNzYWdlc0RhdGE6IFtdLAogICAgICBmaWxlOiBbXSwKICAgICAgY29udGVudDogW10sCiAgICAgIHBhcnNlZDogZmFsc2UsCiAgICAgIGl0ZW1zU2VhcmNoOiBbXSwKICAgICAgc3BlY3RlZENvbHVtbnM6IFsiTGFzdCBOYW1lIiwgIkZpcnN0IE5hbWUiLCAiQWRkcmVzcyIsICJDaXR5IiwgIlN0YXRlIiwgIlppcCIsICJEYXl0aW1lIFBob25lIiwgIkV2ZW5pbmcgUGhvbmUiLCAiQWdlIiwgIk1lZGlhIiwgIkxhbmd1YWdlIiwgIlJlY2VpdmVkIiwgIkFzc2lnbmVkIiwgIlNlY29uZCBQcmUtQXBwcm9hY2ggTGV0dGVyIl0sCiAgICAgIGFnZW50VmlzaWJsZTogdHJ1ZSwKICAgICAgaWROdW1iZXI6IDEsCiAgICAgIHByZXZpZXc6IG51bGwsCiAgICAgIGltYWdlOiBudWxsLAogICAgICBwcmV2aWV3X2xpc3Q6IFtdLAogICAgICBpbWFnZV9saXN0OiBbXSwKICAgICAgdXBsb2FkRmlsZXM6IFtdLAogICAgICBjcm1Vc2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLAogICAgICBjcm1TZWxlY3RlZFVzZXI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RlZFVzZXInKSwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBlQ29udGFjdGxpc3Q6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGNvbXBhbmllczogZnVuY3Rpb24gY29tcGFuaWVzKCkgewogICAgICB0aGlzLnNldFBhZ2VzKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zZXRQYWdlcygpOwogIH0sCiAgZmlsdGVyczogewogICAgdHJpbVdvcmRzOiBmdW5jdGlvbiB0cmltV29yZHModmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlLnNwbGl0KCIgIikuc3BsaWNlKDAsIDIwKS5qb2luKCIgIikgKyAiLi4uIjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGVkaXRkYXRhOiBmdW5jdGlvbiBlZGl0ZGF0YShkYXRhKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZCcpLnZhbHVlID0gZGF0YS5pZDsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbWVybmFtZScpLnZhbHVlID0gZGF0YS5uYW1lOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcGFueW5hbWUnKS52YWx1ZSA9IGRhdGEuY29tcGFueTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYWRzc2NvcmUnKS52YWx1ZSA9IGRhdGEuc2NvcmU7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG9uZScpLnZhbHVlID0gZGF0YS5waG9uZTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uJykudmFsdWUgPSBkYXRhLmxvY2F0aW9uOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLnZhbHVlID0gZGF0YS5kYXRlOwogICAgfSwKICAgIGFkZE5ld0FnZW50TW9kYWw6IGZ1bmN0aW9uIGFkZE5ld0FnZW50TW9kYWwoKSB7CiAgICAgIHRoaXMub3BlbkNyZWF0ZSA9IDE7CiAgICAgIHRoaXMucmVzZXRBZ2VudERhdGEoKTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFkZGZvcm0iKS5yZXNldCgpOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWdlbnRNb2RhbExhYmVsJykuaW5uZXJIVE1MID0gIkFkZCBDbGllbnQiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWJ0bicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdE5vdGVPcGVuJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CgogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1idG4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkZm9ybSIpLnJlc2V0KCk7CiAgICB9LAogICAgY2hlY2tDbGllbnRFeGlzdHM6IGZ1bmN0aW9uIGNoZWNrQ2xpZW50RXhpc3RzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICBpc1Byb3NwZWN0OiAwLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICBjbGllbnRJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGVjdGVkVXNlcicpLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLAogICAgICAgICAgICAgICAgICBwb3RlbnRpYWxDbGllbnRFbWFpbDogX3RoaXMuY2xpZW50RGF0YS5lbWFpbAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnZhbGlkRW1haWwoZGF0YS5wb3RlbnRpYWxDbGllbnRFbWFpbCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY2xpZW50L2VtYWlsRXhpc3RzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jcmVhdGVFbWFpbCIpOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoImlzLWludmFsaWQiKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgiaXMtaW52YWxpZCIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJQbGVhc2UsIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVDbGllbnQ6IGZ1bmN0aW9uIHVwZGF0ZUNsaWVudCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgZGF0YSwgbGlzdCwgaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycyA9IFtdOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLmNsaWVudERhdGEubGFzdE5hbWUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKCdMYXN0IE5hbWUgaXMgcmVxdWlyZWQuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczIuY2xpZW50RGF0YS5nZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKCdHZW5kZXIgaXMgcmVxdWlyZWQuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczIuY2xpZW50RGF0YS5sYW5ndWFnZSkgewogICAgICAgICAgICAgICAgICBfdGhpczIuZXJyb3JzLnB1c2goJ0xhbmd1YWdlIGlzIHJlcXVpcmVkLicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLmNsaWVudERhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5lcnJvcnMucHVzaCgnU3RhdHVzIGlzIHJlcXVpcmVkLicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLmNsaWVudERhdGEucGhvbmVOdW1iZXIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKCdQaG9uZSBpcyByZXF1aXJlZC4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLnZhbGlkUGhvbmUoX3RoaXMyLmNsaWVudERhdGEucGhvbmVOdW1iZXIpID09PSBmYWxzZSAmJiBfdGhpczIuY2xpZW50RGF0YS5waG9uZU51bWJlciAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKCdQbGVhc2UsIHdyaXRlIGEgdmFsaWQgcGhvbmUgbnVtYmVyIScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLmNsaWVudERhdGEuZGVwYXJ0bWVudElEKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5lcnJvcnMucHVzaCgnRGVwYXJ0bWVudCBpcyByZXF1aXJlZC4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXMyLmNsaWVudERhdGEuZW1haWwsCiAgICAgICAgICAgICAgICAgIGNpdHk6IF90aGlzMi5jbGllbnREYXRhLmNpdHksCiAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogX3RoaXMyLmNsaWVudERhdGEuZmlyc3ROYW1lLAogICAgICAgICAgICAgICAgICBsYXN0TmFtZTogX3RoaXMyLmNsaWVudERhdGEubGFzdE5hbWUsCiAgICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBfdGhpczIuY2xpZW50RGF0YS5sYW5ndWFnZSwKICAgICAgICAgICAgICAgICAgc3RhdHVzOiBfdGhpczIuY2xpZW50RGF0YS5zdGF0dXMsCiAgICAgICAgICAgICAgICAgIGxlYWRUeXBlOiBfdGhpczIuY2xpZW50RGF0YS5sZWFkVHlwZSwKICAgICAgICAgICAgICAgICAgZ2VuZGVyOiBfdGhpczIuY2xpZW50RGF0YS5nZW5kZXIsCiAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBfdGhpczIuY2xpZW50RGF0YS5waG9uZU51bWJlciwKICAgICAgICAgICAgICAgICAgZGVwYXJ0bWVudElEOiBfdGhpczIuY2xpZW50RGF0YS5kZXBhcnRtZW50SUQsCiAgICAgICAgICAgICAgICAgIHN0YXRlOiBfdGhpczIuY2xpZW50RGF0YS5zdGF0ZSwKICAgICAgICAgICAgICAgICAgYmlydGhEYXRlOiBfdGhpczIuZm9ybWF0RGF0ZShfdGhpczIuY2xpZW50RGF0YS5iaXJ0aGRheSwgJ0REIE1NTSwgWVlZWScpLAogICAgICAgICAgICAgICAgICBhZGRyZXNzOiBfdGhpczIuY2xpZW50RGF0YS5hZGRyZXNzLAogICAgICAgICAgICAgICAgICBjb3VudHJ5OiBfdGhpczIuY2xpZW50RGF0YS5jb3VudHJ5LAogICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBfdGhpczIuY2xpZW50RGF0YS5wb3N0YWxDb2RlLAogICAgICAgICAgICAgICAgICBpbnRlcnZpZXdEYXRlOiBfdGhpczIuY2xpZW50RGF0YS5pbnRlcnZpZXcsCiAgICAgICAgICAgICAgICAgIGNyZWF0ZWRCeTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIGxpY2Vuc2VOdW1iZXI6IF90aGlzMi5jbGllbnREYXRhLmxpY2Vuc2VOdW1iZXIsCiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksCiAgICAgICAgICAgICAgICAgIGNsaWVudElEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWRVc2VyJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnB1dCgnL2FwaS9jbGllbnQvdXBkYXRlQ2xpZW50JywgZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtbW9kYWwnKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NsaWVudCB1cGRhdGUgc3VjY2Vzc2Z1bGx5IScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSkuY2F0Y2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCwgcHJvcGVydHk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKCIiLmNvbmNhdChwcm9wZXJ0eSwgIjogIikuY29uY2F0KGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ICs9ICdcbicgKyAnPGI+JyArIGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldICsgJzwvYj4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIlBsZWFzZSBjaGVjayB0aGUgZm9sbG93aW5nOiAiICsgbGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuZXJyb3JzLnB1c2goJ1NvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgbGlzdCA9ICcnOwoKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBfdGhpczIuZXJyb3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QgKz0gJ1xuJyArICc8Yj4nICsgX3RoaXMyLmVycm9yc1tpXSArICc8L2I+JzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlIGNvbXBsZXRlIHRoZSBmb3JtISAiICsgbGlzdCwKICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjcmVhdGVDbGllbnQ6IGZ1bmN0aW9uIGNyZWF0ZUNsaWVudCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgYmVuZWZpY2lhcmllcywgZW1lcmdlbmN5Q29udGFjdHMsIGFkZGVkQ2hpbGRzLCBub3RlLCBmb3JtVmFsdWVzLCB2YWx1ZXMsIGRhdGEsIGxpc3QsIGk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMy5lcnJvcnMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy5jbGllbnREYXRhLmZpcnN0TmFtZSkgewogICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goJ0ZpcnN0IE5hbWUgaXMgcmVxdWlyZWQuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczMuY2xpZW50RGF0YS5sYXN0TmFtZSkgewogICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goJ0xhc3QgTmFtZSBpcyByZXF1aXJlZC4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy5jbGllbnREYXRhLnN0YXR1cykgewogICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goJ1N0YXR1cyBpcyByZXF1aXJlZC4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy5jbGllbnREYXRhLnBob25lTnVtYmVyKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5lcnJvcnMucHVzaCgnUGhvbmUgaXMgcmVxdWlyZWQuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy52YWxpZFBob25lKF90aGlzMy5jbGllbnREYXRhLnBob25lKSA9PT0gZmFsc2UgJiYgX3RoaXMzLmNsaWVudERhdGEucGhvbmUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5lcnJvcnMucHVzaCgnUGxlYXNlLCB3cml0ZSBhIHZhbGlkIHBob25lIG51bWJlciEnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy5jbGllbnREYXRhLmRlcGFydG1lbnRJRCkgewogICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goJ0RlcGFydG1lbnQgaXMgcmVxdWlyZWQuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy5jbGllbnREYXRhLnR5cGUgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5lcnJvcnMucHVzaCgnTGVhZC9DbGllbnQgU291cmNlIGlzIHJlcXVpcmVkLicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMuY2xpZW50RGF0YS5nZW5kZXIgIT09ICdNJyAmJiBfdGhpczMuY2xpZW50RGF0YS5nZW5kZXIgIT09ICdGJykgewogICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goJ0dlbmRlciBpcyByZXF1aXJlZC4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLmNsaWVudERhdGEubGFuZ3VhZ2UgIT09ICcxJyAmJiBfdGhpczMuY2xpZW50RGF0YS5sYW5ndWFnZSAhPT0gJzInKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5lcnJvcnMucHVzaCgnTGFuZ3VhZ2UgaXMgcmVxdWlyZWQuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy5jbGllbnREYXRhLmxlYWRUeXBlID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goJ0xlYWQvY2xpZW50IFNvdXJjZSBpcyByZXF1aXJlZC4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYmVuZWZpY2lhcmllcyA9IF90aGlzMy5nZXRCZW5maWNpYXJpZXMoKTsKICAgICAgICAgICAgICAgIGVtZXJnZW5jeUNvbnRhY3RzID0gX3RoaXMzLmdldEVtZXJnZW5jeSgpOwogICAgICAgICAgICAgICAgYWRkZWRDaGlsZHMgPSBfdGhpczMuZ2V0QWRkZWRDaGlsZHMoKTsKICAgICAgICAgICAgICAgIG5vdGUgPSB7CiAgICAgICAgICAgICAgICAgICdub3RlJzogX3RoaXMzLmNsaWVudERhdGEubm90ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGZvcm1WYWx1ZXMgPSB7CiAgICAgICAgICAgICAgICAgICdhZGRyZXNzJzogX3RoaXMzLmNsaWVudERhdGEuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgJ2JpcnRoZGF5JzogX3RoaXMzLmNsaWVudERhdGEuYmlydGhkYXksCiAgICAgICAgICAgICAgICAgICdjaXR5JzogX3RoaXMzLmNsaWVudERhdGEuY2l0eSwKICAgICAgICAgICAgICAgICAgJ2NvdW50cnknOiBfdGhpczMuY2xpZW50RGF0YS5jb3VudHJ5LAogICAgICAgICAgICAgICAgICAnZGVwYXJ0bWVudCc6IF90aGlzMy5jbGllbnREYXRhLmRlcGFydG1lbnRJRCwKICAgICAgICAgICAgICAgICAgJ2VtYWlsJzogX3RoaXMzLmNsaWVudERhdGEuZW1haWwsCiAgICAgICAgICAgICAgICAgICdmaXJzdE5hbWUnOiBfdGhpczMuY2xpZW50RGF0YS5maXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICdpbnRlcnZpZXcnOiBfdGhpczMuY2xpZW50RGF0YS5pbnRlcnZpZXcsCiAgICAgICAgICAgICAgICAgICdsYW5ndWFnZSc6IF90aGlzMy5jbGllbnREYXRhLmxhbmd1YWdlLAogICAgICAgICAgICAgICAgICAnbGFzdE5hbWUnOiBfdGhpczMuY2xpZW50RGF0YS5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgJ2xlYWRUeXBlJzogX3RoaXMzLmNsaWVudERhdGEubGVhZFR5cGUsCiAgICAgICAgICAgICAgICAgICdub3RlJzogX3RoaXMzLmNsaWVudERhdGEubm90ZSwKICAgICAgICAgICAgICAgICAgJ3Bob25lTnVtYmVyJzogX3RoaXMzLmNsaWVudERhdGEucGhvbmVOdW1iZXIsCiAgICAgICAgICAgICAgICAgICdwb3N0YWxDb2RlJzogX3RoaXMzLmNsaWVudERhdGEucG9zdGFsQ29kZSwKICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogX3RoaXMzLmNsaWVudERhdGEuc3RhdGUsCiAgICAgICAgICAgICAgICAgICdzdGF0dXMnOiBfdGhpczMuY2xpZW50RGF0YS5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICdsZW5ndGgnOiBfdGhpczMuY2xpZW50RGF0YS5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICdnZW5kZXInOiBfdGhpczMuY2xpZW50RGF0YS5nZW5kZXIKICAgICAgICAgICAgICAgIH07IC8vIGxldCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFkZGZvcm0iKTsKICAgICAgICAgICAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ybS5lbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgLy8gICBsZXQgZSA9IGZvcm0uZWxlbWVudHNbaV07CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgICAgICAgLy8gaWYoZS5uYW1lICE9PSAnJykgewogICAgICAgICAgICAgICAgLy8gICBmb3JtVmFsdWVzW2UubmFtZV0gPSBlLnZhbHVlOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgLy8gZm9ybVZhbHVlc1snZWRpdEdlbmRlciddID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaW5wdXRbdHlwZT0ncmFkaW8nXVtuYW1lPWVkaXRHZW5kZXJdOmNoZWNrZWQiKS52YWx1ZTsKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyBpZih0aGlzLmlzQ2xpZW50TGlzdCl7CiAgICAgICAgICAgICAgICAvLyAgIGZvcm1WYWx1ZXNbJ2VkaXRUeXBlJ10gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjZWRpdFR5cGUiKS52YWx1ZTsKICAgICAgICAgICAgICAgIC8vIH1lbHNlewogICAgICAgICAgICAgICAgLy8gICBmb3JtVmFsdWVzWydlZGl0VHlwZSddID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2VkaXRUeXBlMSIpLnZhbHVlOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgICAgIHZhbHVlcyA9IHsKICAgICAgICAgICAgICAgICAgMDogewogICAgICAgICAgICAgICAgICAgIGZvcm1WYWx1ZXM6IGZvcm1WYWx1ZXMsCiAgICAgICAgICAgICAgICAgICAgYmVuZWZpY2lhcmllczogYmVuZWZpY2lhcmllcywKICAgICAgICAgICAgICAgICAgICBlbWVyZ2VuY3lDb250YWN0czogZW1lcmdlbmN5Q29udGFjdHMsCiAgICAgICAgICAgICAgICAgICAgYWRkZWRDaGlsZHM6IGFkZGVkQ2hpbGRzLAogICAgICAgICAgICAgICAgICAgIG5vdGU6IG5vdGUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGNsaWVudHNJbmZvOiB2YWx1ZXMsCiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIGlzUHJvc3BlY3Q6IDAsCiAgICAgICAgICAgICAgICAgIHRvdGFsQ2xpZW50czogMQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9jbGllbnQvY3JlYXRlQ2xpZW50TGlzdCcsIGRhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2UuZGF0YVsnSUQnXSAhPT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2Vtb2RhbCcpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkZm9ybSIpLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQ2xpZW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKS5jYXRjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihlcnJvcikgewogICAgICAgICAgICAgICAgICAgIHZhciBsaXN0LCBwcm9wZXJ0eTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmVycm9ycy5wdXNoKCIiLmNvbmNhdChwcm9wZXJ0eSwgIjogIikuY29uY2F0KGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ICs9ICdcbicgKyAnPGI+JyArIGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldICsgJzwvYj4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIlBsZWFzZSBjaGVjayB0aGUgZm9sbG93aW5nOiAiICsgbGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goJ1NvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgbGlzdCA9ICcnOwoKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBfdGhpczMuZXJyb3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QgKz0gJ1xuJyArICc8Yj4nICsgX3RoaXMzLmVycm9yc1tpXSArICc8L2I+JzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlIGNvbXBsZXRlIHRoZSBmb3JtISAiICsgbGlzdCwKICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkZWxldGVBZ2VudDogZnVuY3Rpb24gZGVsZXRlQWdlbnQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICAgICAgICAgICAgdXNlck5hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmaXJzdE5hbWUnKSArICcgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYXN0bmFtZScpLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICBhZ2VudElEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWRVc2VyJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogJ0RvIHlvdSB3YW50IHRvIDxiPkRlbGV0ZTwvYj4gdGhpcyBhZ2VudD8nLAogICAgICAgICAgICAgICAgICBzaG93RGVueUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdZZXMnLAogICAgICAgICAgICAgICAgICBkZW55QnV0dG9uVGV4dDogIk5vIgogICAgICAgICAgICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5pc0NvbmZpcm1lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnB1dCgnL2FwaS9kZWxldGVVc2VyJywgZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY2ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSgnQWdlbnQgdXBkYXRlIHN1Y2Nlc3NmdWxseSEnLCAnJywgJ3N1Y2Nlc3MnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSkuY2F0Y2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCwgcHJvcGVydHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChwcm9wZXJ0eSBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5lcnJvcnMucHVzaCgiIi5jb25jYXQocHJvcGVydHksICI6ICIpLmNvbmNhdChlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdCArPSAnXG4nICsgJzxiPicgKyBlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSArICc8L2I+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJQbGVhc2UgY2hlY2sgdGhlIGZvbGxvd2luZzogIiArIGxpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAiYnRuIGJ0bi1pbmZvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5pc0RlbmllZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSgnQWdlbnQgd2FzblwndCB1cGRhdGVkIScsICcnLCAnaW5mbycpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g1KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldERlcGFydG1lbnRzOiBmdW5jdGlvbiBnZXREZXBhcnRtZW50cygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvZ2V0RGVwYXJ0bWVudHMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIlNvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFVzZXJJbmZvOiBmdW5jdGlvbiBnZXRVc2VySW5mbyhpZCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICB2YXIgZGF0YSwgYWdlbnRJbmZvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtYnRuJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWJ0bicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWdlbnRNb2RhbExhYmVsJykuaW5uZXJIVE1MID0gIkVkaXQgQWdlbnQiOwogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgSUQ6IGlkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2dldFVzZXInLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBhZ2VudEluZm8gPSByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICAgICAgX3RoaXM2LnNldEFnZW50RGF0YShhZ2VudEluZm8pOwoKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkJykudmFsdWUgPSBhZ2VudEluZm8uSUQ7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0RW1haWwnKS52YWx1ZSA9IGFnZW50SW5mby5lbWFpbDsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRGaXJzdE5hbWUnKS52YWx1ZSA9IGFnZW50SW5mby5maXJzdE5hbWU7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0TGFzdE5hbWUnKS52YWx1ZSA9IGFnZW50SW5mby5sYXN0TmFtZTsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRMYW5ndWFnZScpLnZhbHVlID0gYWdlbnRJbmZvLmxhbmd1YWdlOwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdFN0YXR1cycpLnZhbHVlID0gYWdlbnRJbmZvLnN0YXR1czsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRQaG9uZU51bWJlcicpLnZhbHVlID0gYWdlbnRJbmZvLnBob25lTnVtYmVyOwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdERlcGFydG1lbnQnKS52YWx1ZSA9IGFnZW50SW5mby5kZXBhcnRtZW50SUQ7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0QmlydGhEYXRlJykudmFsdWUgPSBhZ2VudEluZm8uZGF0ZU9mQmlydGg7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0QWRkcmVzcycpLnZhbHVlID0gYWdlbnRJbmZvLmFkZHJlc3M7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0U3RhdGUnKS52YWx1ZSA9IGFnZW50SW5mby5zdGF0ZTsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRDb3VudHJ5JykudmFsdWUgPSBhZ2VudEluZm8uY291bnRyeTsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRQb3N0YWxDb2RlJykudmFsdWUgPSBhZ2VudEluZm8ucG9zdGFsQ29kZTsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRBZ2VudE51bWJlcicpLnZhbHVlID0gYWdlbnRJbmZvLmFnZW50TnVtYmVyOwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdENyZWF0ZWRCeScpLnZhbHVlID0gYWdlbnRJbmZvLmNyZWF0ZWRCeTsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRMaWNlbnNlZCcpLnZhbHVlID0gYWdlbnRJbmZvLmlzTGljZW5zZWQ7IC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0SW50ZXJ2aWV3JykudmFsdWU9YWdlbnRJbmZvLmludGVydmlld0RhdGU7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIlNvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldENsaWVudEluZm86IGZ1bmN0aW9uIGdldENsaWVudEluZm8oaWQpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgICAgdmFyIGRhdGEsIGNsaWVudEluZm87CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczcub3BlbkNyZWF0ZSA9IDA7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1idG4nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtYnRuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZ2VudE1vZGFsTGFiZWwnKS5pbm5lckhUTUwgPSAiRWRpdCBDbGllbnQiOwogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgSUQ6IGlkCiAgICAgICAgICAgICAgICB9OyAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdE5vdGVPcGVuJykuc3R5bGUuZGlzcGxheT0nYmxvY2snOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LmdldE5vdGVzKGlkKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2NsaWVudC9nZXRDbGllbnQnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBjbGllbnRJbmZvID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNy5zZXRDbGllbnREYXRhKHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkVXNlcicsIGNsaWVudEluZm8uSUQpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWRVc2VyTmFtZScsIGNsaWVudEluZm8uZmlyc3ROYW1lICsgJyAnICsgY2xpZW50SW5mby5sYXN0TmFtZSk7CgogICAgICAgICAgICAgICAgICBfdGhpczcuZ2V0TWFwc0xpbmsoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNy5nZXRGaWxlcyhpZCk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIlNvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwZGF0ZUNsaWVudExpc3Q6IGZ1bmN0aW9uIHVwZGF0ZUNsaWVudExpc3QoKSB7CiAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzLAogICAgICAgICAgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICB2YXIgc3RhdHVzLCB2YWxpZGF0ZSwgZXJyb3JzLCBmaWx0ZXJMYW5ndWFnZSwgZmlsdGVyS2V5d29yZCwgZmlsdGVyVHlwZSwgZmlsdGVyTm90ZXMsIGZpbHRlckZyb21EYXRlLCBmaWx0ZXJUb0RhdGUsIHN0YXJ0LCBlbmQsIGRheXMsIHR5cGVBaGVhZCwgZGF0YSwgbGlzdCwgaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXR1cyA9IF9hcmd1bWVudHMubGVuZ3RoID4gMCAmJiBfYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzBdIDogX3RoaXM4LmRhdGEuc2VhcmNoVmFsdWVzLnN0YXR1czsKICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVycm9ycyA9IFtdOwogICAgICAgICAgICAgICAgZmlsdGVyTGFuZ3VhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyTGFuZ3VhZ2UiKS52YWx1ZTsKICAgICAgICAgICAgICAgIGZpbHRlcktleXdvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyS2V5d29yZCIpLnZhbHVlOwogICAgICAgICAgICAgICAgZmlsdGVyVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWx0ZXJUeXBlIikudmFsdWU7CiAgICAgICAgICAgICAgICBmaWx0ZXJOb3RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWx0ZXJOb3RlcyIpLnZhbHVlOwogICAgICAgICAgICAgICAgZmlsdGVyRnJvbURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyRnJvbURhdGUiKS52YWx1ZTsKICAgICAgICAgICAgICAgIGZpbHRlclRvRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWx0ZXJUb0RhdGUiKS52YWx1ZTsKICAgICAgICAgICAgICAgIF90aGlzOC5kYXRhLnNlYXJjaFZhbHVlcy5zdGF0dXMgPSBzdGF0dXM7CgogICAgICAgICAgICAgICAgaWYgKGZpbHRlckxhbmd1YWdlICE9PSAnJyAmJiAoZmlsdGVyTGFuZ3VhZ2UgPT09ICcxJyB8fCBmaWx0ZXJMYW5ndWFnZSA9PT0gJzInKSkgewogICAgICAgICAgICAgICAgICBfdGhpczguZGF0YS5zZWFyY2hWYWx1ZXMubGFuZ3VhZ2UgPSBmaWx0ZXJMYW5ndWFnZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyS2V5d29yZCAhPT0gJycgJiYgZmlsdGVyS2V5d29yZC5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICBfdGhpczguZGF0YS5zZWFyY2hWYWx1ZXMua2V5d29yZCA9IGZpbHRlcktleXdvcmQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlcktleXdvcmQgIT09ICcnICYmIGZpbHRlcktleXdvcmQubGVuZ3RoIDwgMykgewogICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgnS2V5d29yZCBzZWFyY2ggc2hvdWxkIGhhdmUgMyBvciBtb3JlIGNoYXJhY3RlcnMhJyk7CiAgICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGZpbHRlclR5cGUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC5kYXRhLnNlYXJjaFZhbHVlcy50eXBlID0gZmlsdGVyVHlwZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyTm90ZXMgIT09ICcnICYmIGZpbHRlck5vdGVzLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC5kYXRhLnNlYXJjaFZhbHVlcy5ub3RlU2VhcmNoID0gZmlsdGVyTm90ZXM7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlck5vdGVzICE9PSAnJyAmJiBmaWx0ZXJOb3Rlcy5sZW5ndGggPCAzKSB7CiAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCdOb3RlcyBzZWFyY2ggc2hvdWxkIGhhdmUgMyBvciBtb3JlIGNoYXJhY3RlcnMhJyk7CiAgICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3RhcnQgPSBtb21lbnQoX3RoaXM4LmZvcm1hdERhdGUoZmlsdGVyRnJvbURhdGUsICdZWVlZLU1NLUREJykpOwogICAgICAgICAgICAgICAgZW5kID0gbW9tZW50KF90aGlzOC5mb3JtYXREYXRlKGZpbHRlclRvRGF0ZSwgJ1lZWVktTU0tREQnKSk7CiAgICAgICAgICAgICAgICBkYXlzID0gZW5kLmRpZmYoc3RhcnQsICJkYXlzIik7CgogICAgICAgICAgICAgICAgaWYgKGRheXMgPD0gMzY1KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC5kYXRhLnNlYXJjaFZhbHVlcy5mcm9tRGF0ZSA9IGZpbHRlckZyb21EYXRlOwogICAgICAgICAgICAgICAgICBfdGhpczguZGF0YS5zZWFyY2hWYWx1ZXMudG9EYXRlID0gZmlsdGVyVG9EYXRlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIkZyb20gRGF0ZSBhbmQgVG8gRGF0ZSAocmFuZ2UpIGNvdWxkbid0IGJlIGxhcmdlciB0aGFuIGEgeWVhciAoMzY1IGRheXMpISIpOwogICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHR5cGVBaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eXBlYWhlYWRfaWQnKTsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIGlzUHJvc3BlY3Q6IDAsCiAgICAgICAgICAgICAgICAgIHNlYXJjaFZhbHVlczogX3RoaXM4LmRhdGEuc2VhcmNoVmFsdWVzLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLAogICAgICAgICAgICAgICAgICBkZWxldGVkOiAwLAogICAgICAgICAgICAgICAgICBhZ2VudFNlYXJjaDogdHlwZUFoZWFkICE9IG51bGwgJiYgdHlwZW9mIHR5cGVBaGVhZCAhPSAndW5kZWZpbmVkJyA/IHR5cGVBaGVhZC52YWx1ZSA6IFtdCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmICghdmFsaWRhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY2xpZW50L2xpc3RDbGllbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4Lmxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICBfdGhpczgucGFnZSA9IDE7CgogICAgICAgICAgICAgICAgICBfdGhpczguc2V0UGFnZXMoKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczguJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5lcnJvcnMucHVzaCgiIi5jb25jYXQocHJvcGVydHksICI6ICIpLmNvbmNhdChlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvKiBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpDQogICAgICAgICAgICAgICAgICB9Ki8KCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICBsaXN0ID0gJyc7CgogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGVycm9ycy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgICAgICAgICBsaXN0ICs9IGVycm9yc1tpXSArICcgXG4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSgiIiArIGxpc3QsICcnLCAnaW5mbycpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB2YWxpZEVtYWlsOiBmdW5jdGlvbiB2YWxpZEVtYWlsKGVtYWlsKSB7CiAgICAgIHZhciByZSA9IC9eKChbXjw+KClbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClbXF1cXC4sOzpcc0AiXSspKil8KCIuKyIpKUAoKFxbWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVxdKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CiAgICAgIHJldHVybiByZS50ZXN0KGVtYWlsLnRyaW0oKSk7CiAgICB9LAogICAgdmFsaWRQaG9uZTogZnVuY3Rpb24gdmFsaWRQaG9uZShwaG9uZSkgewogICAgICB2YXIgaXNwaG9uZSA9IC9eKFwrezAsfSkoXGR7MCx9KShbKF17MX1cZHsxLDN9WyldezAsfSl7MCx9KFxzP1xkK3xcK1xkezIsM31cc3sxfVxkK3xcZCspezF9W1xzfC1dP1xkKyhbXHN8LV0/XGQrKXsxLDJ9KFxzKXswLH0kL2dtLnRlc3QocGhvbmUpOwogICAgICByZXR1cm4gaXNwaG9uZTsKICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIGZvcm1hdCkgewogICAgICBkYXRlID0gbW9tZW50KGRhdGUpLmZvcm1hdChmb3JtYXQpOwogICAgICByZXR1cm4gZGF0ZTsKICAgIH0sCiAgICBmb3JtYXRQaG9uZTogZnVuY3Rpb24gZm9ybWF0UGhvbmUocGhvbmUpIHsKICAgICAgdmFyIGZsYWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgIC8vIGlmIGZsYWcgPT0gMSBwdXQgdmFsdWUgaW4gcGhvbmUgRWRpdAogICAgICBwaG9uZSA9IHBob25lLnJlcGxhY2UoL1xEL2csICcnKTsKCiAgICAgIGlmIChwaG9uZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKHBob25lLmxlbmd0aCA+IDEwKSB7CiAgICAgICAgICBwaG9uZSA9IHBob25lLnN1YnN0cmluZygxKTsKICAgICAgICB9CgogICAgICAgIHZhciB4ID0gcGhvbmUubWF0Y2goLyhcZHswLDN9KShcZHswLDN9KShcZHswLDR9KS8pOwogICAgICAgIHBob25lID0gIXhbMl0gPyB4WzFdIDogJygnICsgeFsxXSArICcpICcgKyB4WzJdICsgKHhbM10gPyAnLScgKyB4WzNdIDogJycpOwogICAgICB9IGVsc2UgewogICAgICAgIHBob25lID0gJyc7CiAgICAgIH0KCiAgICAgIGlmIChmbGFnICE9PSAxKSB7CiAgICAgICAgcmV0dXJuIHBob25lOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0UGhvbmVOdW1iZXInKS52YWx1ZSA9IHBob25lOwogICAgICB9CiAgICB9LAogICAgc2V0QWdlbnREYXRhOiBmdW5jdGlvbiBzZXRBZ2VudERhdGEoZGF0YSkgewogICAgICB0aGlzLmFnZW50RGF0YS5lbWFpbCA9IGRhdGEuZW1haWw7CiAgICAgIHRoaXMuYWdlbnREYXRhLmZpcnN0TmFtZSA9IGRhdGEuZmlyc3ROYW1lOwogICAgICB0aGlzLmFnZW50RGF0YS5sYXN0TmFtZSA9IGRhdGEubGFzdE5hbWU7CiAgICAgIHRoaXMuYWdlbnREYXRhLmxhbmd1YWdlID0gZGF0YS5sYW5ndWFnZTsKICAgICAgdGhpcy5hZ2VudERhdGEuc3RhdHVzID0gZGF0YS5zdGF0dXM7CiAgICAgIHRoaXMuYWdlbnREYXRhLnBob25lID0gZGF0YS5waG9uZU51bWJlcjsKICAgICAgdGhpcy5hZ2VudERhdGEuZGVwYXJ0bWVudCA9IGRhdGEuZGVwYXJ0bWVudElEOwogICAgICB0aGlzLmFnZW50RGF0YS5iaXJ0aERhdGUgPSB0aGlzLmZvcm1hdERhdGUoZGF0YS5kYXRlT2ZCaXJ0aCwgJ0REIE1NLCBZWVlZJyk7CiAgICAgIHRoaXMuYWdlbnREYXRhLmludGVydmlldyA9IHRoaXMuZm9ybWF0RGF0ZShkYXRhLmludGVydmlld0RhdGUsICdtLWQteSBIOmkgSycpOwogICAgICB0aGlzLmFnZW50RGF0YS5hZGRyZXNzID0gZGF0YS5hZGRyZXNzOwogICAgICB0aGlzLmFnZW50RGF0YS5zdGF0ZSA9IGRhdGEuc3RhdGU7CiAgICAgIHRoaXMuYWdlbnREYXRhLmNvdW50cnkgPSBkYXRhLmNvdW50cnk7CiAgICAgIHRoaXMuYWdlbnREYXRhLnppcENvZGUgPSBkYXRhLnBvc3RhbENvZGU7CiAgICAgIHRoaXMuYWdlbnREYXRhLmFnZW50TnVtYmVyID0gZGF0YS5hZ2VudE51bWJlcjsKICAgICAgdGhpcy5hZ2VudERhdGEuY3JlYXRlZEJ5ID0gZGF0YS5jcmVhdGVkQnk7CiAgICAgIHRoaXMuYWdlbnREYXRhLmluc3VyYW5jZUxpY2Vuc2UgPSBkYXRhLmlzTGljZW5zZWQ7CiAgICB9LAogICAgcmVzZXRBZ2VudERhdGE6IGZ1bmN0aW9uIHJlc2V0QWdlbnREYXRhKCkgewogICAgICB0aGlzLmFnZW50RGF0YSA9IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIGZpcnN0TmFtZTogJycsCiAgICAgICAgbGFzdE5hbWU6ICcnLAogICAgICAgIGxhbmd1YWdlOiAnJywKICAgICAgICBzdGF0dXM6ICcnLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBkZXBhcnRtZW50OiAnJywKICAgICAgICBzdGF0ZTogJycsCiAgICAgICAgYmlydGhEYXRlOiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBjb3VudHJ5OiAnJywKICAgICAgICB6aXBDb2RlOiAnJywKICAgICAgICBpbnRlcnZpZXc6ICcnLAogICAgICAgIGFnZW50TnVtYmVyOiAnJywKICAgICAgICBjcmVhdGVkQnk6ICcnLAogICAgICAgIGluc3VyYW5jZUxpY2Vuc2U6ICcnLAogICAgICAgIGxpY2Vuc2VOdW1iZXI6ICcnCiAgICAgIH07CiAgICAgIHRoaXMuY2xpZW50RGF0YSA9IFtdOwogICAgfSwKICAgIHNldFBhZ2VzOiBmdW5jdGlvbiBzZXRQYWdlcygpIHsKICAgICAgdmFyIG51bWJlck9mUGFnZXMgPSBNYXRoLmNlaWwodGhpcy5saXN0Lmxlbmd0aCAvIHRoaXMucGVyUGFnZSk7CiAgICAgIHRoaXMucGFnZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPD0gbnVtYmVyT2ZQYWdlczsgaW5kZXgrKykgewogICAgICAgIHRoaXMucGFnZXMucHVzaChpbmRleCk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdpbmF0ZTogZnVuY3Rpb24gcGFnaW5hdGUoY29tcGFuaWVzKSB7CiAgICAgIHZhciBwYWdlID0gdGhpcy5wYWdlOwogICAgICB2YXIgcGVyUGFnZSA9IHRoaXMucGVyUGFnZTsKICAgICAgdmFyIGZyb20gPSBwYWdlICogcGVyUGFnZSAtIHBlclBhZ2U7CiAgICAgIHZhciB0byA9IHBhZ2UgKiBwZXJQYWdlOwogICAgICByZXR1cm4gY29tcGFuaWVzLnNsaWNlKGZyb20sIHRvKTsKICAgIH0sCiAgICBhZGRCZW5lZmljaWFyeTogZnVuY3Rpb24gYWRkQmVuZWZpY2lhcnkoKSB7CiAgICAgIHZhciBiZW5MaXN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKICAgICAgdGhpcy5iZW5lZmljaWFyeVF0eSA9IHRoaXMuYmVuZWZpY2lhcnlRdHkgKyAxOwogICAgICB2YXIgaSA9IHRoaXMuYmVuZWZpY2lhcnlRdHk7CiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkQmVuZWZpY2lhcnknKTsKICAgICAgdmFyIHNlcGFyYXRvciA9ICcnOwogICAgICB2YXIgY2hlY2tJREV4aXN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJiZW5GaXJzdE5hbWUtMSIpOwogICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoKICAgICAgaWYgKGJlbkxpc3QubGVuZ3RoIDw9IDApIHsKICAgICAgICBiZW5MaXN0LnB1c2goYmVuTGlzdFsnZmlyc3ROYW1lJ10gPSAnJywgYmVuTGlzdFsnbGFzdE5hbWUnXSA9ICcnLCBiZW5MaXN0WydhZGRyZXNzJ10gPSAnJywgYmVuTGlzdFsncGhvbmVOdW1iZXInXSA9ICcnLCBiZW5MaXN0WydzdGF0ZSddID0gJycsIGJlbkxpc3RbJ3Bvc3RhbENvZGUnXSA9ICcnLCBiZW5MaXN0WydyZWxhdGlvbnNoaXAnXSA9ICcnLCBiZW5MaXN0WydhZ2UnXSA9ICcnKTsKICAgICAgfQoKICAgICAgaWYgKGNoZWNrSURFeGlzdHMpIHsKICAgICAgICBzZXBhcmF0b3IgPSAnPGhyIHN0eWxlPSJib3JkZXItdG9wOiAxcHggc29saWQgIzJjOWEyYTsiPic7CiAgICAgIH0KCiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MICs9ICc8ZGl2IGNsYXNzPSJyb3ciIGlkPSJyb3dCZW4nICsgaSArICciPlxuJyArIHNlcGFyYXRvciArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9ImJlbkZpcnN0TmFtZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWxhYmVsIj5GaXJzdCBOYW1lPC9sYWJlbD5cbicgKyAnICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYmVuRmlyc3ROYW1lLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tY29udHJvbCBtYi0yIiBwbGFjZWhvbGRlcj0iRW50ZXIgRmlyc3QgTmFtZSIgbmFtZT0iYmVuRmlyc3ROYW1lW10iIHJlcXVpcmVkIHZhbHVlPSInICsgYmVuTGlzdFsnZmlyc3ROYW1lJ10gKyAnIj5cbicgKyAnICA8L2Rpdj5cbicgKyAnICA8ZGl2IGNsYXNzPSJjb2wtbGctNiI+XG4nICsgJyAgICA8bGFiZWwgZm9yPSJiZW5MYXN0TmFtZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWxhYmVsIj5MYXN0IE5hbWU8L2xhYmVsPlxuJyArICcgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJiZW5MYXN0TmFtZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWNvbnRyb2wgbWItMiIgcGxhY2Vob2xkZXI9IkVudGVyIExhc3QgTmFtZSIgIG5hbWU9ImJlbkxhc3ROYW1lW10iIHJlcXVpcmVkIHZhbHVlPSInICsgYmVuTGlzdFsnbGFzdE5hbWUnXSArICciPlxuJyArICcgIDwvZGl2PlxuJyArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9ImJlbkFkZHJlc3MtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1sYWJlbCI+QWRkcmVzczwvbGFiZWw+XG4nICsgJyAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImJlbkFkZHJlc3MtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1jb250cm9sIG1iLTIiIHBsYWNlaG9sZGVyPSJFbnRlciBBZGRyZXNzIiAgbmFtZT0iYmVuQWRkcmVzc1tdIiByZXF1aXJlZCB2YWx1ZT0iJyArIGJlbkxpc3RbJ2FkZHJlc3MnXSArICciPlxuJyArICcgIDwvZGl2PlxuJyArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9ImJlblBob25lLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPlBob25lPC9sYWJlbD5cbicgKyAnICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYmVuUGhvbmUtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1jb250cm9sIG1iLTIiIHBsYWNlaG9sZGVyPSJFbnRlciBQaG9uZSIgIG5hbWU9ImJlblBob25lW10iIHJlcXVpcmVkIHZhbHVlPSInICsgYmVuTGlzdFsncGhvbmVOdW1iZXInXSArICciPlxuJyArICcgIDwvZGl2PlxuJyArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9ImJlblN0YXRlLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPlN0YXRlPC9sYWJlbD5cbicgKyAnICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYmVuU3RhdGUtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1jb250cm9sIG1iLTIiIHBsYWNlaG9sZGVyPSJFbnRlciBTdGF0ZSIgIG5hbWU9ImJlblN0YXRlW10iICByZXF1aXJlZCB2YWx1ZT0iJyArIGJlbkxpc3RbJ3N0YXRlJ10gKyAnIj5cbicgKyAnICA8L2Rpdj5cbicgKyAnICA8ZGl2IGNsYXNzPSJjb2wtbGctNiI+XG4nICsgJyAgICA8bGFiZWwgZm9yPSJiZW5Qb3N0YWxDb2RlLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPlBvc3RhbCBDb2RlPC9sYWJlbD5cbicgKyAnICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYmVuUG9zdGFsQ29kZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWNvbnRyb2wgbWItMiIgcGxhY2Vob2xkZXI9IkVudGVyIFBvc3RhbCBDb2RlIiAgbmFtZT0iYmVuUG9zdGFsQ29kZVtdIiByZXF1aXJlZCB2YWx1ZT0iJyArIGJlbkxpc3RbJ3Bvc3RhbENvZGUnXSArICciPlxuJyArICcgIDwvZGl2PlxuJyArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9ImJlblJlbGF0aW9uLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPlJlbGF0aW9uc2hpcDwvbGFiZWw+XG4nICsgJyAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImJlblJlbGF0aW9uLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tY29udHJvbCBtYi0yIiBwbGFjZWhvbGRlcj0iRW50ZXIgUmVsYXRpb25zaGlwIiAgbmFtZT0iYmVuUmVsYXRpb25bXSIgIHJlcXVpcmVkIHZhbHVlPSInICsgYmVuTGlzdFsncmVsYXRpb25zaGlwJ10gKyAnIj5cbicgKyAnICA8L2Rpdj5cbicgKyAnICA8ZGl2IGNsYXNzPSJjb2wtbGctNiI+XG4nICsgJyAgICA8bGFiZWwgZm9yPSJiZW5BZ2UtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1sYWJlbCI+QWdlPC9sYWJlbD5cbicgKyAnICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYmVuQWdlLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tY29udHJvbCBtYi0yIiBwbGFjZWhvbGRlcj0iRW50ZXIgQWdlIiAgbmFtZT0iYmVuQWdlW10iIHJlcXVpcmVkIHZhbHVlPSInICsgYmVuTGlzdFsnYWdlJ10gKyAnIj5cbicgKyAnICA8L2Rpdj5cbicgKyAnIDxkaXYgY2xhc3M9ImNvbC1tZC02IiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPlxuJyArICcgPC9kaXY+XG4nICsgJyA8ZGl2IGNsYXNzPSJjb2wtbWQtNiIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij5cbicgKyAnICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iJyArIGkgKyAnIiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgcmVtb3ZlSXRlbUJlbiIgdGl0bGU9IkRlbGV0ZSI+PGkgY2xhc3M9InJpLWNsb3NlLWNpcmNsZS1saW5lIj48L2k+PC9idXR0b24+XG4nICsgJyA8L2Rpdj5cbicgKyAnPC9kaXY+JzsKICAgICAgZGl2LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgfSwKICAgIGFkZEVjb250YWN0OiBmdW5jdGlvbiBhZGRFY29udGFjdCgpIHsKICAgICAgdmFyIGVDb250YWN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKICAgICAgdGhpcy5lQ29udGFjdFF0eSA9IHRoaXMuZUNvbnRhY3RRdHkgKyAxOwogICAgICB2YXIgaSA9IHRoaXMuZUNvbnRhY3RRdHk7CiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkRWNvbnRhY3QnKTsKICAgICAgdmFyIHNlcGFyYXRvciA9ICcnOwogICAgICB2YXIgY2hlY2tJREV4aXN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlQ29uRmlyc3ROYW1lLTEiKTsKICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCiAgICAgIGlmIChlQ29udGFjdC5sZW5ndGggPD0gMCkgewogICAgICAgIGVDb250YWN0LnB1c2goZUNvbnRhY3RbJ2ZpcnN0TmFtZSddID0gJycsIGVDb250YWN0WydsYXN0TmFtZSddID0gJycsIGVDb250YWN0WydhZGRyZXNzJ10gPSAnJywgZUNvbnRhY3RbJ3Bob25lTnVtYmVyJ10gPSAnJywgZUNvbnRhY3RbJ3N0YXRlJ10gPSAnJywgZUNvbnRhY3RbJ3Bvc3RhbENvZGUnXSA9ICcnLCBlQ29udGFjdFsncmVsYXRpb25zaGlwJ10gPSAnJywgZUNvbnRhY3RbJ2FnZSddID0gJycpOwogICAgICB9CgogICAgICBpZiAoY2hlY2tJREV4aXN0cykgewogICAgICAgIHNlcGFyYXRvciA9ICc8aHIgc3R5bGU9ImJvcmRlci10b3A6IDFweCBzb2xpZCAjMmM5YTJhOyI+JzsKICAgICAgfQoKICAgICAgZWxlbWVudC5pbm5lckhUTUwgKz0gc2VwYXJhdG9yICsgJzxkaXYgY2xhc3M9InJvdyIgaWQ9InJvd0Vjb24nICsgaSArICciPlxuJyArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9ImVDb25GaXJzdE5hbWUtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1sYWJlbCI+Rmlyc3QgTmFtZTwvbGFiZWw+XG4nICsgJyAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVDb25GaXJzdE5hbWUtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1jb250cm9sIG1iLTIiIHBsYWNlaG9sZGVyPSJFbnRlciBGaXJzdCBOYW1lIiBuYW1lPSJlQ29uRmlyc3ROYW1lW10iIHJlcXVpcmVkIHZhbHVlPSInICsgZUNvbnRhY3RbJ2ZpcnN0TmFtZSddICsgJyI+XG4nICsgJyAgPC9kaXY+XG4nICsgJyAgPGRpdiBjbGFzcz0iY29sLWxnLTYiPlxuJyArICcgICAgPGxhYmVsIGZvcj0iZUNvbkxhc3ROYW1lLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPkxhc3QgTmFtZTwvbGFiZWw+XG4nICsgJyAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVDb25MYXN0TmFtZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWNvbnRyb2wgbWItMiIgcGxhY2Vob2xkZXI9IkVudGVyIExhc3QgTmFtZSIgIG5hbWU9ImVDb25MYXN0TmFtZVtdIiByZXF1aXJlZCAgdmFsdWU9IicgKyBlQ29udGFjdFsnbGFzdE5hbWUnXSArICciPlxuJyArICcgIDwvZGl2PlxuJyArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9ImVDb25BZGRyZXNzLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPkFkZHJlc3M8L2xhYmVsPlxuJyArICcgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJlQ29uQWRkcmVzcy0nICsgaSArICciIGNsYXNzPSJmb3JtLWNvbnRyb2wgbWItMiIgcGxhY2Vob2xkZXI9IkVudGVyIEFkZHJlc3MiICBuYW1lPSJlQ29uQWRkcmVzc1tdIiByZXF1aXJlZCAgdmFsdWU9IicgKyBlQ29udGFjdFsnYWRkcmVzcyddICsgJyI+XG4nICsgJyAgPC9kaXY+XG4nICsgJyAgPGRpdiBjbGFzcz0iY29sLWxnLTYiPlxuJyArICcgICAgPGxhYmVsIGZvcj0iZUNvblBob25lLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPlBob25lPC9sYWJlbD5cbicgKyAnICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZUNvblBob25lLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tY29udHJvbCBtYi0yIiBwbGFjZWhvbGRlcj0iRW50ZXIgUGhvbmUiICBuYW1lPSJlQ29uUGhvbmVbXSIgcmVxdWlyZWQgIHZhbHVlPSInICsgZUNvbnRhY3RbJ3Bob25lTnVtYmVyJ10gKyAnIj5cbicgKyAnICA8L2Rpdj5cbicgKyAnICA8ZGl2IGNsYXNzPSJjb2wtbGctNiI+XG4nICsgJyAgICA8bGFiZWwgZm9yPSJlQ29uU3RhdGUtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1sYWJlbCI+U3RhdGU8L2xhYmVsPlxuJyArICcgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJlQ29uU3RhdGUtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1jb250cm9sIG1iLTIiIHBsYWNlaG9sZGVyPSJFbnRlciBTdGF0ZSIgIG5hbWU9ImVDb25TdGF0ZVtdIiAgcmVxdWlyZWQgIHZhbHVlPSInICsgZUNvbnRhY3RbJ3N0YXRlJ10gKyAnIj5cbicgKyAnICA8L2Rpdj5cbicgKyAnICA8ZGl2IGNsYXNzPSJjb2wtbGctNiI+XG4nICsgJyAgICA8bGFiZWwgZm9yPSJlQ29uUG9zdGFsQ29kZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWxhYmVsIj5Qb3N0YWwgQ29kZTwvbGFiZWw+XG4nICsgJyAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVDb25Qb3N0YWxDb2RlLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tY29udHJvbCBtYi0yIiBwbGFjZWhvbGRlcj0iRW50ZXIgUG9zdGFsIENvZGUiICBuYW1lPSJlQ29uUG9zdGFsQ29kZVtdIiByZXF1aXJlZCAgdmFsdWU9IicgKyBlQ29udGFjdFsncG9zdGFsQ29kZSddICsgJyI+XG4nICsgJyAgPC9kaXY+XG4nICsgJyAgPGRpdiBjbGFzcz0iY29sLWxnLTYiPlxuJyArICcgICAgPGxhYmVsIGZvcj0iZUNvblJlbGF0aW9uLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPlJlbGF0aW9uc2hpcDwvbGFiZWw+XG4nICsgJyAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVDb25SZWxhdGlvbi0nICsgaSArICciIGNsYXNzPSJmb3JtLWNvbnRyb2wgbWItMiIgcGxhY2Vob2xkZXI9IkVudGVyIFJlbGF0aW9uc2hpcCIgIG5hbWU9ImVDb25SZWxhdGlvbltdIiAgcmVxdWlyZWQgIHZhbHVlPSInICsgZUNvbnRhY3RbJ3JlbGF0aW9uc2hpcCddICsgJyI+XG4nICsgJyAgPC9kaXY+XG4nICsgJyAgPGRpdiBjbGFzcz0iY29sLWxnLTYiPlxuJyArICcgICAgPGxhYmVsIGZvcj0iZUNvbkFnZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWxhYmVsIj5BZ2U8L2xhYmVsPlxuJyArICcgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJlQ29uQWdlLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tY29udHJvbCBtYi0yIiBwbGFjZWhvbGRlcj0iRW50ZXIgQWdlIiAgbmFtZT0iZUNvbkFnZVtdIiByZXF1aXJlZCAgdmFsdWU9IicgKyBlQ29udGFjdFsnYWdlJ10gKyAnIj5cbicgKyAnICA8L2Rpdj5cbicgKyAnIDxkaXYgY2xhc3M9ImNvbC1tZC02IiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPlxuJyArICcgPC9kaXY+XG4nICsgJyA8ZGl2IGNsYXNzPSJjb2wtbWQtNiIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij5cbicgKyAnICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iJyArIGkgKyAnIiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgcmVtb3ZlSXRlbUVjb24iIHRpdGxlPSJEZWxldGUiPjxpIGNsYXNzPSJyaS1jbG9zZS1jaXJjbGUtbGluZSI+PC9pPjwvYnV0dG9uPlxuJyArICcgPC9kaXY+XG4nICsgJzwvZGl2Pic7CiAgICAgIGRpdi5hcHBlbmQoZWxlbWVudCk7CiAgICB9LAogICAgYWRkQWRkaXRhbWVudHM6IGZ1bmN0aW9uIGFkZEFkZGl0YW1lbnRzKCkgewogICAgICB2YXIgYWRkaXRhbWVudHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICB0aGlzLmFkZGl0YW1lbnRzUXR5ID0gdGhpcy5hZGRpdGFtZW50c1F0eSArIDE7CiAgICAgIHZhciBpID0gdGhpcy5hZGRpdGFtZW50c1F0eTsKICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRBZGRpdGFtZW50cycpOwogICAgICB2YXIgc2VwYXJhdG9yID0gJyc7CiAgICAgIHZhciBjaGVja0lERXhpc3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVDb25GaXJzdE5hbWUtMSIpOwogICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoKICAgICAgaWYgKGFkZGl0YW1lbnRzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgYWRkaXRhbWVudHMucHVzaChhZGRpdGFtZW50c1snZmlyc3ROYW1lJ10gPSAnJywgYWRkaXRhbWVudHNbJ2xhc3ROYW1lJ10gPSAnJywgYWRkaXRhbWVudHNbJ2dlbmRlciddID0gMCwgYWRkaXRhbWVudHNbJ3JldGFsaW9uc2hpcCddID0gMCwgYWRkaXRhbWVudHNbJ2FnZSddID0gJycpOwogICAgICB9CgogICAgICBpZiAoY2hlY2tJREV4aXN0cykgewogICAgICAgIHNlcGFyYXRvciA9ICc8aHIgc3R5bGU9ImJvcmRlci10b3A6IDFweCBzb2xpZCAjMmM5YTJhOyI+JzsKICAgICAgfQoKICAgICAgZWxlbWVudC5pbm5lckhUTUwgKz0gc2VwYXJhdG9yICsgJzxkaXYgY2xhc3M9InJvdyIgaWQ9InJvd0FkZGl0YW1lbnRzJyArIGkgKyAnIj5cbicgKyAnICA8ZGl2IGNsYXNzPSJjb2wtbGctNiI+XG4nICsgJyAgICA8bGFiZWwgZm9yPSJBZGRpRmlyc3ROYW1lLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tbGFiZWwiPkZpcnN0IE5hbWU8L2xhYmVsPlxuJyArICcgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJBZGRpRmlyc3ROYW1lLScgKyBpICsgJyIgY2xhc3M9ImZvcm0tY29udHJvbCBtYi0yIiBwbGFjZWhvbGRlcj0iRW50ZXIgRmlyc3QgTmFtZSIgbmFtZT0iQWRkaUZpcnN0TmFtZVtdIiByZXF1aXJlZCB2YWx1ZT0iJyArIGFkZGl0YW1lbnRzWydmaXJzdE5hbWUnXSArICciPlxuJyArICcgIDwvZGl2PlxuJyArICcgIDxkaXYgY2xhc3M9ImNvbC1sZy02Ij5cbicgKyAnICAgIDxsYWJlbCBmb3I9IkFkZGlMYXN0TmFtZS0nICsgaSArICciIGNsYXNzPSJmb3JtLWxhYmVsIj5MYXN0IE5hbWU8L2xhYmVsPlxuJyArICcgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJBZGRpTGFzdE5hbWUtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1jb250cm9sIG1iLTIiIHBsYWNlaG9sZGVyPSJFbnRlciBMYXN0IE5hbWUiICBuYW1lPSJBZGRpTGFzdE5hbWVbXSIgcmVxdWlyZWQgdmFsdWU9IicgKyBhZGRpdGFtZW50c1snbGFzdE5hbWUnXSArICciPlxuJyArICcgIDwvZGl2PlxuJyArICc8ZGl2IGNsYXNzPSJjb2wtbGctNiI+JyArICcgIDxsYWJlbCBmb3I9IkFkZGlHZW5kZXIiIGNsYXNzPSJmb3JtLWxhYmVsIj5HZW5kZXI8L2xhYmVsPicgKyAnICA8c2VsZWN0IGNsYXNzPSJmb3JtLXNlbGVjdCBtYi0yIiBhcmlhLWxhYmVsPSJHZW5kZXIiIGlkPSJBZGRpR2VuZGVyLScgKyBpICsgJyIgbmFtZT0iQWRkaUdlbmRlcltdIj4nICsgJyAgICA8b3B0aW9uIHZhbHVlPSIwIiA+U2VsZWN0Li4uPC9vcHRpb24+JyArICcgICAgPG9wdGlvbiB2YWx1ZT0iRiI+RmVtYWxlPC9vcHRpb24+JyArICcgICAgPG9wdGlvbiB2YWx1ZT0iTSI+TWFsZTwvb3B0aW9uPicgKyAnPC9zZWxlY3Q+JyArICc8L2Rpdj5cbicgKyAnPGRpdiBjbGFzcz0iY29sLWxnLTYiPlxuJyArICcgIDxsYWJlbCBmb3I9IkFkZGlBZ2UtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1sYWJlbCI+QWdlPC9sYWJlbD5cbicgKyAnICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9IkFkZGlBZ2UtJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1jb250cm9sIG1iLTIiIHBsYWNlaG9sZGVyPSJFbnRlciBBZ2UiICBuYW1lPSJBZGRpQWdlW10iIHJlcXVpcmVkICB2YWx1ZT0iJyArIGFkZGl0YW1lbnRzWydhZ2UnXSArICciPlxuJyArICc8L2Rpdj5cbicgKyAnIDxkaXYgY2xhc3M9ImNvbC1tZC02Ij5cbicgKyAnICA8bGFiZWwgZm9yPSJBZGRpUmVsYXRpb24tJyArIGkgKyAnIiBjbGFzcz0iZm9ybS1sYWJlbCI+UmVsYXRpb25zaGlwPC9sYWJlbD4nICsgJyAgPHNlbGVjdCBjbGFzcz0iZm9ybS1zZWxlY3QgbWItMiIgYXJpYS1sYWJlbD0iQWRkaVJlbGF0aW9uIiBpZD0iQWRkaVJlbGF0aW9uLScgKyBpICsgJyIgbmFtZT0iQWRkaVJlbGF0aW9uW10iICB2YWx1ZT0iJyArIGFkZGl0YW1lbnRzWydyZXRhbGlvbnNoaXAnXSArICciPicgKyAnICAgIDxvcHRpb24gdmFsdWU9IjAiPlJlbGF0aW9uPC9vcHRpb24+JyArICcgICAgPG9wdGlvbiB2YWx1ZT0iQyI+Q2hpbGRyZW48L29wdGlvbj4nICsgJyAgICA8b3B0aW9uIHZhbHVlPSJTIj5TdGVwc29uPC9vcHRpb24+JyArICcgICAgPG9wdGlvbiB2YWx1ZT0iRyI+R3JhbmRzb248L29wdGlvbj4nICsgJzwvc2VsZWN0PicgKyAnIDwvZGl2PlxuJyArICcgPGRpdiBjbGFzcz0iY29sLW1kLTYiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+XG4nICsgJyAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9IicgKyBpICsgJyIgY2xhc3M9ImJ0biBidG4tZGFuZ2VyIHJlbW92ZUl0ZW1BZGRpdGFtZW50cyIgdGl0bGU9IkRlbGV0ZSI+PGkgY2xhc3M9InJpLWNsb3NlLWNpcmNsZS1saW5lIj48L2k+PC9idXR0b24+XG4nICsgJyA8L2Rpdj5cbicgKyAnPC9kaXY+JzsKICAgICAgZGl2LmFwcGVuZChlbGVtZW50KTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkFkZGlHZW5kZXItIiArIGkgKyAiIikudmFsdWUgPSBhZGRpdGFtZW50c1snZ2VuZGVyJ107CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJBZGRpUmVsYXRpb24tIiArIGkgKyAiIikudmFsdWUgPSBhZGRpdGFtZW50c1sncmV0YWxpb25zaGlwJ107CiAgICB9LAogICAgZ2V0QmVuZmljaWFyaWVzOiBmdW5jdGlvbiBnZXRCZW5maWNpYXJpZXMoKSB7CiAgICAgIHZhciBuYW1lVmFsdWVzID0gW107CiAgICAgIHZhciBsYXN0VmFsdWVzID0gW107CiAgICAgIHZhciBwaG9uZVZhbHVlcyA9IFtdOwogICAgICB2YXIgYWRkcmVzc1ZhbHVlcyA9IFtdOwogICAgICB2YXIgc3RhdGVWYWx1ZXMgPSBbXTsKICAgICAgdmFyIHBvc3RhbFZhbHVlcyA9IFtdOwogICAgICB2YXIgcmVsYXRpb25WYWx1ZXMgPSBbXTsKICAgICAgdmFyIGFnZVZhbHVlcyA9IFtdOwogICAgICB2YXIgdmFsdWVzID0gW107CiAgICAgIHZhciBiZW5GaXJzdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdiZW5GaXJzdE5hbWVbXSddIik7CgogICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYmVuRmlyc3ROYW1lLmxlbmd0aDsgX2krKykgewogICAgICAgIG5hbWVWYWx1ZXMucHVzaChiZW5GaXJzdE5hbWVbX2ldLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGJlbkxhc3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT0nYmVuTGFzdE5hbWVbXSddIik7CgogICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBiZW5MYXN0TmFtZS5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgbGFzdFZhbHVlcy5wdXNoKGJlbkxhc3ROYW1lW19pMl0udmFsdWUpOwogICAgICB9CgogICAgICB2YXIgYmVuUGhvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdiZW5QaG9uZVtdJ10iKTsKCiAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IGJlblBob25lLmxlbmd0aDsgX2kzKyspIHsKICAgICAgICBwaG9uZVZhbHVlcy5wdXNoKGJlblBob25lW19pM10udmFsdWUpOwogICAgICB9CgogICAgICB2YXIgYmVuQWRkcmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J2JlbkFkZHJlc3NbXSddIik7CgogICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBiZW5BZGRyZXNzLmxlbmd0aDsgX2k0KyspIHsKICAgICAgICBhZGRyZXNzVmFsdWVzLnB1c2goYmVuQWRkcmVzc1tfaTRdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGJlblN0YXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT0nYmVuU3RhdGVbXSddIik7CgogICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCBiZW5TdGF0ZS5sZW5ndGg7IF9pNSsrKSB7CiAgICAgICAgc3RhdGVWYWx1ZXMucHVzaChiZW5TdGF0ZVtfaTVdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGJlblBvc3RhbENvZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdiZW5Qb3N0YWxDb2RlW10nXSIpOwoKICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgYmVuUG9zdGFsQ29kZS5sZW5ndGg7IF9pNisrKSB7CiAgICAgICAgcG9zdGFsVmFsdWVzLnB1c2goYmVuUG9zdGFsQ29kZVtfaTZdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGJlblJlbGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT0nYmVuUmVsYXRpb25bXSddIik7CgogICAgICBmb3IgKHZhciBfaTcgPSAwOyBfaTcgPCBiZW5SZWxhdGlvbi5sZW5ndGg7IF9pNysrKSB7CiAgICAgICAgcmVsYXRpb25WYWx1ZXMucHVzaChiZW5SZWxhdGlvbltfaTddLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGJlbkFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J2JlbkFnZVtdJ10iKTsKCiAgICAgIGZvciAodmFyIF9pOCA9IDA7IF9pOCA8IGJlbkFnZS5sZW5ndGg7IF9pOCsrKSB7CiAgICAgICAgYWdlVmFsdWVzLnB1c2goYmVuQWdlW19pOF0udmFsdWUpOwogICAgICB9CgogICAgICB2YXIgaTsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCBuYW1lVmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFsdWVzLnB1c2goewogICAgICAgICAgJ2ZpcnN0TmFtZSc6IG5hbWVWYWx1ZXNbaV0sCiAgICAgICAgICAnbGFzdE5hbWUnOiBsYXN0VmFsdWVzW2ldLAogICAgICAgICAgJ3Bob25lTnVtYmVyJzogcGhvbmVWYWx1ZXNbaV0sCiAgICAgICAgICAnYWRkcmVzcyc6IGFkZHJlc3NWYWx1ZXNbaV0sCiAgICAgICAgICAnc3RhdGUnOiBzdGF0ZVZhbHVlc1tpXSwKICAgICAgICAgICdwb3N0YWxDb2RlJzogcG9zdGFsVmFsdWVzW2ldLAogICAgICAgICAgJ3JlbGF0aW9uc2hpcCc6IHJlbGF0aW9uVmFsdWVzW2ldLAogICAgICAgICAgJ2FnZSc6IGFnZVZhbHVlc1tpXQogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWVzOwogICAgfSwKICAgIGdldEVtZXJnZW5jeTogZnVuY3Rpb24gZ2V0RW1lcmdlbmN5KCkgewogICAgICB2YXIgbmFtZVZhbHVlcyA9IFtdOwogICAgICB2YXIgbGFzdFZhbHVlcyA9IFtdOwogICAgICB2YXIgcGhvbmVWYWx1ZXMgPSBbXTsKICAgICAgdmFyIGFkZHJlc3NWYWx1ZXMgPSBbXTsKICAgICAgdmFyIHN0YXRlVmFsdWVzID0gW107CiAgICAgIHZhciBwb3N0YWxWYWx1ZXMgPSBbXTsKICAgICAgdmFyIHJlbGF0aW9uVmFsdWVzID0gW107CiAgICAgIHZhciBhZ2VWYWx1ZXMgPSBbXTsKICAgICAgdmFyIHZhbHVlcyA9IFtdOwogICAgICB2YXIgZUNvbkZpcnN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J2VDb25GaXJzdE5hbWVbXSddIik7CgogICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCBlQ29uRmlyc3ROYW1lLmxlbmd0aDsgX2k5KyspIHsKICAgICAgICBuYW1lVmFsdWVzLnB1c2goZUNvbkZpcnN0TmFtZVtfaTldLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGVDb25MYXN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J2VDb25MYXN0TmFtZVtdJ10iKTsKCiAgICAgIGZvciAodmFyIF9pMTAgPSAwOyBfaTEwIDwgZUNvbkxhc3ROYW1lLmxlbmd0aDsgX2kxMCsrKSB7CiAgICAgICAgbGFzdFZhbHVlcy5wdXNoKGVDb25MYXN0TmFtZVtfaTEwXS52YWx1ZSk7CiAgICAgIH0KCiAgICAgIHZhciBlQ29uUGhvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdlQ29uUGhvbmVbXSddIik7CgogICAgICBmb3IgKHZhciBfaTExID0gMDsgX2kxMSA8IGVDb25QaG9uZS5sZW5ndGg7IF9pMTErKykgewogICAgICAgIHBob25lVmFsdWVzLnB1c2goZUNvblBob25lW19pMTFdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGVDb25BZGRyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT0nZUNvbkFkZHJlc3NbXSddIik7CgogICAgICBmb3IgKHZhciBfaTEyID0gMDsgX2kxMiA8IGVDb25BZGRyZXNzLmxlbmd0aDsgX2kxMisrKSB7CiAgICAgICAgYWRkcmVzc1ZhbHVlcy5wdXNoKGVDb25BZGRyZXNzW19pMTJdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGVDb25TdGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J2VDb25TdGF0ZVtdJ10iKTsKCiAgICAgIGZvciAodmFyIF9pMTMgPSAwOyBfaTEzIDwgZUNvblN0YXRlLmxlbmd0aDsgX2kxMysrKSB7CiAgICAgICAgc3RhdGVWYWx1ZXMucHVzaChlQ29uU3RhdGVbX2kxM10udmFsdWUpOwogICAgICB9CgogICAgICB2YXIgZUNvblBvc3RhbENvZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdlQ29uUG9zdGFsQ29kZVtdJ10iKTsKCiAgICAgIGZvciAodmFyIF9pMTQgPSAwOyBfaTE0IDwgZUNvblBvc3RhbENvZGUubGVuZ3RoOyBfaTE0KyspIHsKICAgICAgICBwb3N0YWxWYWx1ZXMucHVzaChlQ29uUG9zdGFsQ29kZVtfaTE0XS52YWx1ZSk7CiAgICAgIH0KCiAgICAgIHZhciBlQ29uUmVsYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdlQ29uUmVsYXRpb25bXSddIik7CgogICAgICBmb3IgKHZhciBfaTE1ID0gMDsgX2kxNSA8IGVDb25SZWxhdGlvbi5sZW5ndGg7IF9pMTUrKykgewogICAgICAgIHJlbGF0aW9uVmFsdWVzLnB1c2goZUNvblJlbGF0aW9uW19pMTVdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGVDb25BZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdlQ29uQWdlW10nXSIpOwoKICAgICAgZm9yICh2YXIgX2kxNiA9IDA7IF9pMTYgPCBlQ29uQWdlLmxlbmd0aDsgX2kxNisrKSB7CiAgICAgICAgYWdlVmFsdWVzLnB1c2goZUNvbkFnZVtfaTE2XS52YWx1ZSk7CiAgICAgIH0KCiAgICAgIHZhciBpOwoKICAgICAgZm9yIChpID0gMDsgaSA8IG5hbWVWYWx1ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YWx1ZXMucHVzaCh7CiAgICAgICAgICAnZmlyc3ROYW1lJzogbmFtZVZhbHVlc1tpXSwKICAgICAgICAgICdsYXN0TmFtZSc6IGxhc3RWYWx1ZXNbaV0sCiAgICAgICAgICAncGhvbmVOdW1iZXInOiBwaG9uZVZhbHVlc1tpXSwKICAgICAgICAgICdhZGRyZXNzJzogYWRkcmVzc1ZhbHVlc1tpXSwKICAgICAgICAgICdzdGF0ZSc6IHN0YXRlVmFsdWVzW2ldLAogICAgICAgICAgJ3Bvc3RhbENvZGUnOiBwb3N0YWxWYWx1ZXNbaV0sCiAgICAgICAgICAncmVsYXRpb25zaGlwJzogcmVsYXRpb25WYWx1ZXNbaV0sCiAgICAgICAgICAnYWdlJzogYWdlVmFsdWVzW2ldCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZXM7CiAgICB9LAogICAgZ2V0QWRkZWRDaGlsZHM6IGZ1bmN0aW9uIGdldEFkZGVkQ2hpbGRzKCkgewogICAgICB2YXIgbmFtZVZhbHVlcyA9IFtdOwogICAgICB2YXIgbGFzdFZhbHVlcyA9IFtdOwogICAgICB2YXIgZ2VuZGVyVmFsdWVzID0gW107CiAgICAgIHZhciBhZ2VWYWx1ZXMgPSBbXTsKICAgICAgdmFyIHJlbGF0aW9uVmFsdWVzID0gW107CiAgICAgIHZhciB2YWx1ZXMgPSBbXTsKICAgICAgdmFyIGVDb25GaXJzdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdBZGRpRmlyc3ROYW1lW10nXSIpOwoKICAgICAgZm9yICh2YXIgX2kxNyA9IDA7IF9pMTcgPCBlQ29uRmlyc3ROYW1lLmxlbmd0aDsgX2kxNysrKSB7CiAgICAgICAgbmFtZVZhbHVlcy5wdXNoKGVDb25GaXJzdE5hbWVbX2kxN10udmFsdWUpOwogICAgICB9CgogICAgICB2YXIgZUNvbkxhc3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT0nQWRkaUxhc3ROYW1lW10nXSIpOwoKICAgICAgZm9yICh2YXIgX2kxOCA9IDA7IF9pMTggPCBlQ29uTGFzdE5hbWUubGVuZ3RoOyBfaTE4KyspIHsKICAgICAgICBsYXN0VmFsdWVzLnB1c2goZUNvbkxhc3ROYW1lW19pMThdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIEFkZGlHZW5kZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJzZWxlY3RbbmFtZT0nQWRkaUdlbmRlcltdJ10iKTsKCiAgICAgIGZvciAodmFyIF9pMTkgPSAwOyBfaTE5IDwgQWRkaUdlbmRlci5sZW5ndGg7IF9pMTkrKykgewogICAgICAgIGdlbmRlclZhbHVlcy5wdXNoKEFkZGlHZW5kZXJbX2kxOV0udmFsdWUpOwogICAgICB9CgogICAgICB2YXIgQWRkaUFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J0FkZGlBZ2VbXSddIik7CgogICAgICBmb3IgKHZhciBfaTIwID0gMDsgX2kyMCA8IEFkZGlBZ2UubGVuZ3RoOyBfaTIwKyspIHsKICAgICAgICBhZ2VWYWx1ZXMucHVzaChBZGRpQWdlW19pMjBdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIEFkZGlSZWxhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNlbGVjdFtuYW1lPSdBZGRpUmVsYXRpb25bXSddIik7CgogICAgICBmb3IgKHZhciBfaTIxID0gMDsgX2kyMSA8IEFkZGlSZWxhdGlvbi5sZW5ndGg7IF9pMjErKykgewogICAgICAgIHJlbGF0aW9uVmFsdWVzLnB1c2goQWRkaVJlbGF0aW9uW19pMjFdLnZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGk7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbmFtZVZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhbHVlcy5wdXNoKHsKICAgICAgICAgICdmaXJzdE5hbWUnOiBuYW1lVmFsdWVzW2ldLAogICAgICAgICAgJ2xhc3ROYW1lJzogbGFzdFZhbHVlc1tpXSwKICAgICAgICAgICdnZW5kZXInOiBnZW5kZXJWYWx1ZXNbaV0sCiAgICAgICAgICAnYWdlJzogYWdlVmFsdWVzW2ldLAogICAgICAgICAgJ3JldGFsaW9uc2hpcCc6IHJlbGF0aW9uVmFsdWVzW2ldCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZXM7CiAgICB9LAogICAgc2V0Q2xpZW50RGF0YTogZnVuY3Rpb24gc2V0Q2xpZW50RGF0YShjbGllbnRJbmZvKSB7CiAgICAgIHRoaXMuY2xpZW50RGF0YS5lbWFpbCA9IGNsaWVudEluZm8uZW1haWw7CiAgICAgIHRoaXMuY2xpZW50RGF0YS5maXJzdE5hbWUgPSBjbGllbnRJbmZvLmZpcnN0TmFtZTsKICAgICAgdGhpcy5jbGllbnREYXRhLmxhc3ROYW1lID0gY2xpZW50SW5mby5sYXN0TmFtZTsKICAgICAgdGhpcy5jbGllbnREYXRhLmxhbmd1YWdlID0gY2xpZW50SW5mby5sYW5ndWFnZTsKICAgICAgdGhpcy5jbGllbnREYXRhLnN0YXR1cyA9IGNsaWVudEluZm8uc3RhdHVzOwogICAgICB0aGlzLmNsaWVudERhdGEucGhvbmVOdW1iZXIgPSBjbGllbnRJbmZvLnBob25lTnVtYmVyOwogICAgICB0aGlzLmNsaWVudERhdGEuZ2VuZGVyID0gY2xpZW50SW5mby5nZW5kZXI7CiAgICAgIHRoaXMuY2xpZW50RGF0YS5hZ2UgPSBjbGllbnRJbmZvLmFnZTsKICAgICAgdGhpcy5jbGllbnREYXRhLnR5cGUgPSBjbGllbnRJbmZvLnR5cGUgIT09ICcnID8gY2xpZW50SW5mby50eXBlIDogY2xpZW50SW5mby5sZWFkVHlwZTsKICAgICAgdGhpcy5jbGllbnREYXRhLmNpdHkgPSBjbGllbnRJbmZvLmNpdHk7CiAgICAgIHRoaXMuY2xpZW50RGF0YS5kZXBhcnRtZW50SUQgPSBjbGllbnRJbmZvLmRlcGFydG1lbnRJRDsKICAgICAgdGhpcy5jbGllbnREYXRhLmxlYWRUeXBlID0gY2xpZW50SW5mby5sZWFkVHlwZTsKICAgICAgdGhpcy5jbGllbnREYXRhLmJpcnRoZGF5ID0gdGhpcy5mb3JtYXREYXRlKGNsaWVudEluZm8uZGF0ZU9mQmlydGgsICdERCBNTU0sIFlZWVknKTsKICAgICAgdGhpcy5jbGllbnREYXRhLmludGVydmlldyA9IHRoaXMuZm9ybWF0RGF0ZShjbGllbnRJbmZvLmludGVydmlld0RhdGUsICdNTU1NIEQsIFlZWVkgSDptbSBBJyk7CiAgICAgIHRoaXMuY2xpZW50RGF0YS5hZGRyZXNzID0gY2xpZW50SW5mby5hZGRyZXNzOwogICAgICB0aGlzLmNsaWVudERhdGEuc3RhdGUgPSBjbGllbnRJbmZvLnN0YXRlOwogICAgICB0aGlzLmNsaWVudERhdGEuY291bnRyeSA9IGNsaWVudEluZm8uY291bnRyeTsKICAgICAgdGhpcy5jbGllbnREYXRhLnBvc3RhbENvZGUgPSBjbGllbnRJbmZvLnBvc3RhbENvZGU7CiAgICAgIHRoaXMuY2xpZW50RGF0YS5hZ2VudE51bWJlciA9IGNsaWVudEluZm8uYWdlbnROdW1iZXI7CiAgICAgIHRoaXMuY2xpZW50RGF0YS5jcmVhdGVkQnkgPSBjbGllbnRJbmZvLmNyZWF0ZWRCeTsKICAgICAgdGhpcy5jbGllbnREYXRhLmluc3VyYW5jZUxpY2Vuc2UgPSBjbGllbnRJbmZvLmlzTGljZW5zZWQ7CiAgICB9LAogICAgZ2V0Tm90ZXM6IGZ1bmN0aW9uIGdldE5vdGVzKCkgewogICAgICB2YXIgX2FyZ3VtZW50czIgPSBhcmd1bWVudHMsCiAgICAgICAgICBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE2KCkgewogICAgICAgIHZhciBpZCwgbmFtZSwgZGF0YSwgdXJsOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTYkKF9jb250ZXh0MTYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWQgPSBfYXJndW1lbnRzMi5sZW5ndGggPiAwICYmIF9hcmd1bWVudHMyWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMlswXSA6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RlZFVzZXInKTsKICAgICAgICAgICAgICAgIG5hbWUgPSBfYXJndW1lbnRzMi5sZW5ndGggPiAxID8gX2FyZ3VtZW50czJbMV0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLAogICAgICAgICAgICAgICAgICBhZ2VudElEOiBpZCwKICAgICAgICAgICAgICAgICAgY2xpZW50SUQ6IGlkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkVXNlck5hbWUnLCBuYW1lKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZFVzZXInLCBpZCk7CiAgICAgICAgICAgICAgICB1cmwgPSAnJzsKICAgICAgICAgICAgICAgIHVybCA9ICcvYXBpL2NsaWVudC9nZXRDbGllbnROb3Rlcyc7CiAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczkubm90ZXNEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIk5vdGVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFByb3NwZWN0U3RhdHVzOiBmdW5jdGlvbiBnZXRQcm9zcGVjdFN0YXR1cyhpZCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNyQoX2NvbnRleHQxNykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWRVc2VyJywgaWQpOwogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgc2VhcmNoVmFsdWVzOiBfdGhpczEwLmRhdGEuc2VhcmNoVmFsdWVzLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLAogICAgICAgICAgICAgICAgICBpc1Byb3NwZWN0OiAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2NsaWVudC9jbGllbnRTdGF0dXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczEwLnByb3NwZWN0U3RhdHVzTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJTdGF0dXMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbW92ZUNsaWVudDogZnVuY3Rpb24gbW92ZUNsaWVudCgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KCkgewogICAgICAgIHZhciBjbGllbnQsIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOSQoX2NvbnRleHQxOSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjbGllbnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWRVc2VyJyk7CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICBzZWFyY2hWYWx1ZXM6IF90aGlzMTEuZGF0YS5zZWFyY2hWYWx1ZXMsCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIGNsaWVudDogY2xpZW50LAogICAgICAgICAgICAgICAgICBzdGF0dXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb3ZlU3RhdHVzJykudmFsdWUsCiAgICAgICAgICAgICAgICAgIGlzUHJvc3BlY3Q6IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnB1dCgnL2FwaS9jbGllbnQvbW92ZUNsaWVudCcsIGRhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE4KHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQxOCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VNb3ZlJykuY2xpY2soKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczExLnVwZGF0ZUNsaWVudExpc3QoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiWW91ciBDbGllbnQgd2FzIG1vdmVkIHRvIFByb3NwZWN0IExpc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiA1MDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTgpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94OCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJTdGF0dXMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZmlsdGVyU3RhdHVzOiBmdW5jdGlvbiBmaWx0ZXJTdGF0dXMoc3RhdHVzKSB7CiAgICAgIHZhciBzdGF0dXNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGF0dXMpOwogICAgICBzdGF0dXNCdXR0b24uY2xpY2soKTsKICAgIH0sCiAgICBkZWxldGVDbGllbnQ6IGZ1bmN0aW9uIGRlbGV0ZUNsaWVudChJRCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICB2YXIgc3dhbFdpdGhCb290c3RyYXBCdXR0b25zID0gU3dhbC5taXhpbih7CiAgICAgICAgY3VzdG9tQ2xhc3M6IHsKICAgICAgICAgIGNvbmZpcm1CdXR0b246ICJidG4gYnRuLWRhbmdlciBtbC0yIiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbjogImJ0biBidG4tc3VjY2VzcyIKICAgICAgICB9LAogICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZQogICAgICB9KTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkVXNlcicsIElEKTsKICAgICAgc3dhbFdpdGhCb290c3RyYXBCdXR0b25zLmZpcmUoewogICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBkZWxldGUgaXQhIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAiTm8sIGNhbmNlbCEiLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksCiAgICAgICAgICAgIHVzZXJOYW1lOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmlyc3ROYW1lJykgKyAnICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdG5hbWUnKSwKICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgYWdlbnRJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGVjdGVkVXNlcicpCiAgICAgICAgICB9OwogICAgICAgICAgYXhpb3MucHV0KCcvYXBpL2NsaWVudC9kZWxldGUnLCBkYXRhKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX3JlZjkgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMChyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjAkKF9jb250ZXh0MjApIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMC5wcmV2ID0gX2NvbnRleHQyMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIwLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIwLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIudXBkYXRlQ2xpZW50TGlzdCgpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIwLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN3YWxXaXRoQm9vdHN0cmFwQnV0dG9ucy5maXJlKCJEZWxldGVkISIsICJDbGllbnQgaGFzIGJlZW4gZGVsZXRlZC4iLCAic3VjY2VzcyIpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUyMCk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWY5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9KCkpLmNhdGNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX3JlZjEwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjEoZXJyb3IpIHsKICAgICAgICAgICAgICB2YXIgbGlzdCwgcHJvcGVydHk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMSQoX2NvbnRleHQyMSkgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIxLnByZXYgPSBfY29udGV4dDIxLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGxpc3QgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5lcnJvcnMucHVzaCgiIi5jb25jYXQocHJvcGVydHksICI6ICIpLmNvbmNhdChlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdCArPSAnXG4nICsgJzxiPicgKyBlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSArICc8L2I+JzsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIxLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlIGNoZWNrIHRoZSBmb2xsb3dpbmc6ICIgKyBsaXN0LAogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogImJ0biBidG4taW5mbyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUyMSk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxMCkgewogICAgICAgICAgICAgIHJldHVybiBfcmVmMTAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0oKSk7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAvKiBSZWFkIG1vcmUgYWJvdXQgaGFuZGxpbmcgZGlzbWlzc2FscyBiZWxvdyAqLwogICAgICAgIHJlc3VsdC5kaXNtaXNzID09PSBTd2FsLkRpc21pc3NSZWFzb24uY2FuY2VsKSB7CiAgICAgICAgICBzd2FsV2l0aEJvb3RzdHJhcEJ1dHRvbnMuZmlyZSgiQ2FuY2VsbGVkIiwgIkNsaWVudCBpcyBpbiBhIHNhZmUgcGxhY2UgOikiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUZvY3VzOiBmdW5jdGlvbiBoYW5kbGVGb2N1cyhlKSB7CiAgICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZSgiYXV0b2NvbXBsZXRlIiwgIm5vcGUiKTsKICAgIH0sCiAgICBnZXRNYXBzTGluazogZnVuY3Rpb24gZ2V0TWFwc0xpbmsoKSB7CiAgICAgIHZhciBsaW5rID0gJ2h0dHBzOi8vbWFwcy5nb29nbGUuY29tLz9xPSc7CiAgICAgIHZhciBjbGllbnREYXRhID0gdGhpcy5jbGllbnREYXRhOwoKICAgICAgaWYgKGNsaWVudERhdGEuYWRkcmVzcy5sZW5ndGggPiAwKSB7CiAgICAgICAgbGluayArPSAnKycgKyB0aGlzLmNsaWVudERhdGEuYWRkcmVzczsKICAgICAgfQoKICAgICAgaWYgKGNsaWVudERhdGEucG9zdGFsQ29kZS5sZW5ndGggPiAwKSB7CiAgICAgICAgbGluayArPSAnKycgKyBjbGllbnREYXRhLnBvc3RhbENvZGU7CiAgICAgIH0KCiAgICAgIGlmIChjbGllbnREYXRhLmNpdHkubGVuZ3RoID4gMCkgewogICAgICAgIGxpbmsgKz0gJysnICsgY2xpZW50RGF0YS5jaXR5OwogICAgICB9CgogICAgICBpZiAoY2xpZW50RGF0YS5zdGF0ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgbGluayArPSAnKycgKyBjbGllbnREYXRhLnN0YXRlOwogICAgICB9CgogICAgICBpZiAobGluayAhPT0gJ2h0dHBzOi8vbWFwcy5nb29nbGUuY29tLz9xPScpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ01hcHNMaW5rIikuaHJlZiA9IGxpbms7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdNYXBzTGluayIpLmhyZWYgPSAnIyc7CiAgICAgIH0KICAgIH0sCiAgICBwYXJzZUZpbGU6IGZ1bmN0aW9uIHBhcnNlRmlsZSgpIHsKICAgICAgdmFyIGFsbG93ZWRFeHRlbnNpb25zID0gL1wuKGNzdnxwZGZ8anBnfHBuZ3xqcGVnKSQvaTsKCiAgICAgIGlmIChhbGxvd2VkRXh0ZW5zaW9ucy5leGVjKHRoaXMuZmlsZS5uYW1lKSkgewogICAgICAgIGNvbnNvbGUubG9nKCd5ZXMnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJGaWxlIGV4dGVuc2lvbiBub3Qgc3VwcG9ydGVkISIsCiAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlLAogICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VUeXBlOiBmdW5jdGlvbiBjaGFuZ2VUeXBlKCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjIoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMiQoX2NvbnRleHQyMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIyLnByZXYgPSBfY29udGV4dDIyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLAogICAgICAgICAgICAgICAgICBpc1Byb3NwZWN0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXNQcm9zcGVjdCcpLnZhbHVlLAogICAgICAgICAgICAgICAgICBkZWxldGVkOiAwCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQyMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2NsaWVudC9jbGllbnRTdGF0dXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczEzLnN0YXR1c0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU3RhdHVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY2xpZW50L2NsaWVudFR5cGVzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMy50eXBlTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJTdGF0dXMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdXBsb2FkRmlsZTogZnVuY3Rpb24gdXBsb2FkRmlsZSgpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI1KCkgewogICAgICAgIHZhciBkYXRhLCBsaXN0LCBpOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjUkKF9jb250ZXh0MjUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNS5wcmV2ID0gX2NvbnRleHQyNS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMxNC5lcnJvcnMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZExhbmd1YWdlJykudmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTQuZXJyb3JzLnB1c2goJ0xhbmd1YWdlIGlzIHJlcXVpcmVkLicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBsb2FkU3RhdHVzJykudmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTQuZXJyb3JzLnB1c2goJ1N0YXR1cyBpcyByZXF1aXJlZC4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZFR5cGUnKS52YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxNC5lcnJvcnMucHVzaCgnU291cmNlIGlzIHJlcXVpcmVkLicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczE0LmNvbnRlbnQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTQuZXJyb3JzLnB1c2goJ1BsZWFzZSwgdXBsb2FkIGFuZCBwcm9jZXNzIHlvdXIgLmNzdiBmaWxlLicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMTQuZXJyb3JzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksCiAgICAgICAgICAgICAgICAgIGxpc3RPZkRhdGE6IF90aGlzMTQuY29udGVudCwKICAgICAgICAgICAgICAgICAgdXBsb2FkVG86IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmaXJzdE5hbWUnKSArICcgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYXN0bmFtZScpICsgJyB8ICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgICAgICAgaXNQcm9zcGVjdDogMCwKICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRMYW5ndWFnZScpLnZhbHVlLAogICAgICAgICAgICAgICAgICBzdGF0dXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRTdGF0dXMnKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgc291cmNlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBsb2FkVHlwZScpLnZhbHVlLAogICAgICAgICAgICAgICAgICBsaXN0VHlwZTogMQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9jbGllbnQvdXBsb2FkTGlzdCcsIGRhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMyhyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjMkKF9jb250ZXh0MjMpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnVXBsb2FkZWQgc3VjY2Vzc2Z1bGx5IScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjMpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjExLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpLmNhdGNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjEyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjQoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCwgcHJvcGVydHk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNCQoX2NvbnRleHQyNCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI0LnByZXYgPSBfY29udGV4dDI0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5lcnJvcnMucHVzaCgiIi5jb25jYXQocHJvcGVydHksICI6ICIpLmNvbmNhdChlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdCArPSAnXG4nICsgJzxiPicgKyBlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSArICc8L2I+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlIGNoZWNrIHRoZSBmb2xsb3dpbmc6ICIgKyBsaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogImJ0biBidG4taW5mbyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0LmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyNCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxMikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBsaXN0ID0gJyc7CgogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IF90aGlzMTQuZXJyb3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QgKz0gJ1xuJyArICc8Yj4nICsgX3RoaXMxNC5lcnJvcnNbaV0gKyAnPC9iPic7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJQbGVhc2UgY29tcGxldGUgdGhlIGZvcm0hICIgKyBsaXN0LAogICAgICAgICAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogImJ0biBidG4taW5mbyIsCiAgICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTI1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY29tcGFyZTogZnVuY3Rpb24gY29tcGFyZShvMSwgbzIpIHsKICAgICAgZm9yICh2YXIgcCBpbiBvMSkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgICBpZiAobzEuaGFzT3duUHJvcGVydHkocCkpIHsKICAgICAgICAgIGlmIChvMVtwXSAhPT0gbzJbcF0pIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgX3AgaW4gbzIpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICAgICAgaWYgKG8yLmhhc093blByb3BlcnR5KF9wKSkgewogICAgICAgICAgaWYgKG8xW19wXSAhPT0gbzJbX3BdKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24gZGVsZXRlUmVjb3JkKGVsZSkgewogICAgICBlbGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmUoKTsKICAgIH0sCiAgICB2aWV3VXNlckdyb3VwOiBmdW5jdGlvbiB2aWV3VXNlckdyb3VwKHJlcXVlc3QpIHsKICAgICAgdmFyIGN1cnJlbnRSb2xlID0gand0X2RlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JykpOwogICAgICByZXR1cm4gY3VycmVudFJvbGUudXNlckdyb3VwLmluY2x1ZGVzKHJlcXVlc3QpOwogICAgfSwKICAgIGdldFNNUzogZnVuY3Rpb24gZ2V0U01TKCkgewogICAgICB2YXIgX2FyZ3VtZW50czMgPSBhcmd1bWVudHMsCiAgICAgICAgICBfdGhpczE1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNigpIHsKICAgICAgICB2YXIgaWQsIG5hbWUsIGRhdGEsIHVybDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI2JChfY29udGV4dDI2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjYucHJldiA9IF9jb250ZXh0MjYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlkID0gX2FyZ3VtZW50czMubGVuZ3RoID4gMCAmJiBfYXJndW1lbnRzM1swXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czNbMF0gOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWRVc2VyJyk7CiAgICAgICAgICAgICAgICBuYW1lID0gX2FyZ3VtZW50czMubGVuZ3RoID4gMSA/IF9hcmd1bWVudHMzWzFdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICAgICAgICAgICAgYWdlbnRJRDogaWQsCiAgICAgICAgICAgICAgICAgIGNsaWVudElEOiBpZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZFVzZXJOYW1lJywgbmFtZSk7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWRVc2VyJywgaWQpOwogICAgICAgICAgICAgICAgdXJsID0gJyc7CiAgICAgICAgICAgICAgICB1cmwgPSAnL2FwaS9jbGllbnQvZ2V0U01TQ29udmVyc2F0aW9uJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCh1cmwsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTUubWVzc2FnZXNEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIk5vdGVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNlYXJjaEFnZW50czogZnVuY3Rpb24gc2VhcmNoQWdlbnRzKCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjkoKSB7CiAgICAgICAgdmFyIHR5cGVBaGVhZCwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI5JChfY29udGV4dDI5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjkucHJldiA9IF9jb250ZXh0MjkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHR5cGVBaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eXBlYWhlYWRfaWQnKTsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHNlYXJjaFZhbHVlOiB0eXBlQWhlYWQgIT0gbnVsbCAmJiB0eXBlb2YgdHlwZUFoZWFkICE9ICd1bmRlZmluZWQnID8gdHlwZUFoZWFkLnZhbHVlIDogW10sCiAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogOQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZiAoIShkYXRhWydzZWFyY2hWYWx1ZSddLmxlbmd0aCA+IDMpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS91c2VyRmluZGVyJywgZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYxMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI3KHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNyQoX2NvbnRleHQyNykgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE2Lml0ZW1zU2VhcmNoID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjcpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjEzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpLmNhdGNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjE0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjgoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCwgcHJvcGVydHk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOCQoX2NvbnRleHQyOCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDI4LnByZXYgPSBfY29udGV4dDI4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNi5lcnJvcnMucHVzaCgiIi5jb25jYXQocHJvcGVydHksICI6ICIpLmNvbmNhdChlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdCArPSAnXG4nICsgJzxiPicgKyBlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XSArICc8L2I+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlIGNoZWNrIHRoZSBmb2xsb3dpbmc6ICIgKyBsaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogImJ0biBidG4taW5mbyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE2LmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyOCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxNCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTI5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdmlld1Blcm1pc3Npb246IGZ1bmN0aW9uIHZpZXdQZXJtaXNzaW9uKHJlcXVlc3QpIHsKICAgICAgdmFyIGN1cnJlbnRSb2xlID0gand0X2RlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JykpOwogICAgICByZXR1cm4gY3VycmVudFJvbGUudnVlVmlld3MuaW5jbHVkZXMocmVxdWVzdCk7CiAgICB9LAogICAgZ2V0RmlsZXM6IGZ1bmN0aW9uIGdldEZpbGVzKGlkKSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMCgpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMwJChfY29udGV4dDMwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzAucHJldiA9IF9jb250ZXh0MzAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIElEOiBpZCwKICAgICAgICAgICAgICAgICAgaXNDbGllbnQ6IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDMwLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY29tbS9nZXRGaWxlcycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTcuZmlsZUxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU29tZXRoaW5nIHdhcyB3cm9uZywgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMwKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0RWNvbnRhY3RzOiBmdW5jdGlvbiBnZXRFY29udGFjdHMoKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMSgpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMxJChfY29udGV4dDMxKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzEucHJldiA9IF9jb250ZXh0MzEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIGlzUHJvc3BlY3Q6IDAsCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIGNsaWVudElEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWRVc2VyJyksCiAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDMxLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY2xpZW50L2dldGVjb250YWN0cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTguZUNvbnRhY3RsaXN0ID0gW107CiAgICAgICAgICAgICAgICAgIF90aGlzMTguZUNvbnRhY3RsaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkRlcGFydG1lbnRzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMxLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGRvd25sb2FkRmlsZTogZnVuY3Rpb24gZG93bmxvYWRGaWxlKHVybCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzIoKSB7CiAgICAgICAgdmFyIGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMiQoX2NvbnRleHQzMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMyLnByZXYgPSBfY29udGV4dDMyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IHVybC5zcGxpdCgnLycpLnBvcCgpOwogICAgICAgICAgICAgICAgYS5jbGljaygpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5pbWFnZSA9IG51bGw7CiAgICAgIHRoaXMucHJldmlldyA9IG51bGw7CiAgICAgIHRoaXMuaW1hZ2VfbGlzdCA9IFtdOwogICAgICB0aGlzLnByZXZpZXdfbGlzdCA9IFtdOwogICAgfSwKICAgIG9uQWRkRmlsZTogZnVuY3Rpb24gb25BZGRGaWxlKGV2ZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKCdvbkFkZDogJywgZXZlbnQuYWZmZWN0ZWRGaWxlcyk7CiAgICAgIHRoaXMudXBsb2FkRmlsZXMgPSBldmVudC5uZXdTdGF0ZTsKICAgIH0sCiAgICBvblJlbW92ZUZpbGU6IGZ1bmN0aW9uIG9uUmVtb3ZlRmlsZShldmVudCkgewogICAgICBjb25zb2xlLmxvZygnb25SZW1vdmU6ICcsIGV2ZW50LmFmZmVjdGVkRmlsZXMpOwogICAgICB0aGlzLnVwbG9hZEZpbGVzID0gZXZlbnQubmV3U3RhdGU7CiAgICB9LAogICAgcmVmcmVzaENvbnRhY3RzOiBmdW5jdGlvbiByZWZyZXNoQ29udGFjdHMoKSB7CiAgICAgIHRoaXMuZ2V0RWNvbnRhY3RzKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMTkgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMygpIHsKICAgICAgdmFyIGZpZWxkLCB1cmwsIHF1ZXJ5U3RyaW5nLCB1cmxQYXJhbXMsIHN0YXR1cywgdHlwZUFoZWFkLCBkYXRhLCBjaGVja0FsbCwgYWRkRXZlbnQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzMkKF9jb250ZXh0MzMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMzLnByZXYgPSBfY29udGV4dDMzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFkZEV2ZW50ID0gZnVuY3Rpb24gX2FkZEV2ZW50KHBhcmVudCwgZXZ0LCBzZWxlY3RvciwgaGFuZGxlcikgewogICAgICAgICAgICAgICAgcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKHNlbGVjdG9yICsgJywgJyArIHNlbGVjdG9yICsgJyAqJykpIHsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmFwcGx5KGV2ZW50LnRhcmdldC5jbG9zZXN0KHNlbGVjdG9yKSwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGZpZWxkID0gJ24nOwogICAgICAgICAgICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDsKICAgICAgICAgICAgICB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTsKICAgICAgICAgICAgICBzdGF0dXMgPSB1cmxQYXJhbXMuZ2V0KGZpZWxkKTsKICAgICAgICAgICAgICB0eXBlQWhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHlwZWFoZWFkX2lkJyk7CiAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICBzZWFyY2hWYWx1ZXM6IF90aGlzMTkuZGF0YS5zZWFyY2hWYWx1ZXMsCiAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICAgICAgICAgIGlzUHJvc3BlY3Q6IDAsCiAgICAgICAgICAgICAgICBkZWxldGVkOiAwLAogICAgICAgICAgICAgICAgYWdlbnRTZWFyY2g6IHR5cGVBaGVhZCAhPSBudWxsICYmIHR5cGVvZiB0eXBlQWhlYWQgIT0gJ3VuZGVmaW5lZCcgPyB0eXBlQWhlYWQudmFsdWUgOiBbXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvbGlzdERlcGFydG1lbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzMTkuZGVwYXJ0bWVudExpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczE5LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiRGVwYXJ0bWVudHMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY2xpZW50L2NsaWVudFN0YXR1cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczE5LnN0YXR1c0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczE5LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU3RhdHVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0MzMubmV4dCA9IDE0OwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2NsaWVudC9jbGllbnRUeXBlcycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczE5LnR5cGVMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxOS4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIlN0YXR1cyBjb3VsZCBub3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBpZiAoISh1cmwuaW5kZXhPZignPycgKyBmaWVsZCArICc9JykgIT09IC0xKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1cykuY2xpY2soKTsKICAgICAgICAgICAgICBfY29udGV4dDMzLm5leHQgPSAyMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY2xpZW50L2xpc3RDbGllbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzMTkubGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpczE5LnBhZ2UgPSAxOwoKICAgICAgICAgICAgICAgIF90aGlzMTkuc2V0UGFnZXMoKTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxOS4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICB9IC8vIGZvciAoY29uc3QgcHJvcGVydHkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAvLyB0aGlzLmVycm9ycy5wdXNoKGAke3Byb3BlcnR5fTogJHtlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XX1gKQogICAgICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTkuZXJyb3JzLnB1c2goJ1NvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNoZWNrQWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoZWNrQWxsIik7CgogICAgICAgICAgICAgIGlmIChjaGVja0FsbCkgewogICAgICAgICAgICAgICAgY2hlY2tBbGwub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jaGVjay1hbGwgaW5wdXRbdHlwZT0iY2hlY2tib3giXScpOwoKICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQWxsLmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGNoZWNrYm94ZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hlY2tib3gpIHsKICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3guY2xvc2VzdCgidHIiKS5jbGFzc0xpc3QuYWRkKCJ0YWJsZS1hY3RpdmUiKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjaGVja2JveGVzLmZvckVhY2goZnVuY3Rpb24gKGNoZWNrYm94KSB7CiAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5jbG9zZXN0KCJ0ciIpLmNsYXNzTGlzdC5yZW1vdmUoInRhYmxlLWFjdGl2ZSIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsICdidXR0b24ucmVtb3ZlSXRlbUJlbicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBidXR0b25faWQgPSB0aGlzLmlkOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvd0JlbicgKyBidXR0b25faWQpLnJlbW92ZSgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGFkZEV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAnYnV0dG9uLnJlbW92ZUl0ZW1FY29uJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGJ1dHRvbl9pZCA9IHRoaXMuaWQ7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm93RWNvbicgKyBidXR0b25faWQpLnJlbW92ZSgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGFkZEV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAnYnV0dG9uLnJlbW92ZUl0ZW1BZGRpdGFtZW50cycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBidXR0b25faWQgPSB0aGlzLmlkOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvd0FkZGl0YW1lbnRzJyArIGJ1dHRvbl9pZCkucmVtb3ZlKCk7CiAgICAgICAgICAgICAgfSk7IC8vIGNoZWNrIGlmIHNvbWUgZWxlbWVudHMgc2hvdCBiZSB2aXNpYmxlIGZvciBhZ2VudHMKCiAgICAgICAgICAgICAgX3RoaXMxOS5hZ2VudFZpc2libGUgPSAhIShfdGhpczE5LnZpZXdVc2VyR3JvdXAoJ1NVUEVSX0FETUlOX0dST1VQJykgfHwgX3RoaXMxOS52aWV3VXNlckdyb3VwKCdBRE1JTl9HUk9VUCcpKTsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuY2hlY2tvdXQtdGFiIikuZm9yRWFjaChmdW5jdGlvbiAoZm9ybSkgewogICAgICAgICAgICAgICAgLy8gbmV4dCB0YWIKICAgICAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvckFsbCgiLm5leHR0YWIiKS5mb3JFYWNoKGZ1bmN0aW9uIChuZXh0QnV0dG9uKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0YWJFbCA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtYnMtdG9nZ2xlPSJwaWxsIl0nKTsKICAgICAgICAgICAgICAgICAgdGFiRWwuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigic2hvdy5icy50YWIiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCJkb25lIik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuZXh0VGFiID0gbmV4dEJ1dHRvbi5nZXRBdHRyaWJ1dGUoImRhdGEtbmV4dHRhYiIpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5leHRUYWIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7IC8vUGVydmllcyB0YWIKCiAgICAgICAgICAgICAgICBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wcmV2aWVzdGFiIikuZm9yRWFjaChmdW5jdGlvbiAocHJldkJ1dHRvbikgewogICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwcmV2VGFiID0gcHJldkJ1dHRvbi5nZXRBdHRyaWJ1dGUoImRhdGEtcHJldmlvdXMiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWxEb25lID0gcHJldkJ1dHRvbi5jbG9zZXN0KCJmb3JtIikucXVlcnlTZWxlY3RvckFsbCgiLmN1c3RvbS1uYXYgLmRvbmUiKS5sZW5ndGg7CgogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0b3RhbERvbmUgLSAxOyBpIDwgdG90YWxEb25lOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b24uY2xvc2VzdCgiZm9ybSIpLnF1ZXJ5U2VsZWN0b3JBbGwoIi5jdXN0b20tbmF2IC5kb25lIilbaV0gPyBwcmV2QnV0dG9uLmNsb3Nlc3QoImZvcm0iKS5xdWVyeVNlbGVjdG9yQWxsKCIuY3VzdG9tLW5hdiAuZG9uZSIpW2ldLmNsYXNzTGlzdC5yZW1vdmUoImRvbmUiKSA6ICIiOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldlRhYikuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsgLy8gU3RlcCBudW1iZXIgY2xpY2sKCiAgICAgICAgICAgICAgICB2YXIgdGFiQnV0dG9ucyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtYnMtdG9nZ2xlPSJwaWxsIl0nKTsKICAgICAgICAgICAgICAgIHRhYkJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYnV0dG9uLCBpKSB7CiAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoImRhdGEtcG9zaXRpb24iLCBpKTsKICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvckFsbCgiLmN1c3RvbS1uYXYgLmRvbmUiKS5sZW5ndGggPiAwID8gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCIuY3VzdG9tLW5hdiAuZG9uZSIpLmZvckVhY2goZnVuY3Rpb24gKGRvbmVUYWIpIHsKICAgICAgICAgICAgICAgICAgICAgIGRvbmVUYWIuY2xhc3NMaXN0LnJlbW92ZSgiZG9uZSIpOwogICAgICAgICAgICAgICAgICAgIH0pIDogIiI7CgogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDw9IGk7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgdGFiQnV0dG9uc1tqXS5jbGFzc0xpc3QuY29udGFpbnMoImFjdGl2ZSIpID8gdGFiQnV0dG9uc1tqXS5jbGFzc0xpc3QucmVtb3ZlKCJkb25lIikgOiB0YWJCdXR0b25zW2pdLmNsYXNzTGlzdC5hZGQoImRvbmUiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzMyk7CiAgICB9KSkoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBkaXNwbGF5ZWRQb3N0czogZnVuY3Rpb24gZGlzcGxheWVkUG9zdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLnBhZ2luYXRlKHRoaXMubGlzdCk7CiAgICB9LAogICAgcmVzdWx0UXVlcnk6IGZ1bmN0aW9uIHJlc3VsdFF1ZXJ5KCkgewogICAgICBpZiAodGhpcy5kYXRhLnNlYXJjaFZhbHVlcy5rZXl3b3JkLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgdmFyIHNlYXJjaCA9IHRoaXMuZGF0YS5zZWFyY2hWYWx1ZXMua2V5d29yZC50b0xvd2VyQ2FzZSgpOwogICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXllZFBvc3RzLmZpbHRlcihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIGRhdGEuYWRkcmVzcy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5jaXR5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSB8fCBkYXRhLnBvbGljeU51bWJlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5waG9uZU51bWJlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5maXJzdE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEubGFzdE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEuRnVsbE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEucG9zdGFsQ29kZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheWVkUG9zdHM7CiAgICAgIH0KICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBmaWxlcyA9IHJlZihbXSk7CiAgICB2YXIgZHJvcHpvbmVGaWxlID0gcmVmKCIiKTsKCiAgICB2YXIgZHJvcCA9IGZ1bmN0aW9uIGRyb3AoZSkgewogICAgICBkcm9wem9uZUZpbGUudmFsdWUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1swXTsKICAgICAgZmlsZXMudmFsdWUucHVzaChkcm9wem9uZUZpbGUudmFsdWUpOwogICAgICBjb25zb2xlLmxvZyhmaWxlcyk7CiAgICB9OwoKICAgIHZhciBzZWxlY3RlZEZpbGUgPSBmdW5jdGlvbiBzZWxlY3RlZEZpbGUoKSB7CiAgICAgIGRyb3B6b25lRmlsZS52YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0RmlsZScpLmZpbGVzWzBdOwogICAgICBmaWxlcy52YWx1ZS5wdXNoKGRyb3B6b25lRmlsZS52YWx1ZSk7CiAgICB9OwoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheShmaWxlcy52YWx1ZSk7CiAgICB9LCBmdW5jdGlvbiAoY3VycmVudFZhbHVlKSB7CiAgICAgIHJldHVybiBjdXJyZW50VmFsdWU7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGRyb3B6b25lRmlsZTogZHJvcHpvbmVGaWxlLAogICAgICBkcm9wOiBkcm9wLAogICAgICBzZWxlY3RlZEZpbGU6IHNlbGVjdGVkRmlsZSwKICAgICAgdiQ6IHVzZVZ1ZWxpZGF0ZSgpLAogICAgICBmaWxlczogZmlsZXMKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["flatPickr","moment","Layout","PageHeader","appConfig","Swal","Lottie","animationData","axios","Multiselect","notes","messages","econtacts","ref","watch","useVuelidate","jwt_decode","SimpleTypeahead","Upload","page","title","meta","name","content","description","components","data","items","text","href","active","openCreate","perPage","pages","errors","searchQuery","timeConfig","enableTime","dateFormat","dateTimeConfig","humanfriendlyConfig","typeList","clientData","token","localStorage","getItem","searchValues","type","noteSearch","keyword","language","clients","status","sortBy","orderBy","dateRange","department","toDate","Date","toLocaleDateString","year","month","day","fromDate","setFullYear","getFullYear","defaultOptions","list","agentData","username","email","firstName","lastName","phone","state","birthDate","address","country","zipCode","interview","agentNumber","createdBy","insuranceLicense","licenseNumber","departmentList","statusList","prospectStatusList","notesData","messagesData","file","parsed","itemsSearch","spectedColumns","agentVisible","idNumber","preview","image","preview_list","image_list","uploadFiles","crmUserID","crmSelectedUser","fileList","eContactlist","companies","setPages","created","filters","trimWords","value","split","splice","join","methods","editdata","document","getElementById","id","company","score","location","date","addNewAgentModal","resetAgentData","reset","innerHTML","style","display","checkClientExists","isProspect","userEmail","clientID","userID","potentialClientEmail","validEmail","post","then","div","querySelector","response","classList","add","remove","catch","error","fire","updateClient","push","gender","phoneNumber","validPhone","departmentID","length","city","leadType","formatDate","birthday","postalCode","interviewDate","put","click","icon","detail","$router","property","confirmButtonClass","buttonsStyling","showCloseButton","message","i","createClient","beneficiaries","getBenficiaries","emergencyContacts","getEmergency","addedChilds","getAddedChilds","note","formValues","values","clientsInfo","totalClients","deleteAgent","userName","agentID","showDenyButton","confirmButtonText","denyButtonText","result","isConfirmed","isDenied","getDepartments","console","log","getUserInfo","ID","agentInfo","setAgentData","dateOfBirth","isLicensed","getClientInfo","getNotes","clientInfo","setClientData","setItem","getMapsLink","getFiles","updateClientList","validate","filterLanguage","filterKeyword","filterType","filterNotes","filterFromDate","filterToDate","start","end","days","diff","typeAhead","deleted","agentSearch","re","test","trim","isphone","format","formatPhone","flag","replace","undefined","substring","x","match","numberOfPages","Math","ceil","index","paginate","from","to","slice","addBeneficiary","benList","beneficiaryQty","separator","checkIDExists","element","createElement","appendChild","addEcontact","eContact","eContactQty","append","addAdditaments","additaments","additamentsQty","nameValues","lastValues","phoneValues","addressValues","stateValues","postalValues","relationValues","ageValues","benFirstName","querySelectorAll","benLastName","benPhone","benAddress","benState","benPostalCode","benRelation","benAge","eConFirstName","eConLastName","eConPhone","eConAddress","eConState","eConPostalCode","eConRelation","eConAge","genderValues","AddiGender","AddiAge","AddiRelation","age","url","getProspectStatus","moveClient","client","position","showConfirmButton","timer","filterStatus","statusButton","deleteClient","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","cancelButtonText","showCancelButton","dismiss","DismissReason","cancel","handleFocus","e","target","setAttribute","link","parseFile","allowedExtensions","exec","changeType","uploadFile","listOfData","uploadTo","source","listType","setTimeout","reload","compare","o1","o2","p","hasOwnProperty","deleteRecord","ele","parentElement","viewUserGroup","request","currentRole","userGroup","includes","getSMS","searchAgents","searchValue","condition","viewPermission","vueViews","isClient","getEcontacts","downloadFile","a","download","pop","onAddFile","event","affectedFiles","newState","onRemoveFile","refreshContacts","mounted","addEvent","parent","evt","selector","handler","addEventListener","matches","apply","closest","arguments","field","window","queryString","search","urlParams","URLSearchParams","get","indexOf","checkAll","onclick","checkboxes","checked","forEach","checkbox","button_id","form","nextButton","tabEl","item","nextTab","getAttribute","prevButton","prevTab","totalDone","tabButtons","button","doneTab","j","contains","computed","displayedPosts","resultQuery","toLowerCase","filter","policyNumber","FullName","setup","files","dropzoneFile","drop","dataTransfer","selectedFile","currentValue","v$"],"sourceRoot":"","sources":["C:\\wamp64\\www\\crm\\frontend\\src\\views\\clients\\clientlist.vue"],"sourcesContent":["<script>\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport moment from \"moment\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport Layout from \"../../layouts/main.vue\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport appConfig from \"../../../app.config\";\r\nimport Swal from \"sweetalert2\";\r\nimport Lottie from \"@/components/widgets/lottie.vue\";\r\nimport animationData from \"@/components/widgets/msoeawqm.json\";\r\nimport axios from \"axios\";\r\nimport Multiselect from \"@vueform/multiselect\";\r\nimport \"@vueform/multiselect/themes/default.scss\";\r\n\r\n// components\r\nimport notes from '../../components/users/notes';\r\nimport messages from '../../views/widgets/messages';\r\nimport econtacts from '../../components/clients/econtacts';\r\nimport {ref, watch} from \"vue\";\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport SimpleTypeahead from \"vue3-simple-typeahead\";\r\nimport 'vue3-simple-typeahead/dist/vue3-simple-typeahead.css'; //Optional default CSS\r\nimport { Upload } from '@progress/kendo-vue-upload';\r\nimport '@progress/kendo-theme-default/dist/all.css';\r\n\r\nexport default {\r\n  page: {\r\n    title: \"Clients\",\r\n    meta: [{name: \"description\", content: appConfig.description}],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n    flatPickr,\r\n    Multiselect,\r\n    Lottie,\r\n    notes,\r\n    messages,\r\n    SimpleTypeahead,\r\n    Upload,\r\n    econtacts\r\n  },\r\n  data() {\r\n    return{\r\n      title: \"Client List\",\r\n      items: [\r\n        {\r\n          text: \"Clients\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Client List\",\r\n          active: true,\r\n        },\r\n      ],\r\n      openCreate: 0,\r\n      page: 1,\r\n      perPage: 100,\r\n      pages: [],\r\n      errors: [],\r\n      searchQuery: null,\r\n      timeConfig: {\r\n        enableTime: false,\r\n        dateFormat: \"d M, Y\"\r\n      },\r\n      dateTimeConfig: {\r\n        enableTime: true,\r\n        dateFormat: \"F j, Y H:i K\"\r\n      },\r\n      humanfriendlyConfig: {\r\n        dateFormat: \"F j, Y\",\r\n      },\r\n      typeList: {},\r\n      clientData: [],\r\n      data: {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: {\r\n          type: '0',\r\n          noteSearch: '',\r\n          keyword: '',\r\n          language: '3',\r\n          clients: 1,\r\n          status: '0',\r\n          sortBy: 'name',\r\n          orderBy: 'ASC',\r\n          dateRange: '0',\r\n          department: '0' ,\r\n          toDate: new Date().toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"}) ,\r\n          fromDate: new Date(new Date().setFullYear(new Date().getFullYear() - 1)).toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"})\r\n        },\r\n      },\r\n      defaultOptions: { animationData: animationData },\r\n      list: [],\r\n      agentData: {\r\n        username: '',\r\n        email: '',\r\n        firstName: '',\r\n        lastName: '',\r\n        language: '',\r\n        status: '',\r\n        phone: '',\r\n        department: '',\r\n        state: '',\r\n        birthDate: '',\r\n        address: '',\r\n        country: '',\r\n        zipCode: '',\r\n        interview: '',\r\n        agentNumber: '',\r\n        createdBy: '',\r\n        insuranceLicense: '',\r\n        licenseNumber: ''\r\n      },\r\n      departmentList: {},\r\n      statusList: {},\r\n      prospectStatusList: {},\r\n      notesData: [],\r\n      messagesData: [],\r\n      file: [],\r\n      content: [],\r\n      parsed: false,\r\n      itemsSearch: [],\r\n      spectedColumns: [\r\n        \"Last Name\",\r\n        \"First Name\",\r\n        \"Address\",\r\n        \"City\",\r\n        \"State\",\r\n        \"Zip\",\r\n        \"Daytime Phone\",\r\n        \"Evening Phone\",\r\n        \"Age\",\r\n        \"Media\",\r\n        \"Language\",\r\n        \"Received\",\r\n        \"Assigned\",\r\n        \"Second Pre-Approach Letter\"\r\n      ],\r\n      agentVisible: true,\r\n      idNumber: 1,\r\n      preview: null,\r\n      image: null,\r\n      preview_list: [],\r\n      image_list: [],\r\n      uploadFiles: [],\r\n      crmUserID: localStorage.getItem('id'),\r\n      crmSelectedUser: localStorage.getItem('selectedUser'),\r\n      fileList: [],\r\n      eContactlist: []\r\n    }\r\n  },\r\n  watch: {\r\n    companies() {\r\n      this.setPages();\r\n    },\r\n  },\r\n  created() {\r\n    this.setPages();\r\n  },\r\n  filters: {\r\n    trimWords(value) {\r\n      return value.split(\" \").splice(0, 20).join(\" \") + \"...\";\r\n    },\r\n  },\r\n  methods: {\r\n    editdata(data){\r\n\r\n      document.getElementById('id').value= data.id\r\n      document.getElementById('customername').value=data.name;\r\n      document.getElementById('companyname').value=data.company;\r\n      document.getElementById('leadsscore').value=data.score;\r\n      document.getElementById('phone').value=data.phone;\r\n      document.getElementById('location').value=data.location;\r\n      document.getElementById('date').value=data.date;\r\n    },\r\n    addNewAgentModal() {\r\n\r\n      this.openCreate = 1;\r\n      this.resetAgentData()\r\n      document.getElementById(\"addform\").reset();\r\n      document.getElementById('agentModalLabel').innerHTML=\"Add Client\";\r\n      document.getElementById('add-btn').style.display='block';\r\n      // document.getElementById('editNoteOpen').style.display='none';\r\n      document.getElementById('edit-btn').style.display='none';\r\n      document.getElementById(\"addform\").reset();\r\n    },\r\n    async checkClientExists(){\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        isProspect: 0,\r\n        userEmail: localStorage.getItem('email'),\r\n        clientID: localStorage.getItem('selectedUser'),\r\n        userID: localStorage.getItem('id'),\r\n        potentialClientEmail: this.clientData.email\r\n      }\r\n\r\n      if (this.validEmail(data.potentialClientEmail)) {\r\n        await axios\r\n            .post('/api/client/emailExists', data)\r\n            .then(response => {\r\n              let div = document.querySelector(\".createEmail\");\r\n\r\n              if (response.data > 0) {\r\n                div.classList.add(\"is-invalid\");\r\n              } else {\r\n                div.classList.remove(\"is-invalid\");\r\n              }\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                Swal.fire(\"Oops!\", \"Please, contact your SysAdmin.\", \"error\");\r\n              }\r\n            })\r\n      }\r\n\r\n    },\r\n    async updateClient() {\r\n\r\n      this.errors = []\r\n\r\n      if (!this.clientData.lastName) {\r\n        this.errors.push('Last Name is required.');\r\n      }\r\n      if (!this.clientData.gender) {\r\n        this.errors.push('Gender is required.');\r\n      }\r\n\r\n      if (!this.clientData.language) {\r\n        this.errors.push('Language is required.');\r\n      }\r\n\r\n      if (!this.clientData.status) {\r\n        this.errors.push('Status is required.');\r\n      }\r\n\r\n      if (!this.clientData.phoneNumber) {\r\n        this.errors.push('Phone is required.');\r\n      }\r\n\r\n      if (this.validPhone(this.clientData.phoneNumber) === false && this.clientData.phoneNumber !== '') {\r\n        this.errors.push('Please, write a valid phone number!');\r\n      }\r\n\r\n      if (!this.clientData.departmentID) {\r\n        this.errors.push('Department is required.');\r\n      }\r\n\r\n      if (!this.errors.length) {\r\n\r\n        const data = {\r\n          username: '',\r\n          email: this.clientData.email,\r\n          city: this.clientData.city,\r\n          firstName: this.clientData.firstName,\r\n          lastName: this.clientData.lastName,\r\n          language: this.clientData.language,\r\n          status: this.clientData.status,\r\n          leadType: this.clientData.leadType,\r\n          gender: this.clientData.gender,\r\n          phoneNumber: this.clientData.phoneNumber,\r\n          departmentID: this.clientData.departmentID,\r\n          state: this.clientData.state,\r\n          birthDate: this.formatDate(this.clientData.birthday, 'DD MMM, YYYY'),\r\n          address: this.clientData.address,\r\n          country: this.clientData.country,\r\n          postalCode: this.clientData.postalCode,\r\n          interviewDate: this.clientData.interview,\r\n          createdBy: localStorage.getItem('email'),\r\n          licenseNumber: this.clientData.licenseNumber,\r\n          token: localStorage.getItem('jwt'),\r\n          userID: localStorage.getItem('id'),\r\n          clientID: localStorage.getItem('selectedUser')\r\n        }\r\n\r\n        await axios\r\n            .put('/api/client/updateClient', data)\r\n            .then(async response => {\r\n              if (response) {\r\n                document.getElementById('close-modal').click();\r\n                await Swal.fire({\r\n                  icon: 'success',\r\n                  title: 'Success',\r\n                  text: 'Client update successfully!'\r\n                });\r\n              }\r\n            })\r\n            .catch(async error => {\r\n              if (error.response) {\r\n\r\n                if(error.response.data.detail === 'Your session is expired!'){\r\n                  this.$router.push('logout')\r\n                }\r\n\r\n                let list = '';\r\n                for (const property in error.response.data) {\r\n                  this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                  list += '\\n' + '<b>' + error.response.data[property] + '</b>';\r\n                }\r\n\r\n                await Swal.fire({\r\n                  title: \"Please check the following: \" + list,\r\n                  icon: 'warning',\r\n                  confirmButtonClass: \"btn btn-info\",\r\n                  buttonsStyling: false,\r\n                  showCloseButton: true,\r\n                });\r\n\r\n              } else if (error.message) {\r\n                this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n              }\r\n            })\r\n      } else {\r\n        let list = '';\r\n        for (let i = 0; i < this.errors.length; i++)\r\n          list += '\\n' + '<b>' + this.errors[i] + '</b>';\r\n\r\n        await Swal.fire({\r\n          title: \"Please complete the form! \" + list,\r\n          icon: 'warning',\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    async createClient() {\r\n      this.errors = []\r\n\r\n      if (!this.clientData.firstName) {\r\n        this.errors.push('First Name is required.');\r\n      }\r\n\r\n      if (!this.clientData.lastName) {\r\n        this.errors.push('Last Name is required.');\r\n      }\r\n\r\n      if (!this.clientData.status) {\r\n        this.errors.push('Status is required.');\r\n      }\r\n\r\n      if (!this.clientData.phoneNumber) {\r\n        this.errors.push('Phone is required.');\r\n      }\r\n\r\n      if (this.validPhone(this.clientData.phone) === false && this.clientData.phone === '') {\r\n        this.errors.push('Please, write a valid phone number!');\r\n      }\r\n\r\n      if (!this.clientData.departmentID) {\r\n        this.errors.push('Department is required.');\r\n      }\r\n\r\n      if (this.clientData.type  === 'undefined') {\r\n        this.errors.push('Lead/Client Source is required.');\r\n      }\r\n\r\n      if (this.clientData.gender !== 'M' && this.clientData.gender !== 'F') {\r\n        this.errors.push('Gender is required.');\r\n      }\r\n\r\n      if (this.clientData.language !== '1' && this.clientData.language !== '2') {\r\n        this.errors.push('Language is required.');\r\n      }\r\n\r\n      if (this.clientData.leadType === 'undefined') {\r\n        this.errors.push('Lead/client Source is required.');\r\n      }\r\n\r\n      if (!this.errors.length) {\r\n        let beneficiaries = this.getBenficiaries();\r\n        let emergencyContacts = this.getEmergency();\r\n        let addedChilds = this.getAddedChilds();\r\n        let note = {'note': this.clientData.note};\r\n\r\n        let formValues = {'address': this.clientData.address, 'birthday': this.clientData.birthday,\r\n        'city': this.clientData.city, 'country': this.clientData.country, 'department': this.clientData.departmentID,\r\n        'email': this.clientData.email, 'firstName': this.clientData.firstName,\r\n        'interview': this.clientData.interview, 'language': this.clientData.language, 'lastName': this.clientData.lastName,\r\n        'leadType': this.clientData.leadType, 'note': this.clientData.note, 'phoneNumber': this.clientData.phoneNumber,\r\n        'postalCode': this.clientData.postalCode,'state': this.clientData.state,'status': this.clientData.status,\r\n        'length': this.clientData.length, 'gender': this.clientData.gender};\r\n\r\n        // let form = document.getElementById(\"addform\");\r\n\r\n        // for (var i = 0; i < form.elements.length; i++) {\r\n        //   let e = form.elements[i];\r\n        //\r\n        //   console.log(e)\r\n          // if(e.name !== '') {\r\n          //   formValues[e.name] = e.value;\r\n          // }\r\n          // formValues['editGender'] = document.querySelector(\"input[type='radio'][name=editGender]:checked\").value;\r\n          //\r\n          // if(this.isClientList){\r\n          //   formValues['editType'] = document.querySelector(\"#editType\").value;\r\n          // }else{\r\n          //   formValues['editType'] = document.querySelector(\"#editType1\").value;\r\n          // }\r\n        // }\r\n\r\n        let values = {0: {formValues, beneficiaries, emergencyContacts, addedChilds, note}}\r\n\r\n        let data = {\r\n          clientsInfo: values,\r\n          token: localStorage.getItem('jwt'),\r\n          userID: localStorage.getItem('id'),\r\n          userEmail: localStorage.getItem('email'),\r\n          isProspect: 0,\r\n          totalClients: 1,\r\n        }\r\n\r\n        await axios\r\n            .post('/api/client/createClientList', data)\r\n            .then(async response => {\r\n              if (response.data['ID'] !== null) {\r\n                document.getElementById('closemodal').click();\r\n                document.getElementById(\"addform\").reset();\r\n                await Swal.fire({\r\n                  icon: 'success',\r\n                  title: 'Success',\r\n                  text: 'Client created successfully!'\r\n                });\r\n              }\r\n\r\n\r\n            })\r\n            .catch(async error => {\r\n              if (error.response) {\r\n                let list = '';\r\n                for (const property in error.response.data) {\r\n                  this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                  list += '\\n' + '<b>' + error.response.data[property] + '</b>';\r\n                }\r\n\r\n                await Swal.fire({\r\n                  title: \"Please check the following: \" + list,\r\n                  icon: 'warning',\r\n                  confirmButtonClass: \"btn btn-info\",\r\n                  buttonsStyling: false,\r\n                  showCloseButton: true,\r\n                });\r\n\r\n              } else if (error.message) {\r\n                this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n              }\r\n            })\r\n      } else {\r\n        let list = '';\r\n        for (let i = 0; i < this.errors.length; i++)\r\n          list += '\\n' + '<b>' + this.errors[i]+ '</b>';\r\n\r\n        await Swal.fire({\r\n          title: \"Please complete the form! \" + list,\r\n          icon: 'warning',\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    async deleteAgent() {\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userID: localStorage.getItem('id'),\r\n        userName: localStorage.getItem('firstName') + ' ' + localStorage.getItem('lastname'),\r\n        userEmail: localStorage.getItem('email'),\r\n        agentID: localStorage.getItem('selectedUser')\r\n      }\r\n\r\n      Swal.fire({\r\n        title: 'Do you want to <b>Delete</b> this agent?',\r\n        showDenyButton: true,\r\n        confirmButtonText: 'Yes',\r\n        denyButtonText: `No`,\r\n      }).then(async (result) => {\r\n        /* Read more about isConfirmed, isDenied below */\r\n        if (result.isConfirmed) {\r\n          await axios\r\n              .put('/api/deleteUser', data)\r\n              .then(async response => {\r\n                if (response) {\r\n                  // document.getElementById('close-modal').click();\r\n\r\n                  await Swal.fire('Agent update successfully!', '', 'success');\r\n                }\r\n              })\r\n              .catch(async error => {\r\n                if (error.response) {\r\n                  let list = '';\r\n                  for (const property in error.response.data) {\r\n                    this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                    list += '\\n' + '<b>' + error.response.data[property] + '</b>';\r\n                  }\r\n\r\n                  await Swal.fire({\r\n                    title: \"Please check the following: \" + list,\r\n                    icon: 'warning',\r\n                    confirmButtonClass: \"btn btn-info\",\r\n                    buttonsStyling: false,\r\n                    showCloseButton: true,\r\n                  });\r\n\r\n                } else if (error.message) {\r\n                  this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n                }\r\n              })\r\n        } else if (result.isDenied) {\r\n          await Swal.fire('Agent wasn\\'t updated!', '', 'info');\r\n        }\r\n      })\r\n    },\r\n    async getDepartments() {\r\n\r\n      await axios\r\n          .post('/api/getDepartments')\r\n          .then(response => {\r\n            console.log(response);\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Something was wrong, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async getUserInfo(id) {\r\n      document.getElementById('edit-btn').style.display='block';\r\n      document.getElementById('add-btn').style.display='none'\r\n      document.getElementById('agentModalLabel').innerHTML=\"Edit Agent\"\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        ID: id\r\n      }\r\n\r\n      let agentInfo;\r\n\r\n      await axios\r\n          .post('/api/getUser', data)\r\n          .then(response => {\r\n            agentInfo=response.data\r\n            this.setAgentData(agentInfo);\r\n            document.getElementById('id').value=agentInfo.ID\r\n            document.getElementById('editEmail').value=agentInfo.email;\r\n            document.getElementById('editFirstName').value=agentInfo.firstName;\r\n            document.getElementById('editLastName').value=agentInfo.lastName;\r\n            document.getElementById('editLanguage').value=agentInfo.language;\r\n            document.getElementById('editStatus').value=agentInfo.status\r\n            document.getElementById('editPhoneNumber').value= agentInfo.phoneNumber;\r\n            document.getElementById('editDepartment').value=agentInfo.departmentID;\r\n            document.getElementById('editBirthDate').value=agentInfo.dateOfBirth;\r\n            document.getElementById('editAddress').value=agentInfo.address;\r\n            document.getElementById('editState').value=agentInfo.state;\r\n            document.getElementById('editCountry').value=agentInfo.country;\r\n            document.getElementById('editPostalCode').value=agentInfo.postalCode;\r\n            document.getElementById('editAgentNumber').value=agentInfo.agentNumber;\r\n            document.getElementById('editCreatedBy').value=agentInfo.createdBy;\r\n            document.getElementById('editLicensed').value=agentInfo.isLicensed;\r\n            // document.getElementById('editInterview').value=agentInfo.interviewDate;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Something was wrong, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async getClientInfo (id) {\r\n      this.openCreate = 0;\r\n      document.getElementById('edit-btn').style.display='block';\r\n      document.getElementById('add-btn').style.display='none'\r\n      document.getElementById('agentModalLabel').innerHTML=\"Edit Client\"\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        ID: id\r\n      }\r\n\r\n      // document.getElementById('editNoteOpen').style.display='block';\r\n      await this.getNotes(id)\r\n      let clientInfo;\r\n\r\n      await axios\r\n          .post('/api/client/getClient', data)\r\n          .then(response => {\r\n            clientInfo = response.data;\r\n            this.setClientData(response.data);\r\n            localStorage.setItem('selectedUser', clientInfo.ID);\r\n            localStorage.setItem('selectedUserName', clientInfo.firstName + ' ' + clientInfo.lastName);\r\n            this.getMapsLink()\r\n            this.getFiles(id);\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Something was wrong, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async updateClientList(status=this.data.searchValues.status) {\r\n\r\n      let validate = true;\r\n      let errors = [];\r\n      let filterLanguage = document.getElementById(\"filterLanguage\").value;\r\n      let filterKeyword = document.getElementById(\"filterKeyword\").value;\r\n      let filterType = document.getElementById(\"filterType\").value;\r\n      let filterNotes = document.getElementById(\"filterNotes\").value;\r\n      let filterFromDate = document.getElementById(\"filterFromDate\").value;\r\n      let filterToDate = document.getElementById(\"filterToDate\").value;\r\n      this.data.searchValues.status = status;\r\n\r\n      if (filterLanguage !== '' && (filterLanguage === '1' || filterLanguage === '2')){\r\n        this.data.searchValues.language = filterLanguage;\r\n      }\r\n\r\n      if (filterKeyword !== '' && filterKeyword.length >= 3) {\r\n        this.data.searchValues.keyword = filterKeyword;\r\n      }else if(filterKeyword !== '' && filterKeyword.length < 3) {\r\n        errors.push('Keyword search should have 3 or more characters!')\r\n        validate = false;\r\n      }\r\n\r\n      if(filterType !== ''){\r\n        this.data.searchValues.type = filterType;\r\n      }\r\n\r\n      if (filterNotes !== '' && filterNotes.length >= 3) {\r\n        this.data.searchValues.noteSearch = filterNotes;\r\n      }else if(filterNotes !== '' && filterNotes.length < 3) {\r\n        errors.push('Notes search should have 3 or more characters!')\r\n        validate = false;\r\n      }\r\n\r\n      var start = moment(this.formatDate(filterFromDate, 'YYYY-MM-DD'));\r\n      var end = moment(this.formatDate(filterToDate, 'YYYY-MM-DD'));\r\n      var days = end.diff(start, \"days\");\r\n\r\n      if(days <= 365){\r\n        this.data.searchValues.fromDate = filterFromDate;\r\n        this.data.searchValues.toDate = filterToDate;\r\n      } else {\r\n        errors.push(\"From Date and To Date (range) couldn't be larger than a year (365 days)!\");\r\n        validate = false;\r\n      }\r\n      let typeAhead = document.getElementById('typeahead_id')\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        isProspect: 0,\r\n        searchValues: this.data.searchValues,\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n        deleted: 0,\r\n        agentSearch: (typeAhead != null && typeof(typeAhead) != 'undefined' ) ? typeAhead.value : []\r\n      }\r\n\r\n      if(validate){\r\n        await axios\r\n            .post('/api/client/listClients', data)\r\n            .then(response => {\r\n              this.list = response.data\r\n              this.page = 1\r\n              this.setPages()\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n\r\n                if(error.response.data.detail === 'Your session is expired!'){\r\n                  this.$router.push('logout')\r\n                }\r\n\r\n                for (const property in error.response.data) {\r\n                  this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                }\r\n              }/* else if (error.message) {\r\n              this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n            }*/\r\n            })\r\n      }else{\r\n        let list = '';\r\n        for (var i = 0; i < errors.length; i+=1) {\r\n          list += errors[i] + ' \\n';\r\n        }\r\n\r\n        await Swal.fire(\"\" + list, '', 'info');\r\n\r\n      }\r\n\r\n    },\r\n    validEmail: function (email) {\r\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      return re.test(email.trim());\r\n    },\r\n    validPhone: function (phone) {\r\n      var isphone = /^(\\+{0,})(\\d{0,})([(]{1}\\d{1,3}[)]{0,}){0,}(\\s?\\d+|\\+\\d{2,3}\\s{1}\\d+|\\d+){1}[\\s|-]?\\d+([\\s|-]?\\d+){1,2}(\\s){0,}$/gm.test(phone);\r\n      return isphone;\r\n    },\r\n    formatDate: function (date, format){\r\n      date = moment(date).format(format)\r\n      return date;\r\n    },\r\n    formatPhone: function (phone, flag=0) {\r\n\r\n      // if flag == 1 put value in phone Edit\r\n      phone = phone.replace(/\\D/g, '')\r\n\r\n      if(phone !== undefined) {\r\n        if(phone.length > 10) {\r\n          phone = phone.substring(1)\r\n        }\r\n        const x = phone.match(/(\\d{0,3})(\\d{0,3})(\\d{0,4})/);\r\n        phone = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');\r\n\r\n      } else {\r\n        phone = ''\r\n      }\r\n\r\n      if(flag !== 1){\r\n        return phone;\r\n      }else{\r\n        document.getElementById('editPhoneNumber').value = phone;\r\n      }\r\n    },\r\n    setAgentData: function (data) {\r\n      this.agentData.email=data.email;\r\n      this.agentData.firstName=data.firstName;\r\n      this.agentData.lastName=data.lastName;\r\n      this.agentData.language=data.language;\r\n      this.agentData.status=data.status\r\n      this.agentData.phone=data.phoneNumber;\r\n      this.agentData.department=data.departmentID\r\n      this.agentData.birthDate= this.formatDate(data.dateOfBirth, 'DD MM, YYYY');\r\n      this.agentData.interview= this.formatDate(data.interviewDate, 'm-d-y H:i K');\r\n      this.agentData.address=data.address;\r\n      this.agentData.state=data.state;\r\n      this.agentData.country=data.country;\r\n      this.agentData.zipCode=data.postalCode;\r\n      this.agentData.agentNumber=data.agentNumber;\r\n      this.agentData.createdBy=data.createdBy;\r\n      this.agentData.insuranceLicense=data.isLicensed;\r\n    },\r\n    resetAgentData: function (){\r\n      this.agentData =\r\n          {username: '',\r\n            email: '',\r\n            firstName: '',\r\n            lastName: '',\r\n            language: '',\r\n            status: '',\r\n            phone: '',\r\n            department: '',\r\n            state: '',\r\n            birthDate: '',\r\n            address: '',\r\n            country: '',\r\n            zipCode: '',\r\n            interview: '',\r\n            agentNumber: '',\r\n            createdBy: '',\r\n            insuranceLicense: '',\r\n            licenseNumber: ''\r\n          }\r\n      this.clientData = [];\r\n    },\r\n    setPages() {\r\n      let numberOfPages = Math.ceil(this.list.length / this.perPage);\r\n      this.pages = []\r\n      for (let index = 1; index <= numberOfPages; index++) {\r\n        this.pages.push(index);\r\n      }\r\n    },\r\n    paginate(companies) {\r\n      let page = this.page;\r\n      let perPage = this.perPage;\r\n      let from = page * perPage - perPage;\r\n      let to = page * perPage;\r\n      return companies.slice(from, to);\r\n    },\r\n    addBeneficiary( benList = [] ) {\r\n      this.beneficiaryQty = this.beneficiaryQty + 1;\r\n      let i = this.beneficiaryQty;\r\n      let div = document.getElementById('addBeneficiary');\r\n      let separator = '';\r\n      let checkIDExists = document.getElementById(\"benFirstName-1\");\r\n      var element = document.createElement('div');\r\n\r\n      if(benList.length <= 0){\r\n        benList.push(\r\n            benList['firstName'] = '',\r\n            benList['lastName'] = '',\r\n            benList['address'] = '',\r\n            benList['phoneNumber'] = '',\r\n            benList['state'] = '',\r\n            benList['postalCode'] = '',\r\n            benList['relationship'] = '',\r\n            benList['age']  = '');\r\n      }\r\n\r\n      if(checkIDExists) {\r\n        separator = '<hr style=\"border-top: 1px solid #2c9a2a;\">';\r\n      }\r\n\r\n      element.innerHTML += '<div class=\"row\" id=\"rowBen'+i+'\">\\n' + separator  +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benFirstName-'+i+'\" class=\"form-label\">First Name</label>\\n' +\r\n          '    <input type=\"text\" id=\"benFirstName-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter First Name\" name=\"benFirstName[]\" required value=\"'+benList['firstName']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benLastName-'+i+'\" class=\"form-label\">Last Name</label>\\n' +\r\n          '    <input type=\"text\" id=\"benLastName-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Last Name\"  name=\"benLastName[]\" required value=\"'+benList['lastName']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benAddress-'+i+'\" class=\"form-label\">Address</label>\\n' +\r\n          '    <input type=\"text\" id=\"benAddress-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Address\"  name=\"benAddress[]\" required value=\"'+benList['address']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benPhone-'+i+'\" class=\"form-label\">Phone</label>\\n' +\r\n          '    <input type=\"text\" id=\"benPhone-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Phone\"  name=\"benPhone[]\" required value=\"'+benList['phoneNumber']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benState-'+i+'\" class=\"form-label\">State</label>\\n' +\r\n          '    <input type=\"text\" id=\"benState-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter State\"  name=\"benState[]\"  required value=\"'+benList['state']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benPostalCode-'+i+'\" class=\"form-label\">Postal Code</label>\\n' +\r\n          '    <input type=\"text\" id=\"benPostalCode-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Postal Code\"  name=\"benPostalCode[]\" required value=\"'+benList['postalCode']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benRelation-'+i+'\" class=\"form-label\">Relationship</label>\\n' +\r\n          '    <input type=\"text\" id=\"benRelation-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Relationship\"  name=\"benRelation[]\"  required value=\"'+benList['relationship']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"benAge-'+i+'\" class=\"form-label\">Age</label>\\n' +\r\n          '    <input type=\"text\" id=\"benAge-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Age\"  name=\"benAge[]\" required value=\"'+benList['age']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          ' <div class=\"col-md-6\" style=\"display: flex; justify-content: flex-end;\">\\n' +\r\n          ' </div>\\n' +\r\n          ' <div class=\"col-md-6\" style=\"display: flex; justify-content: flex-end;\">\\n' +\r\n          '    <button type=\"button\" id=\"'+i+'\" class=\"btn btn-danger removeItemBen\" title=\"Delete\"><i class=\"ri-close-circle-line\"></i></button>\\n' +\r\n          ' </div>\\n' +\r\n          '</div>';\r\n\r\n      div.appendChild(element);\r\n    },\r\n    addEcontact( eContact = [] ) {\r\n      this.eContactQty = this.eContactQty + 1;\r\n      let i = this.eContactQty;\r\n      let div = document.getElementById('addEcontact');\r\n      let separator = '';\r\n      let checkIDExists = document.getElementById(\"eConFirstName-1\");\r\n      var element = document.createElement('div');\r\n\r\n      if(eContact.length <= 0){\r\n        eContact.push(\r\n            eContact['firstName'] = '',\r\n            eContact['lastName'] = '',\r\n            eContact['address'] = '',\r\n            eContact['phoneNumber'] = '',\r\n            eContact['state'] = '',\r\n            eContact['postalCode'] = '',\r\n            eContact['relationship'] = '',\r\n            eContact['age']  = '');\r\n      }\r\n\r\n      if(checkIDExists) {\r\n        separator = '<hr style=\"border-top: 1px solid #2c9a2a;\">';\r\n      }\r\n      element.innerHTML += separator +\r\n          '<div class=\"row\" id=\"rowEcon'+i+'\">\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConFirstName-'+i+'\" class=\"form-label\">First Name</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConFirstName-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter First Name\" name=\"eConFirstName[]\" required value=\"'+eContact['firstName']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConLastName-'+i+'\" class=\"form-label\">Last Name</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConLastName-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Last Name\"  name=\"eConLastName[]\" required  value=\"'+eContact['lastName']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConAddress-'+i+'\" class=\"form-label\">Address</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConAddress-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Address\"  name=\"eConAddress[]\" required  value=\"'+eContact['address']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConPhone-'+i+'\" class=\"form-label\">Phone</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConPhone-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Phone\"  name=\"eConPhone[]\" required  value=\"'+eContact['phoneNumber']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConState-'+i+'\" class=\"form-label\">State</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConState-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter State\"  name=\"eConState[]\"  required  value=\"'+eContact['state']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConPostalCode-'+i+'\" class=\"form-label\">Postal Code</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConPostalCode-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Postal Code\"  name=\"eConPostalCode[]\" required  value=\"'+eContact['postalCode']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConRelation-'+i+'\" class=\"form-label\">Relationship</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConRelation-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Relationship\"  name=\"eConRelation[]\"  required  value=\"'+eContact['relationship']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"eConAge-'+i+'\" class=\"form-label\">Age</label>\\n' +\r\n          '    <input type=\"text\" id=\"eConAge-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Age\"  name=\"eConAge[]\" required  value=\"'+eContact['age']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          ' <div class=\"col-md-6\" style=\"display: flex; justify-content: flex-end;\">\\n' +\r\n          ' </div>\\n' +\r\n          ' <div class=\"col-md-6\" style=\"display: flex; justify-content: flex-end;\">\\n' +\r\n          '    <button type=\"button\" id=\"'+i+'\" class=\"btn btn-danger removeItemEcon\" title=\"Delete\"><i class=\"ri-close-circle-line\"></i></button>\\n' +\r\n          ' </div>\\n' +\r\n          '</div>';\r\n\r\n      div.append(element);\r\n    },\r\n    addAdditaments( additaments = []) {\r\n      this.additamentsQty = this.additamentsQty + 1;\r\n      let i = this.additamentsQty;\r\n      let div = document.getElementById('addAdditaments');\r\n      let separator = '';\r\n      let checkIDExists = document.getElementById(\"eConFirstName-1\");\r\n      var element = document.createElement('div');\r\n\r\n      if(additaments.length <= 0){\r\n        additaments.push(\r\n            additaments['firstName'] = '',\r\n            additaments['lastName'] = '',\r\n            additaments['gender'] = 0,\r\n            additaments['retalionship'] = 0,\r\n            additaments['age']  = '');\r\n      }\r\n\r\n      if(checkIDExists) {\r\n        separator = '<hr style=\"border-top: 1px solid #2c9a2a;\">';\r\n      }\r\n\r\n      element.innerHTML += separator +\r\n          '<div class=\"row\" id=\"rowAdditaments'+i+'\">\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"AddiFirstName-'+i+'\" class=\"form-label\">First Name</label>\\n' +\r\n          '    <input type=\"text\" id=\"AddiFirstName-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter First Name\" name=\"AddiFirstName[]\" required value=\"'+additaments['firstName']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '  <div class=\"col-lg-6\">\\n' +\r\n          '    <label for=\"AddiLastName-'+i+'\" class=\"form-label\">Last Name</label>\\n' +\r\n          '    <input type=\"text\" id=\"AddiLastName-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Last Name\"  name=\"AddiLastName[]\" required value=\"'+additaments['lastName']+'\">\\n' +\r\n          '  </div>\\n' +\r\n          '<div class=\"col-lg-6\">'+\r\n          '  <label for=\"AddiGender\" class=\"form-label\">Gender</label>'+\r\n          '  <select class=\"form-select mb-2\" aria-label=\"Gender\" id=\"AddiGender-'+i+'\" name=\"AddiGender[]\">'+\r\n          '    <option value=\"0\" >Select...</option>'+\r\n          '    <option value=\"F\">Female</option>'+\r\n          '    <option value=\"M\">Male</option>'+\r\n          '</select>'+\r\n          '</div>\\n'+\r\n          '<div class=\"col-lg-6\">\\n' +\r\n          '  <label for=\"AddiAge-'+i+'\" class=\"form-label\">Age</label>\\n' +\r\n          '  <input type=\"text\" id=\"AddiAge-'+i+'\" class=\"form-control mb-2\" placeholder=\"Enter Age\"  name=\"AddiAge[]\" required  value=\"'+additaments['age']+'\">\\n' +\r\n          '</div>\\n' +\r\n          ' <div class=\"col-md-6\">\\n' +\r\n          '  <label for=\"AddiRelation-'+i+'\" class=\"form-label\">Relationship</label>'+\r\n          '  <select class=\"form-select mb-2\" aria-label=\"AddiRelation\" id=\"AddiRelation-'+i+'\" name=\"AddiRelation[]\"  value=\"'+additaments['retalionship']+'\">'+\r\n          '    <option value=\"0\">Relation</option>'+\r\n          '    <option value=\"C\">Children</option>'+\r\n          '    <option value=\"S\">Stepson</option>'+\r\n          '    <option value=\"G\">Grandson</option>'+\r\n          '</select>'+\r\n          ' </div>\\n' +\r\n          ' <div class=\"col-md-6\" style=\"display: flex; justify-content: flex-end;\">\\n' +\r\n          '    <button type=\"button\" id=\"'+i+'\" class=\"btn btn-danger removeItemAdditaments\" title=\"Delete\"><i class=\"ri-close-circle-line\"></i></button>\\n' +\r\n          ' </div>\\n' +\r\n          '</div>';\r\n      div.append(element);\r\n      document.getElementById(\"AddiGender-\"+i+\"\").value = additaments['gender'];\r\n      document.getElementById(\"AddiRelation-\"+i+\"\").value = additaments['retalionship'];\r\n    },\r\n    getBenficiaries() {\r\n      let nameValues = [];\r\n      let lastValues = [];\r\n      let phoneValues = [];\r\n      let addressValues = [];\r\n      let stateValues = [];\r\n      let postalValues = [];\r\n      let relationValues = [];\r\n      let ageValues = [];\r\n      let values = [];\r\n\r\n      let benFirstName = document.querySelectorAll(\"input[name='benFirstName[]']\");\r\n      for (let i = 0; i < benFirstName.length; i++) {\r\n        nameValues.push(benFirstName[i].value);\r\n      }\r\n\r\n      let benLastName = document.querySelectorAll(\"input[name='benLastName[]']\");\r\n      for (let i = 0; i < benLastName.length; i++) {\r\n        lastValues.push(benLastName[i].value);\r\n      }\r\n\r\n      let benPhone = document.querySelectorAll(\"input[name='benPhone[]']\");\r\n      for (let i = 0; i < benPhone.length; i++) {\r\n        phoneValues.push(benPhone[i].value);\r\n      }\r\n\r\n      let benAddress = document.querySelectorAll(\"input[name='benAddress[]']\");\r\n      for (let i = 0; i < benAddress.length; i++) {\r\n        addressValues.push(benAddress[i].value);\r\n      }\r\n\r\n      let benState = document.querySelectorAll(\"input[name='benState[]']\");\r\n      for (let i = 0; i < benState.length; i++) {\r\n        stateValues.push(benState[i].value);\r\n      }\r\n\r\n      let benPostalCode = document.querySelectorAll(\"input[name='benPostalCode[]']\");\r\n      for (let i = 0; i < benPostalCode.length; i++) {\r\n        postalValues.push(benPostalCode[i].value);\r\n      }\r\n\r\n      let benRelation = document.querySelectorAll(\"input[name='benRelation[]']\");\r\n      for (let i = 0; i < benRelation.length; i++) {\r\n        relationValues.push(benRelation[i].value);\r\n      }\r\n\r\n      let benAge = document.querySelectorAll(\"input[name='benAge[]']\");\r\n      for (let i = 0; i < benAge.length; i++) {\r\n        ageValues.push(benAge[i].value);\r\n      }\r\n\r\n      let i;\r\n      for (i = 0; i < nameValues.length; i++) {\r\n        values.push({'firstName': nameValues[i], 'lastName': lastValues[i], 'phoneNumber': phoneValues[i],\r\n          'address': addressValues[i], 'state': stateValues[i], 'postalCode': postalValues[i], 'relationship': relationValues[i],\r\n          'age': ageValues[i]});\r\n      }\r\n      return values;\r\n    },\r\n    getEmergency() {\r\n      let nameValues = [];\r\n      let lastValues = [];\r\n      let phoneValues = [];\r\n      let addressValues = [];\r\n      let stateValues = [];\r\n      let postalValues = [];\r\n      let relationValues = [];\r\n      let ageValues = [];\r\n      let values = [];\r\n\r\n      let eConFirstName = document.querySelectorAll(\"input[name='eConFirstName[]']\");\r\n      for (let i = 0; i < eConFirstName.length; i++) {\r\n        nameValues.push(eConFirstName[i].value);\r\n      }\r\n\r\n      let eConLastName = document.querySelectorAll(\"input[name='eConLastName[]']\");\r\n      for (let i = 0; i < eConLastName.length; i++) {\r\n        lastValues.push(eConLastName[i].value);\r\n      }\r\n\r\n      let eConPhone = document.querySelectorAll(\"input[name='eConPhone[]']\");\r\n      for (let i = 0; i < eConPhone.length; i++) {\r\n        phoneValues.push(eConPhone[i].value);\r\n      }\r\n\r\n      let eConAddress = document.querySelectorAll(\"input[name='eConAddress[]']\");\r\n      for (let i = 0; i < eConAddress.length; i++) {\r\n        addressValues.push(eConAddress[i].value);\r\n      }\r\n\r\n      let eConState = document.querySelectorAll(\"input[name='eConState[]']\");\r\n      for (let i = 0; i < eConState.length; i++) {\r\n        stateValues.push(eConState[i].value);\r\n      }\r\n\r\n      let eConPostalCode = document.querySelectorAll(\"input[name='eConPostalCode[]']\");\r\n      for (let i = 0; i < eConPostalCode.length; i++) {\r\n        postalValues.push(eConPostalCode[i].value);\r\n      }\r\n\r\n      let eConRelation = document.querySelectorAll(\"input[name='eConRelation[]']\");\r\n      for (let i = 0; i < eConRelation.length; i++) {\r\n        relationValues.push(eConRelation[i].value);\r\n      }\r\n\r\n      let eConAge = document.querySelectorAll(\"input[name='eConAge[]']\");\r\n      for (let i = 0; i < eConAge.length; i++) {\r\n        ageValues.push(eConAge[i].value);\r\n      }\r\n\r\n      let i;\r\n      for (i = 0; i < nameValues.length; i++) {\r\n        values.push({'firstName':  nameValues[i], 'lastName':  lastValues[i], 'phoneNumber':  phoneValues[i], 'address':  addressValues[i],\r\n          'state':  stateValues[i], 'postalCode':  postalValues[i], 'relationship':  relationValues[i], 'age':  ageValues[i]});\r\n      }\r\n      return values;\r\n    },\r\n    getAddedChilds() {\r\n\r\n      let nameValues = [];\r\n      let lastValues = [];\r\n      let genderValues = [];\r\n      let ageValues = [];\r\n      let relationValues = [];\r\n      let values = [];\r\n\r\n      let eConFirstName = document.querySelectorAll(\"input[name='AddiFirstName[]']\");\r\n      for (let i = 0; i < eConFirstName.length; i++) {\r\n        nameValues.push(eConFirstName[i].value);\r\n      }\r\n\r\n      let eConLastName = document.querySelectorAll(\"input[name='AddiLastName[]']\");\r\n      for (let i = 0; i < eConLastName.length; i++) {\r\n        lastValues.push(eConLastName[i].value);\r\n      }\r\n\r\n      let AddiGender = document.querySelectorAll(\"select[name='AddiGender[]']\");\r\n      for (let i = 0; i < AddiGender.length; i++) {\r\n        genderValues.push(AddiGender[i].value);\r\n      }\r\n\r\n      let AddiAge = document.querySelectorAll(\"input[name='AddiAge[]']\");\r\n      for (let i = 0; i < AddiAge.length; i++) {\r\n        ageValues.push(AddiAge[i].value);\r\n      }\r\n\r\n      let AddiRelation = document.querySelectorAll(\"select[name='AddiRelation[]']\");\r\n      for (let i = 0; i < AddiRelation.length; i++) {\r\n        relationValues.push(AddiRelation[i].value);\r\n      }\r\n\r\n      let i;\r\n      for (i = 0; i < nameValues.length; i++) {\r\n        values.push({'firstName':  nameValues[i], 'lastName':  lastValues[i], 'gender': genderValues[i], 'age': ageValues[i],\r\n          'retalionship': relationValues[i]});\r\n      }\r\n      return values;\r\n    },\r\n    setClientData(clientInfo){\r\n\r\n      this.clientData.email=clientInfo.email;\r\n      this.clientData.firstName=clientInfo.firstName;\r\n      this.clientData.lastName=clientInfo.lastName;\r\n      this.clientData.language=clientInfo.language;\r\n      this.clientData.status=clientInfo.status;\r\n      this.clientData.phoneNumber=clientInfo.phoneNumber;\r\n      this.clientData.gender=clientInfo.gender;\r\n      this.clientData.age=clientInfo.age;\r\n      this.clientData.type=(clientInfo.type !== '') ? clientInfo.type: clientInfo.leadType;\r\n      this.clientData.city=clientInfo.city;\r\n      this.clientData.departmentID=clientInfo.departmentID;\r\n      this.clientData.leadType= clientInfo.leadType;\r\n      this.clientData.birthday= this.formatDate(clientInfo.dateOfBirth, 'DD MMM, YYYY');\r\n      this.clientData.interview= this.formatDate(clientInfo.interviewDate, 'MMMM D, YYYY H:mm A');\r\n      this.clientData.address=clientInfo.address;\r\n      this.clientData.state=clientInfo.state;\r\n      this.clientData.country=clientInfo.country;\r\n      this.clientData.postalCode=clientInfo.postalCode;\r\n      this.clientData.agentNumber=clientInfo.agentNumber;\r\n      this.clientData.createdBy=clientInfo.createdBy;\r\n      this.clientData.insuranceLicense=clientInfo.isLicensed;\r\n    },\r\n    async getNotes (id = localStorage.getItem('selectedUser'), name) {\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userID: localStorage.getItem('id'),\r\n        agentID: id,\r\n        clientID: id,\r\n      }\r\n      localStorage.setItem('selectedUserName', name)\r\n      localStorage.setItem('selectedUser', id)\r\n\r\n      let url = '';\r\n      url = '/api/client/getClientNotes';\r\n\r\n      await axios\r\n          .post(url, data)\r\n          .then(response => {\r\n            this.notesData = response.data;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n              Swal.fire(\"Oops!\", \"Notes could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async getProspectStatus(id) {\r\n\r\n      localStorage.setItem('selectedUser', id)\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: this.data.searchValues,\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n        isProspect: 1,\r\n      }\r\n\r\n      await axios\r\n          .post('/api/client/clientStatus', data)\r\n          .then(response => {\r\n            this.prospectStatusList = response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if (error.response.data.detail === 'Your session is expired!') {\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async moveClient() {\r\n\r\n      let client = localStorage.getItem('selectedUser');\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: this.data.searchValues,\r\n        userEmail: localStorage.getItem('email'),\r\n        client: client,\r\n        status: document.getElementById('moveStatus').value,\r\n        isProspect: 1,\r\n      }\r\n\r\n      await axios\r\n          .put('/api/client/moveClient', data)\r\n          .then(async response => {\r\n            document.getElementById('closeMove').click();\r\n            if(response.status === 200){\r\n              await this.updateClientList();\r\n\r\n              await Swal.fire({\r\n                position: \"top-end\",\r\n                icon: \"success\",\r\n                title: \"Your Client was moved to Prospect List\",\r\n                showConfirmButton: false,\r\n                timer: 5000,\r\n              });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if (error.response.data.detail === 'Your session is expired!') {\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    filterStatus(status){\r\n      var statusButton= document.getElementById(status);\r\n      statusButton.click();\r\n    },\r\n    deleteClient(ID) {\r\n      const swalWithBootstrapButtons = Swal.mixin({\r\n        customClass: {\r\n          confirmButton: \"btn btn-danger ml-2\",\r\n          cancelButton: \"btn btn-success\",\r\n        },\r\n        buttonsStyling: false,\r\n      });\r\n      localStorage.setItem('selectedUser', ID)\r\n      swalWithBootstrapButtons\r\n          .fire({\r\n            title: \"Are you sure?\",\r\n            text: \"You won't be able to revert this!\",\r\n            icon: \"warning\",\r\n            confirmButtonText: \"Yes, delete it!\",\r\n            cancelButtonText: \"No, cancel!\",\r\n            showCancelButton: true,\r\n          })\r\n          .then((result) => {\r\n            if (result.value) {\r\n\r\n              const data = {\r\n                token: localStorage.getItem('jwt'),\r\n                userID: localStorage.getItem('id'),\r\n                userName: localStorage.getItem('firstName') + ' ' + localStorage.getItem('lastname'),\r\n                userEmail: localStorage.getItem('email'),\r\n                agentID: localStorage.getItem('selectedUser')\r\n              }\r\n\r\n              axios\r\n                  .put('/api/client/delete', data)\r\n                  .then(async response => {\r\n                    if (response) {\r\n                      await this.updateClientList()\r\n                      await swalWithBootstrapButtons.fire(\r\n                          \"Deleted!\",\r\n                          \"Client has been deleted.\",\r\n                          \"success\"\r\n                      );\r\n                    }\r\n                  })\r\n                  .catch(async error => {\r\n                    if (error.response) {\r\n                      let list = '';\r\n                      for (const property in error.response.data) {\r\n                        this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                        list += '\\n' + '<b>' + error.response.data[property] + '</b>';\r\n                      }\r\n\r\n                      await Swal.fire({\r\n                        title: \"Please check the following: \" + list,\r\n                        icon: 'warning',\r\n                        confirmButtonClass: \"btn btn-info\",\r\n                        buttonsStyling: false,\r\n                        showCloseButton: true,\r\n                      });\r\n\r\n                    } else if (error.message) {\r\n                      this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n                    }\r\n                  })\r\n            } else if (\r\n                /* Read more about handling dismissals below */\r\n                result.dismiss === Swal.DismissReason.cancel\r\n            ) {\r\n              swalWithBootstrapButtons.fire(\r\n                  \"Cancelled\",\r\n                  \"Client is in a safe place :)\",\r\n                  \"error\"\r\n              );\r\n            }\r\n          });\r\n    },\r\n    handleFocus(e){\r\n      e.target.setAttribute(\"autocomplete\", \"nope\");\r\n    },\r\n    getMapsLink(){\r\n      let link = 'https://maps.google.com/?q='\r\n      let clientData = this.clientData;\r\n      if (clientData.address.length > 0){\r\n        link += '+'+this.clientData.address\r\n      }\r\n      if (clientData.postalCode.length > 0){\r\n        link += '+'+clientData.postalCode\r\n      }\r\n      if (clientData.city.length > 0){\r\n        link += '+'+clientData.city\r\n      }\r\n      if (clientData.state.length > 0){\r\n        link += '+'+clientData.state\r\n      }\r\n\r\n      if(link !== 'https://maps.google.com/?q='){\r\n        document.getElementById(\"gMapsLink\").href = link;\r\n      } else {\r\n        document.getElementById(\"gMapsLink\").href = '#';\r\n      }\r\n\r\n    },\r\n    parseFile(){\r\n      var allowedExtensions = /\\.(csv|pdf|jpg|png|jpeg)$/i;\r\n      if (allowedExtensions.exec(this.file.name)) {\r\n          console.log('yes')\r\n      } else {\r\n        Swal.fire({\r\n          title: \"File extension not supported!\",\r\n          icon: 'warning',\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    async changeType(){\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n        isProspect: document.getElementById('isProspect').value,\r\n        deleted: 0,\r\n      }\r\n\r\n      await axios\r\n          .post('/api/client/clientStatus', data)\r\n          .then(response => {\r\n            this.statusList = response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if (error.response.data.detail === 'Your session is expired!') {\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n\r\n      await axios\r\n          .post('/api/client/clientTypes', data)\r\n          .then(response => {\r\n            this.typeList = response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if (error.response.data.detail === 'Your session is expired!') {\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async uploadFile(){\r\n\r\n      this.errors = []\r\n\r\n      if (document.getElementById('uploadLanguage').value === '') {\r\n        this.errors.push('Language is required.');\r\n      }\r\n\r\n      if (document.getElementById('uploadStatus').value === '') {\r\n        this.errors.push('Status is required.');\r\n      }\r\n\r\n      if (document.getElementById('uploadType').value === '') {\r\n        this.errors.push('Source is required.');\r\n      }\r\n\r\n      if (this.content.length === 0) {\r\n        this.errors.push('Please, upload and process your .csv file.');\r\n      }\r\n\r\n      if(this.errors.length === 0){\r\n        const data = {\r\n          token: localStorage.getItem('jwt'),\r\n          userEmail: localStorage.getItem('email'),\r\n          userID: localStorage.getItem('id'),\r\n          listOfData: this.content,\r\n          uploadTo:  localStorage.getItem('firstName') + ' ' + localStorage.getItem('lastname')\r\n              + ' | ' +localStorage.getItem('email'),\r\n          isProspect: 0,\r\n          language: document.getElementById('uploadLanguage').value,\r\n          status: document.getElementById('uploadStatus').value,\r\n          source: document.getElementById('uploadType').value,\r\n          listType: 1,\r\n        }\r\n\r\n        await axios\r\n            .post('/api/client/uploadList', data)\r\n            .then(async response => {\r\n              if (response.status === 200) {\r\n                await Swal.fire({\r\n                  icon: 'success',\r\n                  title: 'Success',\r\n                  text: 'Uploaded successfully!'\r\n                });\r\n              }\r\n              setTimeout(function() {\r\n                location.reload()\r\n              }, 2000);\r\n            })\r\n            .catch(async error => {\r\n              if (error.response) {\r\n\r\n                let list = '';\r\n                for (const property in error.response.data) {\r\n                  this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                  list += '\\n' + '<b>' + error.response.data[property] + '</b>';\r\n                }\r\n\r\n                await Swal.fire({\r\n                  title: \"Please check the following: \" + list,\r\n                  icon: 'warning',\r\n                  confirmButtonClass: \"btn btn-info\",\r\n                  buttonsStyling: false,\r\n                  showCloseButton: true,\r\n                });\r\n\r\n              } else if (error.message) {\r\n                this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n              }\r\n            })\r\n      }else{\r\n        let list = '';\r\n        for (let i = 0; i < this.errors.length; i++)\r\n          list += '\\n' + '<b>' + this.errors[i]+ '</b>';\r\n\r\n        await Swal.fire({\r\n          title: \"Please complete the form! \" + list,\r\n          icon: 'warning',\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    compare (o1, o2){\r\n      for(let p in o1){\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if(o1.hasOwnProperty(p)){\r\n          if(o1[p] !== o2[p]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      for(let p in o2){\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if(o2.hasOwnProperty(p)){\r\n          if(o1[p] !== o2[p]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n    deleteRecord(ele){\r\n      ele.target.parentElement.parentElement.remove();\r\n    },\r\n    viewUserGroup(request){\r\n      const currentRole = jwt_decode(localStorage.getItem('jwt'))\r\n      return currentRole.userGroup.includes(request)\r\n    },\r\n    async getSMS (id = localStorage.getItem('selectedUser'), name) {\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userID: localStorage.getItem('id'),\r\n        agentID: id,\r\n        clientID: id,\r\n      }\r\n\r\n      localStorage.setItem('selectedUserName', name)\r\n      localStorage.setItem('selectedUser', id)\r\n\r\n      let url = '';\r\n      url = '/api/client/getSMSConversation';\r\n\r\n      await axios\r\n          .post(url, data)\r\n          .then(response => {\r\n            this.messagesData = response.data;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n              Swal.fire(\"Oops!\", \"Notes could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async searchAgents() {\r\n      let typeAhead = document.getElementById('typeahead_id')\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValue: (typeAhead != null && typeof(typeAhead) != 'undefined' ) ? typeAhead.value : [],\r\n        condition: 9\r\n      }\r\n\r\n      if(data['searchValue'].length > 3) {\r\n        await axios\r\n            .post('/api/userFinder', data)\r\n            .then(async response => {\r\n              this.itemsSearch = response.data;\r\n            })\r\n            .catch(async error => {\r\n              if (error.response) {\r\n                let list = '';\r\n                for (const property in error.response.data) {\r\n                  this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                  list += '\\n' + '<b>' + error.response.data[property] + '</b>';\r\n                }\r\n\r\n                await Swal.fire({\r\n                  title: \"Please check the following: \" + list,\r\n                  icon: 'warning',\r\n                  confirmButtonClass: \"btn btn-info\",\r\n                  buttonsStyling: false,\r\n                  showCloseButton: true,\r\n                });\r\n\r\n              } else if (error.message) {\r\n                this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n              }\r\n            })\r\n      }\r\n\r\n\r\n    },\r\n    viewPermission(request) {\r\n      const currentRole = jwt_decode(localStorage.getItem('jwt'))\r\n      return currentRole.vueViews.includes(request)\r\n    },\r\n    async getFiles (id) {\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        ID: id,\r\n        isClient: 1\r\n      }\r\n\r\n      await axios\r\n          .post('/api/comm/getFiles', data)\r\n          .then(response => {\r\n            this.fileList = response.data;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Something was wrong, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async getEcontacts(){\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        isProspect: 0,\r\n        userEmail: localStorage.getItem('email'),\r\n        clientID: localStorage.getItem('selectedUser'),\r\n        userID: localStorage.getItem('id'),\r\n      }\r\n\r\n      await axios\r\n          .post('/api/client/getecontacts', data)\r\n          .then(response => {\r\n            this.eContactlist = []\r\n            this.eContactlist = response.data;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n              Swal.fire(\"Oops!\", \"Departments could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    async downloadFile(url) {\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = url.split('/').pop()\r\n      a.click()\r\n    },\r\n    reset: function() {\r\n      this.image = null;\r\n      this.preview = null;\r\n      this.image_list = [];\r\n      this.preview_list = [];\r\n    },\r\n    onAddFile(event) {\r\n      console.log('onAdd: ', event.affectedFiles);\r\n      this.uploadFiles= event.newState;\r\n    },\r\n    onRemoveFile(event) {\r\n      console.log('onRemove: ', event.affectedFiles);\r\n      this.uploadFiles= event.newState;\r\n    },\r\n    refreshContacts() {\r\n      this.getEcontacts();\r\n    },\r\n  },\r\n  async mounted() {\r\n\r\n    let field = 'n';\r\n    let url = window.location.href;\r\n\r\n    const queryString = window.location.search;\r\n    const urlParams = new URLSearchParams(queryString);\r\n    const status = urlParams.get(field)\r\n\r\n    let typeAhead = document.getElementById('typeahead_id')\r\n\r\n    const data = {\r\n      token: localStorage.getItem('jwt'),\r\n      searchValues: this.data.searchValues,\r\n      userEmail: localStorage.getItem('email'),\r\n      userID: localStorage.getItem('id'),\r\n      isProspect: 0,\r\n      deleted: 0,\r\n      agentSearch: (typeAhead != null && typeof(typeAhead) != 'undefined' ) ? typeAhead.value : []\r\n    }\r\n\r\n    await axios\r\n        .post('/api/listDepartments', data)\r\n        .then(response => {\r\n          this.departmentList=response.data\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n            Swal.fire(\"Oops!\", \"Departments could not be loaded, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n\r\n    await axios\r\n        .post('/api/client/clientStatus', data)\r\n        .then(response => {\r\n          this.statusList=response.data\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n\r\n            Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n\r\n    await axios\r\n        .post('/api/client/clientTypes', data)\r\n        .then(response => {\r\n          this.typeList = response.data\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n\r\n            Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n\r\n    if((url.indexOf('?' + field + '=') !== -1))\r\n      document.getElementById(status).click()\r\n    else\r\n      await axios\r\n          .post('/api/client/listClients', data)\r\n          .then(response => {\r\n            this.list=response.data\r\n            this.page = 1\r\n            this.setPages()\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              // for (const property in error.response.data) {\r\n              // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n              // }\r\n            } else if (error.message) {\r\n              this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n            }\r\n          })\r\n\r\n    const checkAll = document.getElementById(\"checkAll\");\r\n\r\n    if (checkAll) {\r\n      checkAll.onclick = function () {\r\n        var checkboxes = document.querySelectorAll(\r\n            '.form-check-all input[type=\"checkbox\"]'\r\n        );\r\n        if (checkAll.checked == true) {\r\n          checkboxes.forEach(function (checkbox) {\r\n            checkbox.checked = true;\r\n            checkbox.closest(\"tr\").classList.add(\"table-active\");\r\n          });\r\n        } else {\r\n          checkboxes.forEach(function (checkbox) {\r\n            checkbox.checked = false;\r\n            checkbox.closest(\"tr\").classList.remove(\"table-active\");\r\n          });\r\n        }\r\n      };\r\n    }\r\n\r\n    function addEvent(parent, evt, selector, handler) {\r\n      parent.addEventListener(evt, function(event) {\r\n        if (event.target.matches(selector + ', ' + selector + ' *')) {\r\n          handler.apply(event.target.closest(selector), arguments);\r\n        }\r\n      }, false);\r\n    }\r\n\r\n    addEvent(document, 'click', 'button.removeItemBen', function() {\r\n      let button_id = this.id;\r\n      document.getElementById('rowBen' + button_id).remove();\r\n    });\r\n    addEvent(document, 'click', 'button.removeItemEcon', function() {\r\n      let button_id = this.id;\r\n      document.getElementById('rowEcon' + button_id).remove()\r\n    });\r\n    addEvent(document, 'click', 'button.removeItemAdditaments', function() {\r\n      let button_id = this.id;\r\n      document.getElementById('rowAdditaments' + button_id).remove()\r\n    });\r\n\r\n    // check if some elements shot be visible for agents\r\n    this.agentVisible = !!(this.viewUserGroup('SUPER_ADMIN_GROUP') || this.viewUserGroup('ADMIN_GROUP'));\r\n\r\n    document.querySelectorAll(\".checkout-tab\").forEach(function (form) {\r\n      // next tab\r\n      form.querySelectorAll(\".nexttab\").forEach(function (nextButton) {\r\n        var tabEl = form.querySelectorAll('button[data-bs-toggle=\"pill\"]');\r\n        tabEl.forEach(function (item) {\r\n          item.addEventListener(\"show.bs.tab\", function (event) {\r\n            event.target.classList.add(\"done\");\r\n          });\r\n        });\r\n        nextButton.addEventListener(\"click\", function () {\r\n          var nextTab = nextButton.getAttribute(\"data-nexttab\");\r\n          document.getElementById(nextTab).click();\r\n        });\r\n      });\r\n\r\n      //Pervies tab\r\n      form.querySelectorAll(\".previestab\").forEach(function (prevButton) {\r\n        prevButton.addEventListener(\"click\", function () {\r\n          var prevTab = prevButton.getAttribute(\"data-previous\");\r\n          var totalDone = prevButton\r\n              .closest(\"form\")\r\n              .querySelectorAll(\".custom-nav .done\").length;\r\n          for (var i = totalDone - 1; i < totalDone; i++) {\r\n            prevButton.closest(\"form\").querySelectorAll(\".custom-nav .done\")[i]\r\n                ? prevButton\r\n                    .closest(\"form\")\r\n                    .querySelectorAll(\".custom-nav .done\")[i].classList.remove(\"done\")\r\n                : \"\";\r\n          }\r\n          document.getElementById(prevTab).click();\r\n        });\r\n      });\r\n\r\n      // Step number click\r\n      var tabButtons = form.querySelectorAll('button[data-bs-toggle=\"pill\"]');\r\n      tabButtons.forEach(function (button, i) {\r\n        button.setAttribute(\"data-position\", i);\r\n        button.addEventListener(\"click\", function () {\r\n          form.querySelectorAll(\".custom-nav .done\").length > 0\r\n              ? form\r\n                  .querySelectorAll(\".custom-nav .done\")\r\n                  .forEach(function (doneTab) {\r\n                    doneTab.classList.remove(\"done\");\r\n                  })\r\n              : \"\";\r\n          for (var j = 0; j <= i; j++) {\r\n            tabButtons[j].classList.contains(\"active\")\r\n                ? tabButtons[j].classList.remove(\"done\")\r\n                : tabButtons[j].classList.add(\"done\");\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n  },\r\n  computed: {\r\n    displayedPosts() {\r\n      return this.paginate(this.list);\r\n    },\r\n    resultQuery() {\r\n      if (this.data.searchValues.keyword.length >= 3) {\r\n        const search = this.data.searchValues.keyword.toLowerCase();\r\n        return this.displayedPosts.filter((data) => {\r\n          return (\r\n              data.address.toLowerCase().includes(search) ||\r\n              data.city.toLowerCase().includes(search) ||\r\n              data.policyNumber.toLowerCase().includes(search) ||\r\n              data.email.toLowerCase().includes(search) ||\r\n              data.phoneNumber.toLowerCase().includes(search) ||\r\n              data.firstName.toLowerCase().includes(search) ||\r\n              data.lastName.toLowerCase().includes(search) ||\r\n              data.FullName.toLowerCase().includes(search) ||\r\n              data.postalCode.toLowerCase().includes(search)\r\n          );\r\n        });\r\n      } else {\r\n        return this.displayedPosts;\r\n      }\r\n    },\r\n  },\r\n  setup() {\r\n    let files = ref([]);\r\n    let dropzoneFile = ref(\"\");\r\n    const drop = (e) => {\r\n      dropzoneFile.value = e.dataTransfer.files[0];\r\n      files.value.push(dropzoneFile.value);\r\n      console.log(files)\r\n    };\r\n    const selectedFile = (  ) => {\r\n      dropzoneFile.value = document.getElementById('listFile').files[0];\r\n      files.value.push(dropzoneFile.value);\r\n    };\r\n    watch(\r\n        () => [...files.value],\r\n        (currentValue) => {\r\n          return currentValue;\r\n        }\r\n    );\r\n    return {\r\n      dropzoneFile,\r\n      drop,\r\n      selectedFile,\r\n      v$: useVuelidate(),\r\n      files\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.row-spacer{\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\"/>\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\" id=\"leadsList\">\r\n          <div class=\"card-header border-0\">\r\n            <div class=\"row g-4 align-items-center\">\r\n              <div class=\"col-sm-3\">\r\n                <div class=\"search-box\">\r\n                  <input\r\n                      type=\"text\"\r\n                      class=\"form-control search\"\r\n                      placeholder=\"Search for...\"\r\n                      title=\"Search by (Phone number, City, Postal code, Name, Last name, Full Name, Address, State)\"\r\n                      v-model=\"this.data.searchValues.keyword\"\r\n                      @change=\"this.data.searchValues.keyword.length >= 3 ? updateClientList(): ''\"\r\n                      v-on:keyup.enter=\"this.data.searchValues.keyword === '' ? updateClientList() : ''\"\r\n                  />\r\n                  <i class=\"ri-search-line search-icon\"></i>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-auto ms-auto\">\r\n                <div class=\"hstack gap-2\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-6\" style=\"margin-top: 5px;\">\r\n                      <div class=\"d-flex align-items-center gap-2\">\r\n                        <span class=\"text-muted flex-shrink-0\">Sort by: </span>\r\n\r\n                        <Multiselect class=\"form-control\"\r\n                                     style=\"width:150px;padding: 0px;\"\r\n                                     @focus=\"handleFocus\"\r\n                                     v-model=\"this.data.searchValues.sortBy\"\r\n                                     :close-on-select=\"true\"\r\n                                     :searchable=\"true\"\r\n                                     :options=\"[\r\n                            { value: 'name', label: 'Name' },\r\n                            { value: 'lastName', label: 'Last Name' },\r\n                            { value: 'postalCode', label: 'Postal Code' },\r\n                            { value: 'modified', label: 'Modified On' },\r\n                            { value: 'created', label: 'created On' },\r\n                            ]\"\r\n                                     @select=\"updateClientList()\"\r\n                        />\r\n\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-md-6\" style=\"margin-top: 5px;\">\r\n                      <div class=\"d-flex align-items-center gap-2\">\r\n                        <span class=\"text-muted flex-shrink-0\">Order by: </span>\r\n\r\n                        <Multiselect class=\"form-control\"\r\n                                     style=\"width:150px;padding: 0px;\"\r\n                                     v-model=\"this.data.searchValues.orderBy\"\r\n                                     @focus=\"handleFocus\"\r\n                                     :close-on-select=\"true\"\r\n                                     :searchable=\"true\"\r\n                                     :options=\"[\r\n                            { value: 'ASC', label: 'Ascendance' },\r\n                            { value: 'DESC', label: 'Descendant' },\r\n                            ]\"\r\n                                     @select=\"updateClientList()\"\r\n                        />\r\n\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-5\" style=\"margin-top: 5px;\">\r\n                      <button type=\"button\" class=\"btn btn-soft-success float-end\" href=\"#open-filters\" data-bs-toggle=\"modal\">\r\n                        <i class=\"ri-filter-line align-bottom me-1\"></i> Filters\r\n                      </button>\r\n                    </div>\r\n                    <div class=\"col-md-5\" style=\"margin-top: 5px;\">\r\n                      <button type=\"button\" class=\"btn btn-soft-success float-end\" id=\"create-btn\" data-bs-toggle=\"modal\" href=\"#agentModal\" @click=\"addNewAgentModal\" style=\"white-space: nowrap;\">\r\n                        <i class=\"ri-add-line align-bottom me-1\"></i> Add Client\r\n                      </button>\r\n                    </div>\r\n                    <div class=\"col-md-2\" style=\"margin-top: 5px;\">\r\n                      <button\r\n                          type=\"button\"\r\n                          id=\"dropdownMenuLink1\"\r\n                          data-bs-toggle=\"dropdown\"\r\n                          aria-expanded=\"false\"\r\n                          class=\"btn btn-soft-info\"\r\n                      >\r\n                        <i class=\"ri-more-2-fill\"></i>\r\n                      </button>\r\n                      <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink1\">\r\n                        <li><a class=\"dropdown-item\" href=\"#uploadLeads\" data-bs-toggle=\"modal\">Upload Clients</a></li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Table Head -->\r\n          <ul\r\n              class=\"nav nav-tabs nav-tabs-custom nav-primary mb-3\"\r\n              role=\"tablist\">\r\n            <li class=\"nav-item\">\r\n              <a\r\n                  class=\"nav-link active All py-3\"\r\n                  data-bs-toggle=\"tab\"\r\n                  id=\"All\"\r\n                  href=\"#home1\"\r\n                  role=\"tab\"\r\n                  aria-selected=\"true\"\r\n                  @click=\"updateClientList(0)\"\r\n              >\r\n                <i class=\"ri-file-search-line me-1 align-bottom\"></i> All\r\n              </a>\r\n            </li>\r\n            <li class=\"nav-item\" v-for=\"(data, index) of statusList\" :key=\"index\">\r\n              <a\r\n                  class=\"nav-link py-3 \" v-bind:class=\"data.name\"\r\n                  data-bs-toggle=\"tab\"\r\n                  v-bind:id=\"data.name\"\r\n                  v-bind:href=\"'#'+data.name\"\r\n                  role=\"tab\"\r\n                  aria-selected=\"false\"\r\n                  @click=\"updateClientList(data.statusID)\"\r\n              >\r\n                <i class=\"me-1 align-bottom\"></i>\r\n                {{ data.name }}\r\n              </a>\r\n            </li>\r\n          </ul>\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table align-middle table-nowrap mb-0\">\r\n              <thead class=\"table-light\">\r\n              <tr>\r\n                <th scope=\"col\" style=\"width: 50px\">\r\n                  <div class=\"form-check\">\r\n                    <input\r\n                        class=\"form-check-input\"\r\n                        type=\"checkbox\"\r\n                        id=\"checkAll\"\r\n                        value=\"option\"\r\n                    />\r\n                  </div>\r\n                </th>\r\n                <th scope=\"col\">Name</th>\r\n                <th scope=\"col\" v-if=\"agentVisible\">Department</th>\r\n                <th scope=\"col\">Email</th>\r\n                <th scope=\"col\">Phone</th>\r\n                <th scope=\"col\">Create Date</th>\r\n                <th scope=\"col\" v-if=\"this.data.searchValues.status === '2'\">Appmnt D.</th>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Actions</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(data, index) of resultQuery\" :key=\"index\">\r\n                <td>\r\n                  <div class=\"form-check\">\r\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"cardtableCheck01\">\r\n                    <label class=\"form-check-label\" for=\"cardtableCheck01\"></label>\r\n                  </div>\r\n                </td>\r\n                <td>{{ data.firstName }} {{ data.lastName }}</td>\r\n                <td v-if=\"agentVisible\">{{ data.departmentName }}</td>\r\n                <td>{{ data.email }}</td>\r\n                <td>{{ formatPhone(data.phoneNumber) }}</td>\r\n                <td> {{ formatDate(data.createdOn, 'MMMM Do YYYY, h:mmA') }} </td>\r\n                <td v-if=\"this.data.searchValues.status === '2'\">{{ formatDate(data.interviewDate, 'MMMM Do YYYY, h:mmA')  }}</td>\r\n                <td><a href=\"javascript:void(0);\" v-bind:style=\"'color:'+data.colors\"  @click=\"filterStatus(data.statusName)\">{{ data.statusName}}</a></td>\r\n                <td>\r\n                  <ul class=\"list-inline hstack gap-2 mb-0\">\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"modal\" href=\"#agentModal\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Edit\" @click=\"getClientInfo(data.ID)\">\r\n                      <a class=\"edit-item-btn\" href=\"javascript:void(0);\"><i class=\"ri-pencil-fill align-bottom text-muted\"></i></a>\r\n                    </li>\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"modal\" href=\"#open-messages\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Messages\" v-if=\"agentVisible\">\r\n                      <a href=\"javascript:void(0);\" class=\"text-muted d-inline-block\"  @click=\"getSMS(data.ID)\">\r\n                        <i class=\"ri-mail-send-line fs-16\"></i>\r\n                      </a>\r\n                    </li>\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"modal\" data-bs-trigger=\"hover\"  href=\"#changeStatus\"  data-bs-placement=\"top\" title=\"Update Status\" @click=\"getProspectStatus(data.ID)\">\r\n                      <a href=\"javascript:void(0);\" ><i class=\"ri-refresh-fill align-bottom text-muted\"></i></a>\r\n                    </li>\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"tooltip\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Delete\" @click=\"deleteClient(data.ID)\">\r\n                      <a class=\"remove-item-btn\" data-bs-toggle=\"modal\" href=\"javascript:void(0);\">\r\n                        <i class=\"ri-delete-bin-fill align-bottom text-muted\"></i>\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n            <div class=\"noresult\" v-if=\"list.length <= 0\">\r\n              <div class=\"text-center\">\r\n                <lottie\r\n                    class=\"avatar-xl\"\r\n                    colors=\"primary:#121331,secondary:#08a88a\"\r\n                    :options=\"defaultOptions\"\r\n                    :height=\"75\"\r\n                    :width=\"75\"\r\n                />\r\n                <h5 class=\"mt-2\">Sorry! No Result Found</h5>\r\n                <p class=\"text-muted mb-0\">\r\n                  We've searched and didn't find any\r\n                  client for you.\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div class=\"d-flex justify-content-end mt-3\" v-if=\"resultQuery.length >= 0\">\r\n            <div class=\"pagination-wrap hstack gap-2\">\r\n              <a\r\n                  class=\"page-item pagination-prev disabled\"\r\n                  href=\"#\"\r\n                  v-if=\"page !== 1\"\r\n                  @click=\"page--\"\r\n              >\r\n                Previous\r\n              </a>\r\n              <ul class=\"pagination listjs-pagination mb-0\">\r\n                <li\r\n                    :class=\"{\r\n                      active: pageNumber === page,\r\n                      disabled: pageNumber === '...',\r\n                    }\"\r\n                    v-for=\"(pageNumber, index) in pages.slice(\r\n                      page - 1,\r\n                      page + 5\r\n                    )\"\r\n                    :key=\"index\"\r\n                    @click=\"page = pageNumber\"\r\n                >\r\n                  <a class=\"page\" href=\"#\">{{ pageNumber }}</a>\r\n                </li>\r\n              </ul>\r\n              <a\r\n                  class=\"page-item pagination-next\"\r\n                  href=\"#\"\r\n                  @click=\"page++\"\r\n                  v-if=\"page < pages.length\"\r\n              >\r\n                Next\r\n              </a>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--end col-->\r\n    </div>\r\n    <!--end row-->\r\n\r\n    <!--  Add client modal  -->\r\n    <div class=\"modal zoomIn\" id=\"agentModal\" tabindex=\"-1\" aria-labelledby=\"agentModalLabel\" aria-hidden=\"true\" data-bs-focus=\"false\">\r\n      <div class=\"modal-dialog modal-dialog-centered modal-lg\" style=\"max-width: 1000px;\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header bg-light p-3\">\r\n            <h5 class=\"modal-title\" id=\"agentModalLabel\"></h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\r\n                    id=\"close-modal\"></button>\r\n          </div>\r\n          <form id=\"addform\" @submit.prevent=\"\" autocomplete=\"off\">\r\n            <div class=\"modal-body\">\r\n              <h6> <span style=\"color:red; font-size: 0.7em;\">Required fields (*)</span></h6>\r\n              <input type=\"hidden\" id=\"id\"/>\r\n              <div class=\"row g-3\">\r\n                <div class=\"col-lg-12\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-8\">\r\n                      <label for=\"editEmail\" class=\"form-label\">Email</label>\r\n                      <input type=\"text\" id=\"editEmail\" name=\"editEmail\" class=\"form-control mb-2 createEmail\" placeholder=\"Enter Email\"\r\n                             v-model=\"this.clientData.email\" autocomplete=\"off\">\r\n                      <div class=\"invalid-feedback\">\r\n                        This email is already in use.\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editCreatedBy\" class=\"form-label\">Created By</label>\r\n                      <input type=\"text\" id=\"editCreatedBy\" name=\"editCreatedBy\" class=\"form-control mb-2\" disabled v-model=\"this.clientData.createdBy\"  autocomplete=\"off\">\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editFirstName\" class=\"form-label\">First Name <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <input type=\"text\" id=\"editFirstName\" name=\"editFirstName\" class=\"form-control mb-2\" placeholder=\"Enter First Name\" v-model=\"this.clientData.firstName\" required  autocomplete=\"off\">\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editLastName\" class=\"form-label\">Last Name <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <input type=\"text\" id=\"editLastName\" name=\"editLastName\" class=\"form-control mb-2\" placeholder=\"Enter Last Name\" v-model=\"this.clientData.lastName\" required  autocomplete=\"off\">\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editGender\" class=\"form-label\"> Gender <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <br>\r\n                      <div class=\"form-check-success form-check-inline\" style=\"margin-top: 0.8em;\">\r\n                        <input class=\"form-check-input\" type=\"radio\" name=\"editGender\" id=\"editGender\" value=\"M\" v-model=\"this.clientData.gender\"/>\r\n                        <label class=\"form-check-label\" for=\"editGender\"> &nbsp; Male</label>\r\n                      </div>\r\n                      <div class=\"form-check-success form-check-inline\" style=\"margin-top: 0.8em;\">\r\n                        <input class=\"form-check-input\" type=\"radio\" name=\"editGender\" id=\"editGender2\" value=\"F\" v-model=\"this.clientData.gender\"/>\r\n                        <label class=\"form-check-label\" for=\"editGender2\"> &nbsp; Female</label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editLanguage\" class=\"form-label\">Language <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"editLanguage\" name=\"editLanguage\" v-model=\"this.clientData.language\" required>\r\n                        <option value=\"1\" selected>English</option>\r\n                        <option value=\"2\">Spanish</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editStatus\" class=\"form-label\">Status <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"editStatus\" name=\"editStatus\" v-model=\"this.clientData.status\">\r\n                        <option v-for=\"(status, statusIndex) of statusList\" :key=\"statusIndex\" v-bind:value=\"status.statusID\">{{ status.name }}</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editType\" class=\"form-label\">client Source <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"editType\" name=\"editType\" v-model=\"this.clientData.leadType\">\r\n                        <option v-for=\"(type, typeIndex) of typeList\" :key=\"typeIndex\" v-bind:value=\"type.name\">{{ type.name }}</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editPhoneNumber\" class=\"form-label\">Phone <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <input type=\"text\" id=\"editPhoneNumber\" name=\"editPhoneNumber\" class=\"form-control mb-2\" placeholder=\"Phone number\" required v-model=\"this.clientData.phoneNumber\"/>\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editDepartment\" class=\"form-label\">Department <span style=\"color:red; font-size: 0.7em;\">(*)</span></label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Department\" id=\"editDepartment\" name=\"editDepartment\"\r\n                              v-model=\"this.clientData.departmentID\" v-if=\"(departmentList.length > 1)\">\r\n                        <option v-for=\"(department, index) of departmentList\"  :key=\"index\"\r\n                                v-bind:value=\"department.departmentID\">{{ department.name }}\r\n                        </option>\r\n                      </select>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Department\" id=\"editDepartment\" name=\"editDepartment\"\r\n                              v-model=\"this.clientData.departmentID\" v-else>\r\n                        <option v-bind:value=\"departmentList.departmentID\">{{ departmentList.name }}</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editInterview\" class=\"form-label mb-2\">Interview</label>\r\n                      <flat-pickr\r\n                          v-model=\"this.clientData.interview\"\r\n                          :config=\"dateTimeConfig\"\r\n                          id=\"editInterview\"\r\n                          name=\"editInterview\"\r\n                          class=\"form-control\"\r\n                          data-provider=\"timepickr\"\r\n                          data-time-hrs=\"true\"\r\n                      ></flat-pickr>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-8\">\r\n                      <label for=\"editAddress\" class=\"form-label\">Address</label>&nbsp;<code><a href=\"#\" target=\"_blank\" id=\"gMapsLink\">Google Maps</a></code>\r\n                      <input type=\"text\" id=\"editAddress\" name=\"editAddress\" class=\"form-control mb-2\" placeholder=\"Enter Address\" required v-model=\"this.clientData.address\"/>\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editBirthdate\" class=\"form-label\"> Birthdate </label>\r\n                      <flat-pickr\r\n                          v-model=\"this.clientData.birthday\"\r\n                          :config=\"timeConfig\"\r\n                          class=\"form-control flatpickr-input\"\r\n                          id=\"editBirthdate\"\r\n                          name=\"editBirthdate\"\r\n                      ></flat-pickr>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-2\">\r\n                      <label for=\"editState\" class=\"form-label\">State</label>\r\n                      <input type=\"text\" id=\"editState\" name=\"editState\" class=\"form-control mb-2\" placeholder=\"Enter State\" required v-model=\"this.clientData.state\"/>\r\n                    </div>\r\n                    <div class=\"col-lg-3\">\r\n                      <label for=\"editCountry\" class=\"form-label\">Country</label>\r\n                      <input type=\"text\" id=\"editCountry\" name=\"editCountry\" class=\"form-control mb-2\" placeholder=\"Enter Country\" required v-model=\"this.clientData.country\"/>\r\n                    </div>\r\n                    <div class=\"col-lg-3\">\r\n                      <label for=\"editCity\" class=\"form-label\">City</label>\r\n                      <input type=\"text\" id=\"editCity\" name=\"editCity\" class=\"form-control mb-2\" placeholder=\"Enter City\" required v-model=\"this.clientData.city\"/>\r\n                    </div>\r\n                    <div class=\"col-lg-4\">\r\n                      <label for=\"editPostalCode\" class=\"form-label\">Postal code</label>\r\n                      <input type=\"text\" id=\"editPostalCode\" name=\"editPostalCode\" class=\"form-control mb-2\" placeholder=\"Enter Address\" required v-model=\"this.clientData.postalCode\"/>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\" v-if=\"this.openCreate === 1\">\r\n                    <div class=\"mt-4\">\r\n                      <label\r\n                          for=\"editNotes\"\r\n                          class=\"form-label text-muted text-uppercase fw-semibold\"\r\n                      >Notes</label>\r\n                      <textarea\r\n                          class=\"form-control alert alert-primary\"\r\n                          v-model=\"this.clientData.note\"\r\n                          id=\"editNotes\"\r\n                          name=\"editNotes\"\r\n                          placeholder=\"Notes\"\r\n                          rows=\"2\"\r\n                      ></textarea>\r\n                    </div>\r\n                  </div >\r\n                  <div class=\"row\" v-if=\"this.openCreate === 1\">\r\n                    <!-- Add beneficiaries -->\r\n                    <fieldset class=\"fieldset-style\">\r\n                      <legend class=\"legend-style\"><small style=\"font-size: 0.7em;\">Add Beneficiary <b>+</b></small> <span class=\"btn btn-success\" @click=\"addBeneficiary()\" style=\"float: right;\"><i class=\"ri-add-line\"></i></span>\r\n                        <hr></legend>\r\n                      <div class=\"form-group\">\r\n                        <div id=\"addBeneficiary\">\r\n                        </div>\r\n                      </div>\r\n                    </fieldset>\r\n\r\n                    <!-- Add Emergency contacts -->\r\n                    <fieldset class=\"fieldset-style\">\r\n                      <legend class=\"legend-style\"><small style=\"font-size: 0.7em;\">Emergency Contacts <b>+</b></small> <span class=\"btn btn-success\" @click=\"addEcontact()\" style=\"float: right;\"><i class=\"ri-add-line\"></i></span><hr></legend>\r\n                      <div class=\"form-group\">\r\n                        <form id=\"addEcontact\">\r\n                        </form>\r\n                      </div>\r\n                    </fieldset>\r\n\r\n                    <!-- Add Additaments -->\r\n                    <fieldset class=\"fieldset-style\">\r\n                      <legend class=\"legend-style\"><small style=\"font-size: 0.7em;\">Add Additaments <b>+</b></small> <span class=\"btn btn-success\" @click=\"addAdditaments()\" style=\"float: right;\"><i class=\"ri-add-line\"></i></span><hr></legend>\r\n                      <div class=\"form-group\">\r\n                        <form id=\"addAdditaments\">\r\n                        </form>\r\n                      </div>\r\n                    </fieldset>\r\n                  </div>\r\n\r\n                  <div class=\"row\" v-if=\"this.openCreate == 0\">\r\n                    <div class=\"row\">\r\n                      <div class=\"col-xl-12\" style=\"margin-top: 10px;\">\r\n                        <div class=\"card\">\r\n                          <div class=\"card-body checkout-tab\">\r\n                            <form action=\"#\">\r\n                              <div class=\"step-arrow-nav mt-n3 mx-n3 mb-3\">\r\n                                <ul class=\"nav nav-pills nav-justified custom-nav\" role=\"tablist\">\r\n                                  <li class=\"nav-item\" role=\"presentation\">\r\n                                    <button\r\n                                        class=\"nav-link fs-15 p-3 active\"\r\n                                        id=\"pills-bill-notes-tab\"\r\n                                        data-bs-toggle=\"pill\"\r\n                                        data-bs-target=\"#pills-pills-notes\"\r\n                                        type=\"button\"\r\n                                        role=\"tab\"\r\n                                        aria-controls=\"pills-pills-notes\"\r\n                                        aria-selected=\"true\"\r\n                                    >\r\n                                      <i\r\n                                          class=\"\r\n                                        ri-sticky-note-line\r\n                                        fs-16\r\n                                        p-2\r\n                                        bg-soft-primary\r\n                                        text-primary\r\n                                        rounded-circle\r\n                                        align-middle\r\n                                        me-2\r\n                                      \"\r\n                                      ></i>\r\n                                      Notes\r\n                                    </button>\r\n                                  </li>\r\n                                  <li class=\"nav-item\" role=\"presentation\">\r\n                                    <button\r\n                                        class=\"nav-link fs-15 p-3\"\r\n                                        id=\"pills-econtact\"\r\n                                        data-bs-toggle=\"pill\"\r\n                                        data-bs-target=\"#pills-econtact-tab\"\r\n                                        type=\"button\"\r\n                                        role=\"tab\"\r\n                                        aria-controls=\"pills-econtact-tab\"\r\n                                        aria-selected=\"false\"\r\n                                        @click=\"getEcontacts()\"\r\n                                    >\r\n                                      <i\r\n                                          class=\"\r\n                          ri-alarm-warning-line\r\n                          fs-16\r\n                          p-2\r\n                          bg-soft-primary\r\n                          text-primary\r\n                          rounded-circle\r\n                          align-middle\r\n                          me-2\r\n                        \"\r\n                                      ></i>\r\n                                      E. Contacts\r\n                                    </button>\r\n                                  </li>\r\n                                  <li class=\"nav-item\" role=\"presentation\">\r\n                                    <button\r\n                                        class=\"nav-link fs-15 p-3\"\r\n                                        id=\"pills-payment-tab\"\r\n                                        data-bs-toggle=\"pill\"\r\n                                        data-bs-target=\"#pills-payment\"\r\n                                        type=\"button\"\r\n                                        role=\"tab\"\r\n                                        aria-controls=\"pills-payment\"\r\n                                        aria-selected=\"false\"\r\n                                    >\r\n                                      <i\r\n                                          class=\"\r\n                                                ri-folder-upload-line\r\n                                                fs-16\r\n                                                p-2\r\n                                                bg-soft-primary\r\n                                                text-primary\r\n                                                rounded-circle\r\n                                                align-middle\r\n                                                me-2\r\n                                              \"\r\n                                      ></i>\r\n                                      Upload Files\r\n                                    </button>\r\n                                  </li>\r\n                                </ul>\r\n                              </div>\r\n\r\n                              <div class=\"tab-content\">\r\n                                <div\r\n                                    class=\"tab-pane fade show active\"\r\n                                    id=\"pills-pills-notes\"\r\n                                    role=\"tabpanel\"\r\n                                    aria-labelledby=\"pills-notes\"\r\n                                >\r\n                                  <div>\r\n                                    <div class=\"row\" id=\"editNoteOpen\">\r\n                                      <notes :dataList=\"notesData\" @onFire=\"getNotes()\" :idNumber=\"1\"> </notes>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                                <!-- end tab pane -->\r\n\r\n                                <div\r\n                                    class=\"tab-pane fade\"\r\n                                    id=\"pills-econtact-tab\"\r\n                                    role=\"tabpanel\"\r\n                                    aria-labelledby=\"pills-econtact\"\r\n                                >\r\n                                  <econtacts :eContactlist=\"eContactlist\" @eContactData=\"refreshContacts\"></econtacts>\r\n                                </div>\r\n                                <!-- end tab pane -->\r\n\r\n                                <div\r\n                                    class=\"tab-pane fade\"\r\n                                    id=\"pills-payment\"\r\n                                    role=\"tabpanel\"\r\n                                    aria-labelledby=\"pills-payment-tab\"\r\n                                >\r\n                                  <div>\r\n                                    <div class=\"col-12 text-center\">\r\n                                      <h1 class=\"mb-3\">Upload Files</h1>\r\n                                      <h6><b>Allowed Files:</b> <p>.jpg, .png, .docx, .xls, .jpeg, .pdf</p></h6>\r\n                                      <h6><b>Max. File Size:</b> <p>5 mb</p></h6>\r\n                                    </div>\r\n\r\n                                    <div class=\"col-md-12\">\r\n                                      <form enctype='multipart/form-data'>\r\n                                        <div class=\"form-group\">\r\n                                          <label for=\"uploadFiles\">Select Image</label>\r\n                                          <upload\r\n                                              :restrictions=\"{\r\n                                                 allowedExtensions: [ '.jpg', '.png', '.docx', '.xls', '.jpeg', '.pdf'],\r\n                                                 maxFileSize: 5000000\r\n                                             }\"\r\n                                              :auto-upload=\"false\"\r\n                                              :files=\"uploadFiles\"\r\n                                              @add=\"onAddFile\"\r\n                                              @remove=\"onRemoveFile\"\r\n                                              :multiple=\"true\"\r\n                                              :with-credentials=\"false\"\r\n                                              :save-url=\"'https://a3j63o3n9.dmbgroup.online/api/comm/uploadFile?id='+this.crmUserID+'&selectedUser='+this.crmSelectedUser+'&isClient='+1\"\r\n                                              :remove-url=\"'https://a3j63o3n9.dmbgroup.online/api/comm/uploadFile?id='+this.crmUserID+'&selectedUser='+this.crmSelectedUser+'&isClient='+1\"\r\n                                          />\r\n                                        </div>\r\n                                      </form>\r\n                                      <div class=\"table-responsive\" style=\"margin-top: 20px;\">\r\n                                        <button type=\"button\" class=\"btn btn-soft-success float-end\" @click=\"getFiles(this.crmSelectedUser)\"\r\n                                        style=\"margin-bottom: 10px;\"> Refresh File List </button>\r\n                                        <table class=\"table align-middle table-nowrap mb-0\">\r\n                                          <thead class=\"table-light\">\r\n                                          <tr>\r\n                                            <th scope=\"col\">File Name</th>\r\n                                            <th scope=\"col\">Created On</th>\r\n                                            <th scope=\"col\">Actions</th>\r\n                                          </tr>\r\n                                          </thead>\r\n                                          <tbody>\r\n                                          <tr v-for=\"(data, index) of this.fileList\" :key=\"index\">\r\n                                            <td>{{ data.fileName }}</td>\r\n                                            <td>{{ formatDate(data.createdOn, 'MMMM Do YYYY, h:mmA') }}</td>\r\n                                            <td>\r\n                                              <ul class=\"list-inline hstack gap-2 mb-0\">\r\n                                                <li class=\"list-inline-item\" data-bs-toggle=\"modal\" href=\"#agentModal\" data-bs-trigger=\"hover\"\r\n                                                    data-bs-placement=\"top\" title=\"Download\" @click=\"downloadFile(data.path)\">\r\n                                                  <a class=\"edit-item-btn\">\r\n                                                    <i class=\"ri-file-download-line align-bottom text-muted\"></i>\r\n                                                  </a>\r\n                                                </li>\r\n                                                <li class=\"list-inline-item\" data-bs-toggle=\"tooltip\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Delete\">\r\n                                                  <a class=\"remove-item-btn\" data-bs-toggle=\"modal\" href=\"javascript:void(0);\">\r\n                                                    <i class=\"ri-delete-bin-fill align-bottom text-muted\"></i>\r\n                                                  </a>\r\n                                                </li>\r\n                                              </ul>\r\n                                            </td>\r\n                                          </tr>\r\n                                          </tbody>\r\n                                        </table>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                                <!-- end tab pane -->\r\n                              </div>\r\n                              <!-- end tab content -->\r\n                            </form>\r\n                          </div>\r\n                          <!-- end card body -->\r\n                        </div>\r\n                        <!-- end card -->\r\n                      </div>\r\n                      <!-- end col -->\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <!--end col-->\r\n              </div>\r\n              <!--end row-->\r\n            </div>\r\n\r\n            <div class=\"modal-footer\">\r\n              <div class=\"hstack gap-2 justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-light\" id=\"closemodal\" data-bs-dismiss=\"modal\">Close </button>\r\n                <button type=\"submit\" class=\"btn btn-success\" id=\"add-btn\" @click=\"createClient\">Save </button>\r\n                <button type=\"button\" class=\"btn btn-success\" id=\"edit-btn\" @click=\"updateClient\">Update </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Filters Modal -->\r\n    <div id=\"open-filters\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\" data-bs-focus=\"false\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"myModalLabel\">Filters</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"> </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-12\">\r\n                <label for=\"filterKeyword\" class=\"form-label\">Keyword</label>\r\n                <input type=\"text\" id=\"filterKeyword\" name=\"filterKeyword\" class=\"form-control mb-2\" placeholder=\"Enter Keyword\" v-model=\"this.data.searchValues.keyword\">\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterType\" class=\"form-label\">Type</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"filterType\" name=\"filterType\" v-model=\"this.data.searchValues.type\">\r\n                  <option value=\"0\">All</option>\r\n                  <option v-for=\"(type, typeIndex) of typeList\" :key=\"typeIndex\" v-bind:value=\"type.name\">{{ type.name }}</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterStatus\" class=\"form-label\">Status</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"filterStatus\" v-model=\"this.data.searchValues.status\">\r\n                  <option value=\"0\">All</option>\r\n                  <option v-for=\"(status, statusIndex) of statusList\" :key=\"statusIndex\" v-bind:value=\"status.statusID\">{{ status.name }}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"filterLanguage\" name=\"filterLanguage\" v-model=\"this.data.searchValues.language\">\r\n                  <option value=\"1\">English</option>\r\n                  <option value=\"2\">Spanish</option>\r\n                  <option value=\"3\">Both</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"editStatus\" class=\"form-label\">Search by Notes</label>\r\n                <input type=\"text\" id=\"filterNotes\" name=\"filterNotes\" class=\"form-control mb-2\" placeholder=\"Enter note\" v-model=\"this.data.searchValues.noteSearch\">\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterFromDate\" class=\"form-label\"> From date </label>\r\n                <flat-pickr\r\n                    v-model=\"this.data.searchValues.fromDate\"\r\n                    :config=\"humanfriendlyConfig\"\r\n                    class=\"form-control flatpickr-input\"\r\n                    id=\"filterFromDate\"\r\n                    name=\"filterFromDate\"\r\n                ></flat-pickr>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterToDate\" class=\"form-label\"> To Date </label>\r\n                <flat-pickr\r\n                    v-model=\"this.data.searchValues.toDate\"\r\n                    :config=\"humanfriendlyConfig\"\r\n                    class=\"form-control flatpickr-input\"\r\n                    id=\"filterToDate\"\r\n                    name=\"filterToDate\"\r\n                ></flat-pickr>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterDateRange\" class=\"form-label\">Time Range</label>\r\n                <select class=\"form-select mb-2\" id=\"filterDateRange\" name=\"filterDateRange\" v-model=\"this.data.searchValues.dateRange\">\r\n                  <option value=\"0\" selected>...</option>\r\n                  <option value=\"1\">Until 2 year Ago</option>\r\n                  <option value=\"2\">Until 4 year Ago</option>\r\n                  <option value=\"3\">Until 5 year Ago</option>\r\n                  <option value=\"4\">Begin of times</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <span v-if=\"viewUserGroup('SUPER_ADMIN_GROUP')\">\r\n                  <label for=\"filterDateRange\" class=\"form-label\">Department</label>\r\n                    <select class=\"form-select mb-2\" aria-label=\"Department\" id=\"filterDepartment\" name=\"filterDepartment\"\r\n                            v-model=\"this.data.searchValues.department\">\r\n                        <option value=\"0\"> All</option>\r\n                        <option v-for=\"(department, index) of departmentList\"  :key=\"index\"\r\n                                v-bind:value=\"department.departmentID\"> {{ department.name }}\r\n                        </option>\r\n                    </select>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-12\" v-if=\"viewUserGroup('SUPER_ADMIN_GROUP') || viewUserGroup('ADMIN_GROUP')\">\r\n              <label for=\"typeahead_id\" class=\"form-label\">Find By Agent</label>\r\n              <SimpleTypeahead\r\n                  id=\"typeahead_id\"\r\n                  placeholder=\"Type your agent search...\"\r\n                  :items=\"this.itemsSearch\"\r\n                  :minInputLength=\"3\"\r\n                  :class=\"'form-control mb-2'\"\r\n                  @onInput=\"searchAgents\"\r\n                  @selectItem=\"selectItemEventHandler\"\r\n              >\r\n              </SimpleTypeahead>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-light\" data-bs-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"updateClientList()\">Search</button>\r\n          </div>\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!-- Notes Modal -->\r\n    <div id=\"open-notes\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <notes :dataList=\"notesData\" @onFire=\"getNotes()\" :idNumber=\"2\"></notes>\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!-- Messages Modal -->\r\n    <div id=\"open-messages\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <messages :messageList=\"messagesData\" @onFire=\"getSMS()\" :idNumber=\"1\"></messages>\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!-- Move to Prospect Modal -->\r\n    <div id=\"changeStatus\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n      <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content \">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"myModalLabel\">Move Prospects</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"> </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-12\">\r\n                <label for=\"moveStatus\" class=\"form-label\">Status</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"moveStatus\">\r\n                  <option value=\"0\">All</option>\r\n                  <option v-for=\"(status, statusIndex) of prospectStatusList\" :key=\"statusIndex\" v-bind:value=\"status.statusID\">{{ status.name }}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-light\" id=\"closeMove\" data-bs-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"moveClient()\">Move</button>\r\n          </div>\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!-- Upload Agents Modal -->\r\n    <b-modal id=\"uploadLeads\" title=\"Fullscreen | Upload Clients\" class=\"v-modal-custom\" fullscreen>\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-12\">\r\n          <form>\r\n            <!-- end card -->\r\n\r\n            <div class=\"card\">\r\n              <div class=\"card-body\">\r\n                <div class=\"vstack gap-2\">\r\n                  <h5 class=\"fs-14 mb-1\">Upload Your List</h5>\r\n                  <h6> <span style=\"color:red; font-size: 0.7em;\">Please, upload a .csv file from Lincoln or convert the .xls/.xlsx to .csv</span></h6>\r\n                  <input class=\"form-control\" id=\"listFile\" type=\"file\"\r\n                         accept=\"text/csv\" @change=\"selectedFile\"/>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-3\">\r\n                      <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"uploadLanguage\" name=\"uploadLanguage\">\r\n                        <option value=\"\">...</option>\r\n                        <option value=\"1\">English</option>\r\n                        <option value=\"2\">Spanish</option>\r\n                        <option value=\"3\">Take from list</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-lg-3\">\r\n                      <label for=\"editStatus\" class=\"form-label\">Status</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"uploadStatus\" name=\"uploadStatus\">\r\n                        <option value=\"\">...</option>\r\n                        <option v-for=\"(status, statusIndex) of statusList\" :key=\"statusIndex\" v-bind:value=\"status.statusID\">{{ status.name }}</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-lg-3\">\r\n                      <label for=\"editType\" class=\"form-label\">Source</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"uploadType\" name=\"uploadType\">\r\n                        <option value=\"\">...</option>\r\n                        <option v-for=\"(type, typeIndex) of typeList\" :key=\"typeIndex\" v-bind:value=\"type.name\">{{ type.name }}</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-lg-3\"></div>\r\n                  </div>\r\n                  <div class=\"border rounded\" v-for=\"(file, index) of files\" :key=\"index\">\r\n                    <div class=\"d-flex align-items-center p-2\">\r\n                      <div class=\"flex-grow-1\">\r\n                        <div class=\"pt-1\">\r\n                          <h5 class=\"fs-14 mb-1\" data-dz-name=\"\">\r\n                            {{ file.name }}\r\n                          </h5>\r\n                          <p class=\"fs-13 text-muted mb-0\" data-dz-size=\"\">\r\n                            <strong>{{ file.size / 1024 }}</strong> KB\r\n                          </p>\r\n                          <strong class=\"error text-danger\" data-dz-errormessage=\"\"></strong>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"flex-shrink-0 ms-3\">\r\n                        <button data-dz-remove=\"\" class=\"btn btn-sm btn-danger\" @click=\"deleteRecord\">\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"text-end mb-3\">\r\n                    <button type=\"button\" class=\"btn btn-success w-sm\" @click=\"handleFileUpload\">Process File</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- end card -->\r\n          </form>\r\n        </div>\r\n        <!-- end col -->\r\n\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n\r\n            <!-- Tables Border Colors -->\r\n            <table class=\"table table-bordered border-secondary table-nowrap\" v-if=\"parsed\">\r\n              <thead>\r\n              <tr>\r\n                <th scope=\"col\">\r\n                  ID\r\n                </th>\r\n                <th v-for=\"(header, key) in content.meta.fields\"\r\n                    v-bind:key=\"'header-'+key\" scope=\"col\">{{ header }}\r\n                </th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(row, rowKey) in content.data\"\r\n                  v-bind:key=\"'row-'+rowKey\">\r\n                <td>\r\n                  <b>{{ (rowKey+1) }}</b>\r\n                </td>\r\n                <td v-for=\"(column, columnKey) in content.meta.fields\"\r\n                    v-bind:key=\"'row-'+rowKey+'-column-'+columnKey\">\r\n                  {{ content.data[rowKey][column] }}\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n\r\n          </div>\r\n        </div>\r\n        <div class=\"text-end mb-3\">\r\n          <button type=\"button\" class=\"btn btn-success w-sm\" @click=\"uploadFile\">Upload File</button>\r\n        </div>\r\n      </div>\r\n    </b-modal>\r\n  </Layout>\r\n</template>\r\n"]}]}