{"remainingRequest":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\wamp64\\www\\crm\\frontend\\src\\components\\calendar.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\wamp64\\www\\crm\\frontend\\src\\components\\calendar.vue","mtime":1674866771345},{"path":"C:\\wamp64\\www\\crm\\frontend\\babel.config.js","mtime":1645939880000},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1668443304941},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1652458135842},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1668443313146}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L3dhbXA2NC93d3cvY3JtL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgIkBmdWxsY2FsZW5kYXIvY29yZS92ZG9tIjsKaW1wb3J0IHsgU2ltcGxlQmFyIH0gZnJvbSAic2ltcGxlYmFyLXZ1ZTMiOwppbXBvcnQgeyBDYWxlbmRhckljb24gfSBmcm9tICJAemh1b3dlbmxpL3Z1ZS1mZWF0aGVyLWljb25zIjsKaW1wb3J0IGRheUdyaWRQbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci9kYXlncmlkIjsKaW1wb3J0IHRpbWVHcmlkUGx1Z2luIGZyb20gIkBmdWxsY2FsZW5kYXIvdGltZWdyaWQiOwppbXBvcnQgaW50ZXJhY3Rpb25QbHVnaW4sIHsgRHJhZ2dhYmxlIH0gZnJvbSAiQGZ1bGxjYWxlbmRhci9pbnRlcmFjdGlvbiI7CmltcG9ydCBib290c3RyYXBQbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci9ib290c3RyYXAiOwppbXBvcnQgbGlzdFBsdWdpbiBmcm9tICJAZnVsbGNhbGVuZGFyL2xpc3QiOwppbXBvcnQgRnVsbENhbGVuZGFyIGZyb20gIkBmdWxsY2FsZW5kYXIvdnVlMyI7CmltcG9ydCBmbGF0UGlja3IgZnJvbSAidnVlLWZsYXRwaWNrci1jb21wb25lbnQiOwppbXBvcnQgImZsYXRwaWNrci9kaXN0L2ZsYXRwaWNrci5jc3MiOwppbXBvcnQgeyByZXF1aXJlZCwgaGVscGVycyB9IGZyb20gIkB2dWVsaWRhdGUvdmFsaWRhdG9ycyI7CmltcG9ydCB1c2VWdWVsaWRhdGUgZnJvbSAiQHZ1ZWxpZGF0ZS9jb3JlIjsgLy8gaW1wb3J0IHsgSU5JVElBTF9FVkVOVFMgfSBmcm9tICIuL2NhbGVuZGFyIjsKCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50L21vbWVudCI7IC8vIGltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICByZXR1cm4gewogICAgICB2JDogdXNlVnVlbGlkYXRlKCkKICAgIH07CiAgfSwKICB2YWxpZGF0aW9uczogewogICAgZXZlbnQ6IHsKICAgICAgdGl0bGU6IHsKICAgICAgICByZXF1aXJlZDogaGVscGVycy53aXRoTWVzc2FnZSgiVGl0bGUgaXMgcmVxdWlyZWQiLCByZXF1aXJlZCkKICAgICAgfSwKICAgICAgY2F0ZWdvcnk6IHsKICAgICAgICByZXF1aXJlZDogaGVscGVycy53aXRoTWVzc2FnZSgiQ2F0ZWdvcnkgaXMgcmVxdWlyZWQiLCByZXF1aXJlZCkKICAgICAgfQogICAgfQogIH0sCiAgcGFnZTogewogICAgdGl0bGU6ICJDYWxlbmRhciIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAiQ2FsZW5kYXIiLAogICAgICBpdGVtczogW3sKICAgICAgICB0ZXh0OiAiQXBwcyIsCiAgICAgICAgaHJlZjogIi8iCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiQ2FsZW5kYXIiLAogICAgICAgIGFjdGl2ZTogdHJ1ZQogICAgICB9XSwKICAgICAgY2F0ZWdvcmllczogW3sKICAgICAgICBuYW1lOiAnRGFuZ2VyJywKICAgICAgICB2YWx1ZTogJ2JnLWRhbmdlcicKICAgICAgfSwgewogICAgICAgIG5hbWU6ICdTdWNjZXNzJywKICAgICAgICB2YWx1ZTogJ2JnLXN1Y2Nlc3MnCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAnUHJpbWFyeScsCiAgICAgICAgdmFsdWU6ICdiZy1wcmltYXJ5JwogICAgICB9LCB7CiAgICAgICAgbmFtZTogJ0luZm8nLAogICAgICAgIHZhbHVlOiAnYmctaW5mbycKICAgICAgfSwgewogICAgICAgIG5hbWU6ICdEYXJrJywKICAgICAgICB2YWx1ZTogJ2JnLWRhcmsnCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAnV2FybmluZycsCiAgICAgICAgdmFsdWU6ICdiZy13YXJuaW5nJwogICAgICB9XSwKICAgICAgY3VycmVudEV2ZW50czogW10sCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIGV2ZW50TW9kYWw6IGZhbHNlLAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICBzdWJtaXQ6IGZhbHNlLAogICAgICBuZXdFdmVudERhdGE6IHt9LAogICAgICBlZGl0OiB7fSwKICAgICAgZGVsZXRlSWQ6IHt9LAogICAgICBldmVudDogewogICAgICAgIGlkOiAiIiwKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICAgIGNhdGVnb3J5OiAiIiwKICAgICAgICBzdGFydDogbnVsbCwKICAgICAgICBlbmQ6IG51bGwsCiAgICAgICAgbG9jYXRpb246ICIiCiAgICAgIH0sCiAgICAgIGVkaXRldmVudDogewogICAgICAgIGVkaXRJRDogMCwKICAgICAgICBlZGl0VGl0bGU6ICIiLAogICAgICAgIGVkaXRjYXRlZ29yeTogIiIsCiAgICAgICAgZWRpdERlc2NyaXB0aW9uOiAiIiwKICAgICAgICBlZGl0U3RhcnQ6ICIiLAogICAgICAgIGVkaXRFbmQ6ICIiLAogICAgICAgIGVkaXRMb2NhdGlvbjogIiIKICAgICAgfSwKICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICBkYXRlVGltZUNvbmZpZzogewogICAgICAgIGVuYWJsZVRpbWU6IHRydWUsCiAgICAgICAgZGF0ZUZvcm1hdDogIkYgaiwgWSBIOmkgSyIKICAgICAgfSwKICAgICAgdG9EYXRlOiBudWxsLAogICAgICBmcm9tRGF0ZTogbnVsbCwKICAgICAgY2FsZW5kYXJPcHRpb25zOiB7CiAgICAgICAgdGltZVpvbmU6IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZSwKICAgICAgICBkcm9wcGFibGU6IHRydWUsCiAgICAgICAgbmF2TGlua3M6IHRydWUsCiAgICAgICAgcGx1Z2luczogW2RheUdyaWRQbHVnaW4sIHRpbWVHcmlkUGx1Z2luLCBpbnRlcmFjdGlvblBsdWdpbiwgYm9vdHN0cmFwUGx1Z2luLCBsaXN0UGx1Z2luXSwKICAgICAgICB0aGVtZVN5c3RlbTogImJvb3RzdHJhcCIsCiAgICAgICAgaGVhZGVyVG9vbGJhcjogewogICAgICAgICAgbGVmdDogInByZXYsbmV4dCB0b2RheSIsCiAgICAgICAgICBjZW50ZXI6ICJ0aXRsZSIsCiAgICAgICAgICByaWdodDogImRheUdyaWRNb250aCx0aW1lR3JpZFdlZWssdGltZUdyaWREYXksbGlzdE1vbnRoIgogICAgICAgIH0sCiAgICAgICAgd2luZG93UmVzaXplOiBmdW5jdGlvbiB3aW5kb3dSZXNpemUoKSB7CiAgICAgICAgICBfdGhpcy5nZXRJbml0aWFsVmlldygpOwogICAgICAgIH0sCiAgICAgICAgaW5pdGlhbFZpZXc6IHRoaXMuZ2V0SW5pdGlhbFZpZXcoKSwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICBzZWxlY3RhYmxlOiB0cnVlLAogICAgICAgIHNlbGVjdE1pcnJvcjogdHJ1ZSwKICAgICAgICBkYXlNYXhFdmVudHM6IHRydWUsCiAgICAgICAgd2Vla2VuZHM6IHRydWUsCiAgICAgICAgZGF0ZUNsaWNrOiB0aGlzLmRhdGVDbGlja2VkLAogICAgICAgIGV2ZW50Q2xpY2s6IHRoaXMuZWRpdEV2ZW50LAogICAgICAgIGV2ZW50c1NldDogdGhpcy5oYW5kbGVFdmVudHMsCiAgICAgICAgZXZlbnREcm9wOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX2V2ZW50RHJvcCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShldmVudCkgewogICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgICAgIHZhciBlZGl0VGl0bGUsIGVkaXRjYXRlZ29yeSwgZGF0ZSwgZCwgbSwgeSwgZGF0YTsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlZGl0VGl0bGUgPSBldmVudC5ldmVudC50aXRsZTsKICAgICAgICAgICAgICAgICAgICBlZGl0Y2F0ZWdvcnkgPSBldmVudC5ldmVudC5jbGFzc05hbWVzWzBdOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVkaXRjYXRlZ29yeSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0ID0gZXZlbnQuZXZlbnQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0LnNldFByb3AoInRpdGxlIiwgZWRpdFRpdGxlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXQuc2V0UHJvcCgiY2xhc3NOYW1lcyIsIGVkaXRjYXRlZ29yeSk7CiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgZCA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIG0gPSBkYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICAgICAgICAgICAgeSA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh5LCBtLCBkICsgMjQsIDE2LCAwKTsKICAgICAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgICAgICBldmVudDogewogICAgICAgICAgICAgICAgICAgICAgICBlZGl0SUQ6IGV2ZW50LmV2ZW50LmlkLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0VGl0bGU6IGVkaXRUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGNhdGVnb3J5OiBldmVudC5ldmVudC5jbGFzc05hbWVzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0RGVzY3JpcHRpb246IGV2ZW50LmV2ZW50LmV4dGVuZGVkUHJvcHMuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRTdGFydDogbW9tZW50KGV2ZW50LmV2ZW50LnN0YXJ0U3RyKS5mb3JtYXQoJ01NTU0gRCwgWVlZWSBoOm1tIEEnKSwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdEVuZDogbW9tZW50KGV2ZW50LmV2ZW50LmVuZFN0cikuZm9ybWF0KCdNTU1NIEQsIFlZWVkgaDptbSBBJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRMb2NhdGlvbjogZXZlbnQuZXZlbnQuZXh0ZW5kZWRQcm9wcy5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGVkaXQ6IHRoaXMuZWRpdCwKICAgICAgICAgICAgICAgICAgICAgIHRlc3Q6IG5ldyBEYXRlKHksIG0sIGQgKyAyNCwgMTYsIDApLAogICAgICAgICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL3VwZGF0ZUV2ZW50JywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gJ1RydWUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJFdmVudCB1cGRhdGVkISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnVwZGF0ZUNhbGVuZGFyRXZlbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkV2ZW50IGhhcyBiZWVuIHVwZGF0ZWQhIiwKICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNb2RhbCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgZnVuY3Rpb24gZXZlbnREcm9wKF94KSB7CiAgICAgICAgICAgIHJldHVybiBfZXZlbnREcm9wLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGV2ZW50RHJvcDsKICAgICAgICB9KCksCiAgICAgICAgZXZlbnRSZXNpemU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfZXZlbnRSZXNpemUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIGVkaXRUaXRsZSwgZWRpdGNhdGVnb3J5LCBkYXRlLCBkLCBtLCB5LCBkYXRhOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWRpdFRpdGxlID0gZXZlbnQuZXZlbnQudGl0bGU7CiAgICAgICAgICAgICAgICAgICAgZWRpdGNhdGVnb3J5ID0gZXZlbnQuZXZlbnQuY2xhc3NOYW1lc1swXTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXQgPSBldmVudC5ldmVudDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXQuc2V0UHJvcCgidGl0bGUiLCBlZGl0VGl0bGUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdC5zZXRQcm9wKCJjbGFzc05hbWVzIiwgZWRpdGNhdGVnb3J5KTsKICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICBkID0gZGF0ZS5nZXREYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgbSA9IGRhdGUuZ2V0TW9udGgoKTsKICAgICAgICAgICAgICAgICAgICB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHksIG0sIGQgKyAyNCwgMTYsIDApOwogICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRJRDogZXZlbnQuZXZlbnQuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRUaXRsZTogZWRpdFRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0Y2F0ZWdvcnk6IGV2ZW50LmV2ZW50LmNsYXNzTmFtZXNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXREZXNjcmlwdGlvbjogZXZlbnQuZXZlbnQuZXh0ZW5kZWRQcm9wcy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdFN0YXJ0OiBtb21lbnQoZXZlbnQuZXZlbnQuc3RhcnRTdHIpLmZvcm1hdCgnTU1NTSBELCBZWVlZIGg6bW0gQScpLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0RW5kOiBtb21lbnQoZXZlbnQuZXZlbnQuZW5kU3RyKS5mb3JtYXQoJ01NTU0gRCwgWVlZWSBoOm1tIEEnKSwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdExvY2F0aW9uOiBldmVudC5ldmVudC5leHRlbmRlZFByb3BzLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgZWRpdDogdGhpcy5lZGl0LAogICAgICAgICAgICAgICAgICAgICAgdGVzdDogbmV3IERhdGUoeSwgbSwgZCArIDI0LCAxNiwgMCksCiAgICAgICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL3VwZGF0ZUV2ZW50JywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gJ1RydWUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJFdmVudCB1cGRhdGVkISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnVwZGF0ZUNhbGVuZGFyRXZlbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJFdmVudCBoYXMgYmVlbiB1cGRhdGVkISIsCiAgICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lcjogMTAwMAogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TW9kYWwgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgZnVuY3Rpb24gZXZlbnRSZXNpemUoX3gyKSB7CiAgICAgICAgICAgIHJldHVybiBfZXZlbnRSZXNpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZXZlbnRSZXNpemU7CiAgICAgICAgfSgpLAogICAgICAgIGRyb3A6IGZ1bmN0aW9uIGRyb3AoZSkgewogICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAgICAgdmFyIHN0YXJ0ID0gbW9tZW50KGUuZGF0ZSkuYWRkKDEsICdkYXlzJykuZm9ybWF0KCdNTU1NIEQsIFlZWVkgaDptbSBBJyk7CiAgICAgICAgICB2YXIgZW5kID0gbW9tZW50KHN0YXJ0KS5hZGQoMSwgJ2hvdXJzJykuZm9ybWF0KCdNTU1NIEQsIFlZWVkgaDptbSBBJyk7CiAgICAgICAgICB2YXIgZXZlbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjcmVhdGluZ0V2ZW50JykpOwogICAgICAgICAgdmFyIGVkaXRUaXRsZSA9IGV2ZW50LnRpdGxlOwogICAgICAgICAgdmFyIGVkaXRjYXRlZ29yeSA9IGV2ZW50LmNhdGVnb3J5OwogICAgICAgICAgdGhpcy5lZGl0ID0gZXZlbnQ7CiAgICAgICAgICB0aGlzLmVkaXRbInRpdGxlIl0gPSBlZGl0VGl0bGU7CiAgICAgICAgICB0aGlzLmVkaXRbImNsYXNzTmFtZXMiXSA9IGVkaXRjYXRlZ29yeTsKICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgIHZhciBkID0gZGF0ZS5nZXREYXRlKCk7CiAgICAgICAgICB2YXIgbSA9IGRhdGUuZ2V0TW9udGgoKTsKICAgICAgICAgIHZhciB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgbmV3IERhdGUoeSwgbSwgZCArIDI0LCAxNiwgMCk7CiAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgZXZlbnQ6IHsKICAgICAgICAgICAgICBlZGl0SUQ6IGV2ZW50LmlkLAogICAgICAgICAgICAgIGVkaXRUaXRsZTogZWRpdFRpdGxlLAogICAgICAgICAgICAgIGVkaXRjYXRlZ29yeTogZXZlbnQuY2F0ZWdvcnksCiAgICAgICAgICAgICAgZWRpdERlc2NyaXB0aW9uOiBldmVudC5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICBlZGl0U3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICAgIGVkaXRFbmQ6IGVuZCwKICAgICAgICAgICAgICBlZGl0TG9jYXRpb246IGV2ZW50LmxvY2F0aW9uCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVkaXQ6IHRoaXMuZWRpdCwKICAgICAgICAgICAgdGVzdDogbmV3IERhdGUoeSwgbSwgZCArIDI0LCAxNiwgMCksCiAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykKICAgICAgICAgIH07CiAgICAgICAgICBheGlvcy5wb3N0KCcvYXBpL3VwZGF0ZUV2ZW50JywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSAnVHJ1ZScpIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIHRpdGxlOiAiRXZlbnQgdXBkYXRlZCEiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgIF90aGlzNC4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJDYWxlbmRhciBFdmVudHMgY291bGRuJ3QgYmUgdXBkYXRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmV2ZW50TW9kYWwgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBGdWxsQ2FsZW5kYXI6IEZ1bGxDYWxlbmRhciwKICAgIFNpbXBsZUJhcjogU2ltcGxlQmFyLAogICAgQ2FsZW5kYXJJY29uOiBDYWxlbmRhckljb24sCiAgICBmbGF0UGlja3I6IGZsYXRQaWNrcgogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2dldENhbGVuZGFyRXZlbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LmNhbGVuZGFyT3B0aW9ucy5ldmVudHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJDYWxlbmRhciBFdmVudHMgY291bGRuJ3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIHZhciBtb250aE5hbWVzID0gWyJKYW51YXJ5IiwgIkZlYnJ1YXJ5IiwgIk1hcmNoIiwgIkFwcmlsIiwgIk1heSIsICJKdW5lIiwgIkp1bHkiLCAiQXVndXN0IiwgIlNlcHRlbWJlciIsICJPY3RvYmVyIiwgIk5vdmVtYmVyIiwgIkRlY2VtYmVyIl07CiAgICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSksCiAgICAgICAgICBtb250aCA9ICIiICsgbW9udGhOYW1lc1tkLmdldE1vbnRoKCldLAogICAgICAgICAgZGF5ID0gIiIgKyBkLmdldERhdGUoKSwKICAgICAgICAgIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgIGlmIChtb250aC5sZW5ndGggPCAyKSBtb250aCA9ICIwIiArIG1vbnRoOwogICAgICBpZiAoZGF5Lmxlbmd0aCA8IDIpIGRheSA9ICIwIiArIGRheTsKICAgICAgcmV0dXJuIFtkYXkgKyAiICIgKyBtb250aCwgeWVhcl0uam9pbigiLCIpOwogICAgfSwKICAgIGZvcm1hdERhdGUyOiBmdW5jdGlvbiBmb3JtYXREYXRlMihkYXRlLCBmb3JtYXQpIHsKICAgICAgZGF0ZSA9IG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9LAogICAgZ2V0SW5pdGlhbFZpZXc6IGZ1bmN0aW9uIGdldEluaXRpYWxWaWV3KCkgewogICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gNzY4ICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgMTIwMCkgewogICAgICAgIHJldHVybiAidGltZUdyaWRXZWVrIjsKICAgICAgfSBlbHNlIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHsKICAgICAgICByZXR1cm4gImxpc3RNb250aCI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJkYXlHcmlkTW9udGgiOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIE1vZGFsIGZvcm0gc3VibWl0DQogICAgICovCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgdGl0bGUsIGNhdGVnb3J5LCBjYWxlbmRhckFwaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM2LnN1Ym1pdHRlZCA9IHRydWU7IC8vIHN0b3AgaGVyZSBpZiBmb3JtIGlzIGludmFsaWQKCiAgICAgICAgICAgICAgICBfdGhpczYudiQuJHRvdWNoKCk7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczYudiQuJGludmFsaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHRpdGxlID0gX3RoaXM2LmV2ZW50LnRpdGxlOwogICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSBfdGhpczYuZXZlbnQuY2F0ZWdvcnk7CiAgICAgICAgICAgICAgICBjYWxlbmRhckFwaSA9IF90aGlzNi4kcmVmcy5mdWxsQ2FsZW5kYXIuZ2V0QXBpKCk7IC8vIGNvbnNvbGUubG9nKGNhbGVuZGFyQXBpKTsKICAgICAgICAgICAgICAgIC8vIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAvLyAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAvLyAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAvLyAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksCiAgICAgICAgICAgICAgICAvLyAgIGV2ZW50OiB7CiAgICAgICAgICAgICAgICAvLyAgICAgdGl0bGU6IGV2ZW50RWwuaW5uZXJUZXh0LAogICAgICAgICAgICAgICAgLy8gICAgIHN0YXJ0OiBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgLy8gICAgIGNsYXNzTmFtZTogZXZlbnRFbC5nZXRBdHRyaWJ1dGUoImRhdGEtY2xhc3MiKSwKICAgICAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vIGF3YWl0IGF4aW9zCiAgICAgICAgICAgICAgICAvLyAgICAgLnBvc3QoJy9hcGkvY3JlYXRlRXZlbnQnLCBkYXRhKQogICAgICAgICAgICAgICAgLy8gICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIC8vICAgICAgIGlmIChyZXNwb25zZSl7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgdGl0bGU6ICJFdmVudCBjcmVhdGVkISIsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgLy8gICAgICAgICAgIHRpbWVyOiAxMDAwLAogICAgICAgICAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhckV2ZW50cygpCiAgICAgICAgICAgICAgICAvLyAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgfSkKICAgICAgICAgICAgICAgIC8vICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgLy8gICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgICAgICBpZihlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCdsb2dvdXQnKQogICAgICAgICAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSBzYXZlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKQogICAgICAgICAgICAgICAgLy8gICAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIH0pCiAgICAgICAgICAgICAgICAvLyByZXR1cm4gewogICAgICAgICAgICAgICAgLy8gICB0aXRsZTogZXZlbnRFbC5pbm5lclRleHQsCiAgICAgICAgICAgICAgICAvLyAgIHN0YXJ0OiBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgLy8gICBjbGFzc05hbWU6IGV2ZW50RWwuZ2V0QXR0cmlidXRlKCJkYXRhLWNsYXNzIiksCiAgICAgICAgICAgICAgICAvLyB9OwoKICAgICAgICAgICAgICAgIF90aGlzNi5jdXJyZW50RXZlbnRzID0gY2FsZW5kYXJBcGkuYWRkRXZlbnQoewogICAgICAgICAgICAgICAgICBpZDogX3RoaXM2Lm5ld0V2ZW50RGF0YS5sZW5ndGggKyAxLAogICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICAgIHN0YXJ0OiBfdGhpczYudG9EYXRlLAogICAgICAgICAgICAgICAgICBlbmQ6IF90aGlzNi5mcm9tRGF0ZSwKICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lczogW2NhdGVnb3J5XQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXM2LnN1Y2Nlc3Ntc2coKTsKCiAgICAgICAgICAgICAgICBfdGhpczYuc2hvd01vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczYubmV3RXZlbnREYXRhID0ge307CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfdGhpczYuc3VibWl0dGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczYuZXZlbnQgPSB7fTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgaGlkZU1vZGFsOiBmdW5jdGlvbiBoaWRlTW9kYWwoZSkgewogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlOwogICAgICB0aGlzLmV2ZW50ID0ge307CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEVkaXQgZXZlbnQgbW9kYWwgc3VibWl0DQogICAgICovCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgIGVkaXRTdWJtaXQ6IGZ1bmN0aW9uIGVkaXRTdWJtaXQoZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBlZGl0VGl0bGUsIGVkaXRjYXRlZ29yeSwgZGF0ZSwgZCwgbSwgeSwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM3LnN1Ym1pdCA9IHRydWU7CiAgICAgICAgICAgICAgICBlZGl0VGl0bGUgPSBfdGhpczcuZWRpdGV2ZW50LmVkaXRUaXRsZTsKICAgICAgICAgICAgICAgIGVkaXRjYXRlZ29yeSA9IF90aGlzNy5lZGl0ZXZlbnQuZWRpdGNhdGVnb3J5OwoKICAgICAgICAgICAgICAgIF90aGlzNy5lZGl0LnNldFByb3AoInRpdGxlIiwgZWRpdFRpdGxlKTsKCiAgICAgICAgICAgICAgICBfdGhpczcuZWRpdC5zZXRQcm9wKCJjbGFzc05hbWVzIiwgZWRpdGNhdGVnb3J5KTsKCiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIGQgPSBkYXRlLmdldERhdGUoKTsKICAgICAgICAgICAgICAgIG0gPSBkYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICAgICAgICB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICAgICAgbmV3IERhdGUoeSwgbSwgZCArIDI0LCAxNiwgMCk7CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICBldmVudDogX3RoaXM3LmVkaXRldmVudCwKICAgICAgICAgICAgICAgICAgZWRpdDogX3RoaXM3LmVkaXQsCiAgICAgICAgICAgICAgICAgIHRlc3Q6IG5ldyBEYXRlKHksIG0sIGQgKyAyNCwgMTYsIDApLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL3VwZGF0ZUV2ZW50JywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM3LnVwZGF0ZUNhbGVuZGFyRXZlbnRzKCk7CgogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09ICdUcnVlJykgewogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJFdmVudCB1cGRhdGVkISIsCiAgICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lcjogMTAwMAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF90aGlzNy5zdWNjZXNzbXNnKCk7CgogICAgICAgICAgICAgICAgX3RoaXM3LmV2ZW50TW9kYWwgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBEZWxldGUgZXZlbnQNCiAgICAgKi8KICAgIGRlbGV0ZUV2ZW50OiBmdW5jdGlvbiBkZWxldGVFdmVudCgpIHsKICAgICAgdGhpcy5lZGl0LnJlbW92ZSgpOwogICAgICB0aGlzLmV2ZW50TW9kYWwgPSBmYWxzZTsKICAgIH0sCgogICAgLyoqDQogICAgICogQ2xpY2sgYW55IGRhdGUgdG8gYWRkIGV2ZW50DQogICAgICogTW9kYWwgb3BlbiBmb3IgYWRkIGV2ZW50DQogICAgICovCiAgICBkYXRlQ2xpY2tlZDogZnVuY3Rpb24gZGF0ZUNsaWNrZWQoaW5mbykgewogICAgICB0aGlzLm5ld0V2ZW50RGF0YSA9IGluZm87CiAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsKICAgIH0sCgogICAgLyoqDQogICAgICogTW9kYWwgb3BlbiBmb3IgZWRpdCBldmVudA0KICAgICAqLwogICAgZWRpdEV2ZW50OiBmdW5jdGlvbiBlZGl0RXZlbnQoaW5mbykgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHRoaXMuZWRpdCA9IGluZm8uZXZlbnQ7CiAgICAgIHRoaXMuZWRpdGV2ZW50LmVkaXRJRCA9IHRoaXMuZWRpdC5fZGVmLnB1YmxpY0lkOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgZXZlbnRJRDogdGhpcy5lZGl0ZXZlbnQuZWRpdElELAogICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykKICAgICAgfTsKICAgICAgYXhpb3MucG9zdCgnL2FwaS9nZXRFdmVudEJ5aWQnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YVswXTsKICAgICAgICBfdGhpczguZWRpdGV2ZW50LmVkaXRUaXRsZSA9IGRhdGEudGl0bGU7CiAgICAgICAgX3RoaXM4LmVkaXRldmVudC5lZGl0RGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uOwogICAgICAgIF90aGlzOC5lZGl0ZXZlbnQuZWRpdExvY2F0aW9uID0gZGF0YS5sb2NhdGlvbjsKICAgICAgICBfdGhpczguZWRpdGV2ZW50LmVkaXRjYXRlZ29yeSA9IGRhdGEuY2xhc3NOYW1lOwogICAgICAgIF90aGlzOC5lZGl0ZXZlbnQuZWRpdFN0YXJ0ID0gbW9tZW50KGRhdGEuc3RhcnQpLmZvcm1hdCgnTU1NTSBELCBZWVlZIGg6bW0gQScpOwogICAgICAgIF90aGlzOC5lZGl0ZXZlbnQuZWRpdEVuZCA9IG1vbWVudChkYXRhLmVuZCkuZm9ybWF0KCdNTU1NIEQsIFlZWVkgaDptbSBBJyk7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXM4LmVkaXRldmVudC5lZGl0U3RhcnQudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgewogICAgICAgICAgdGltZVpvbmU6ICdBbWVyaWNhL05ld19Zb3JrJwogICAgICAgIH0pKTsgLy8gdGhpcy5lZGl0ZXZlbnQuZWRpdFN0YXJ0ID0gdGhpcy5lZGl0Ll9pbnN0YW5jZS5yYW5nZS5zdGFydDsKICAgICAgICAvLyB0aGlzLmVkaXRldmVudC5lZGl0RW5kID0gdGhpcy5lZGl0Ll9pbnN0YW5jZS5yYW5nZS5lbmQ7CgogICAgICAgIF90aGlzOC5ldmVudE1vZGFsID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgIF90aGlzOC4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgfQoKICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiQ2FsZW5kYXIgRXZlbnRzIGNvdWxkbid0IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjbG9zZU1vZGFsOiBmdW5jdGlvbiBjbG9zZU1vZGFsKCkgewogICAgICB0aGlzLmV2ZW50TW9kYWwgPSBmYWxzZTsKICAgIH0sCiAgICBjb25maXJtOiBmdW5jdGlvbiBjb25maXJtKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiWW91IHdvbid0IGJlIGFibGUgdG8gZGVsZXRlIHRoaXMhIiwKICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzRjMzhmIiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNmNDZhNmEiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBkZWxldGUgaXQhIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBfdGhpczkuZGVsZXRlRXZlbnQoKTsKCiAgICAgICAgICBTd2FsLmZpcmUoIkRlbGV0ZWQhIiwgIkV2ZW50IGhhcyBiZWVuIGRlbGV0ZWQuIiwgInN1Y2Nlc3MiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUNhbGVuZGFyRXZlbnRzOiBmdW5jdGlvbiB1cGRhdGVDYWxlbmRhckV2ZW50cygpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9nZXRDYWxlbmRhckV2ZW50cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTAuY2FsZW5kYXJPcHRpb25zLmV2ZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJDYWxlbmRhciBFdmVudHMgY291bGRuJ3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFNob3cgbGlzdCBvZiBldmVudHMNCiAgICAgKi8KICAgIGhhbmRsZUV2ZW50czogZnVuY3Rpb24gaGFuZGxlRXZlbnRzKGV2ZW50cykgewogICAgICB0aGlzLmN1cnJlbnRFdmVudHMgPSBldmVudHM7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFNob3cgc3VjY2Vzc2Z1bGwgU2F2ZSBEaWFsb2cNCiAgICAgKi8KICAgIHN1Y2Nlc3Ntc2c6IGZ1bmN0aW9uIHN1Y2Nlc3Ntc2coKSB7CiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgcG9zaXRpb246ICJjZW50ZXIiLAogICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICB0aXRsZTogIkV2ZW50IGhhcyBiZWVuIHNhdmVkISIsCiAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgIHRpbWVyOiAxMDAwCiAgICAgIH0pOwogICAgfSwKICAgIHNvcnRFdmVudHM6IGZ1bmN0aW9uIHNvcnRFdmVudHMoZXZlbnRzKSB7CiAgICAgIGV2ZW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuc3RhcnQpIC0gbmV3IERhdGUoYi5zdGFydCk7IC8vIGRlc2NlbmRpbmcKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICB2YXIgZGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBuZXcgRHJhZ2dhYmxlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleHRlcm5hbC1ldmVudHMiKSwgewogICAgICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAiLmV4dGVybmFsLWV2ZW50IiwKICAgICAgICAgICAgICAgIGV2ZW50RGF0YTogZnVuY3Rpb24gZXZlbnREYXRhKGV2ZW50RWwpIHsKICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50SUQgPSAwOwogICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICAgICAgICAgICAgICBldmVudDogewogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGV2ZW50RWwuaW5uZXJUZXh0LAogICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKCksCiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGV2ZW50RWwuZ2V0QXR0cmlidXRlKCJkYXRhLWNsYXNzIikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvY3JlYXRlRXZlbnQnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgZXZlbnRJRCA9IHJlc3BvbnNlLmRhdGFbJ0lEJ107CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2V2ZW50ID0gewogICAgICAgICAgICAgICAgICAgICAgICBpZDogZXZlbnRJRCwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGV2ZW50RWwuaW5uZXJUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBldmVudEVsLmdldEF0dHJpYnV0ZSgiZGF0YS1jbGFzcyIpLAogICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogbmV3IERhdGUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICcnCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NyZWF0aW5nRXZlbnQnLCBKU09OLnN0cmluZ2lmeShfZXZlbnQpKTsKICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJFdmVudCBjcmVhdGVkISIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZXI6IDEwMDAKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSBzYXZlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjcmVhdGluZ0V2ZW50JykpOwogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGlkOiBldmVudC5pZCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogZXZlbnRFbC5pbm5lclRleHQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKCksCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBldmVudEVsLmdldEF0dHJpYnV0ZSgiZGF0YS1jbGFzcyIpCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2dldENhbGVuZGFyRXZlbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzMTEuY2FsZW5kYXJPcHRpb25zLmV2ZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgIF90aGlzMTEuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJDYWxlbmRhciBFdmVudHMgY291bGRuJ3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTcpOwogICAgfSkpKCk7CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;AACA,OAAOA,IAAP,MAAiB,aAAjB;AACA,OAAO,yBAAP;AACA,SAASC,SAAT,QAA0B,gBAA1B;AACA,SAASC,YAAT,QAA6B,8BAA7B;AAEA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAOC,cAAP,MAA2B,wBAA3B;AACA,OAAOC,iBAAP,IAA4BC,SAA5B,QAA6C,2BAA7C;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AAEA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAO,8BAAP;AAEA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,uBAAlC;AACA,OAAOC,YAAP,MAAyB,iBAAzB,C,CAEA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB,C,CACA;;AAEA,eAAe;AACbC,OADa,mBACL;AACN,WAAO;AAAEC,QAAE,EAAEJ,YAAY;AAAlB,KAAP;AACD,GAHY;AAIbK,aAAW,EAAE;AACXC,SAAK,EAAE;AACLC,WAAK,EAAE;AACLT,gBAAQ,EAAEC,OAAO,CAACS,WAAR,CAAoB,mBAApB,EAAyCV,QAAzC;AADL,OADF;AAILW,cAAQ,EAAE;AACRX,gBAAQ,EAAEC,OAAO,CAACS,WAAR,CAAoB,sBAApB,EAA4CV,QAA5C;AADF;AAJL;AADI,GAJA;AAcbY,MAAI,EAAE;AACJH,SAAK,EAAE;AADH,GAdO;AAiBbI,MAjBa,kBAiBN;AAAA;;AACL,WAAO;AACLJ,WAAK,EAAE,UADF;AAELK,WAAK,EAAE,CACL;AACEC,YAAI,EAAE,MADR;AAEEC,YAAI,EAAE;AAFR,OADK,EAKL;AACED,YAAI,EAAE,UADR;AAEEE,cAAM,EAAE;AAFV,OALK,CAFF;AAYLC,gBAAU,EAAE,CACV;AACEC,YAAI,EAAE,QADR;AAEEC,aAAK,EAAE;AAFT,OADU,EAKV;AACED,YAAI,EAAE,SADR;AAEEC,aAAK,EAAE;AAFT,OALU,EASV;AACED,YAAI,EAAE,SADR;AAEEC,aAAK,EAAE;AAFT,OATU,EAaV;AACED,YAAI,EAAE,MADR;AAEEC,aAAK,EAAE;AAFT,OAbU,EAiBV;AACED,YAAI,EAAE,MADR;AAEEC,aAAK,EAAE;AAFT,OAjBU,EAqBV;AACED,YAAI,EAAE,SADR;AAEEC,aAAK,EAAE;AAFT,OArBU,CAZP;AAsCLC,mBAAa,EAAE,EAtCV;AAuCLC,eAAS,EAAE,KAvCN;AAwCLC,gBAAU,EAAE,KAxCP;AAyCLC,eAAS,EAAE,KAzCN;AA0CLC,YAAM,EAAE,KA1CH;AA2CLC,kBAAY,EAAE,EA3CT;AA4CLC,UAAI,EAAE,EA5CD;AA6CLC,cAAQ,EAAE,EA7CL;AA8CLpB,WAAK,EAAE;AACLqB,UAAE,EAAE,EADC;AAELpB,aAAK,EAAE,EAFF;AAGLqB,mBAAW,EAAE,EAHR;AAILnB,gBAAQ,EAAE,EAJL;AAKLoB,aAAK,EAAE,IALF;AAMLC,WAAG,EAAE,IANA;AAOLC,gBAAQ,EAAE;AAPL,OA9CF;AAuDLC,eAAS,EAAE;AACTC,cAAM,EAAE,CADC;AAETC,iBAAS,EAAE,EAFF;AAGTC,oBAAY,EAAE,EAHL;AAITC,uBAAe,EAAE,EAJR;AAKTC,iBAAS,EAAE,EALF;AAMTC,eAAO,EAAE,EANA;AAOTC,oBAAY,EAAE;AAPL,OAvDN;AAgELX,iBAAW,EAAE,EAhER;AAiELY,oBAAc,EAAE;AACdC,kBAAU,EAAE,IADE;AAEdC,kBAAU,EAAE;AAFE,OAjEX;AAqELC,YAAM,EAAG,IArEJ;AAsELC,cAAQ,EAAE,IAtEL;AAuELC,qBAAe,EAAE;AACfC,gBAAQ,EAAEC,IAAI,CAACC,cAAL,GAAsBC,eAAtB,GAAwCH,QADnC;AAEfI,iBAAS,EAAE,IAFI;AAGfC,gBAAQ,EAAE,IAHK;AAIfC,eAAO,EAAE,CACP9D,aADO,EAEPC,cAFO,EAGPC,iBAHO,EAIPE,eAJO,EAKPC,UALO,CAJM;AAWf0D,mBAAW,EAAE,WAXE;AAYfC,qBAAa,EAAE;AACbC,cAAI,EAAE,iBADO;AAEbC,gBAAM,EAAE,OAFK;AAGbC,eAAK,EAAE;AAHM,SAZA;AAiBfC,oBAAY,EAAE,wBAAM;AAClB,eAAI,CAACC,cAAL;AACD,SAnBc;AAoBfC,mBAAW,EAAE,KAAKD,cAAL,EApBE;AAqBfE,gBAAQ,EAAE,IArBK;AAsBfC,kBAAU,EAAE,IAtBG;AAuBfC,oBAAY,EAAE,IAvBC;AAwBfC,oBAAY,EAAE,IAxBC;AAyBfC,gBAAQ,EAAE,IAzBK;AA0BfC,iBAAS,EAAE,KAAKC,WA1BD;AA2BfC,kBAAU,EAAE,KAAKC,SA3BF;AA4BfC,iBAAS,EAAE,KAAKC,YA5BD;AA6BfC,iBAAS;AAAA,mFAAE,iBAAgBlE,KAAhB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACT,yBAAKiB,MAAL,GAAc,IAAd;AACMW,6BAFG,GAES5B,KAAK,CAACA,KAAN,CAAYC,KAFrB;AAGH4B,gCAHG,GAGY7B,KAAK,CAACA,KAAN,CAAYmE,UAAZ,CAAuB,CAAvB,CAHZ;AAITC,2BAAO,CAACC,GAAR,CAAYxC,YAAZ;AAEA,yBAAKV,IAAL,GAAYnB,KAAK,CAACA,KAAlB;AACA,yBAAKmB,IAAL,CAAUmD,OAAV,CAAkB,OAAlB,EAA2B1C,SAA3B;AACA,yBAAKT,IAAL,CAAUmD,OAAV,CAAkB,YAAlB,EAAgCzC,YAAhC;AAEI0C,wBAVK,GAUE,IAAIC,IAAJ,EAVF;AAWLC,qBAXK,GAWDF,IAAI,CAACG,OAAL,EAXC;AAYLC,qBAZK,GAYDJ,IAAI,CAACK,QAAL,EAZC;AAaLC,qBAbK,GAaDN,IAAI,CAACO,WAAL,EAbC;AAcT,wBAAIN,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B;AAEMpE,wBAhBG,GAgBI;AACX0E,2BAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,+BAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXjF,2BAAK,EAAE;AACL2B,8BAAM,EAAE3B,KAAK,CAACA,KAAN,CAAYqB,EADf;AAELO,iCAAS,EAAEA,SAFN;AAGLC,oCAAY,EAAE7B,KAAK,CAACA,KAAN,CAAYmE,UAAZ,CAAuB,CAAvB,CAHT;AAILrC,uCAAe,EAAE9B,KAAK,CAACA,KAAN,CAAYmF,aAAZ,CAA0B7D,WAJtC;AAKLS,iCAAS,EAAEnC,MAAM,CAACI,KAAK,CAACA,KAAN,CAAYoF,QAAb,CAAN,CAA6BC,MAA7B,CAAoC,qBAApC,CALN;AAMLrD,+BAAO,EAAEpC,MAAM,CAACI,KAAK,CAACA,KAAN,CAAYsF,MAAb,CAAN,CAA2BD,MAA3B,CAAkC,qBAAlC,CANJ;AAOLpD,oCAAY,EAAEjC,KAAK,CAACA,KAAN,CAAYmF,aAAZ,CAA0B1D;AAPnC,uBAHI;AAYXN,0BAAI,EAAE,KAAKA,IAZA;AAaXoE,0BAAI,EAAE,IAAIf,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B,CAbK;AAcXe,4BAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AAdG,qBAhBJ;AAiCTb,2BAAO,CAACC,GAAR,CAAYhE,IAAZ;AAjCS;AAAA,2BAmCHV,KAAI,CACL8F,IADC,CACI,kBADJ,EACwBpF,IADxB,EAEDqF,IAFC,CAEI,kBAAO,EAAK;AAEhB,0BAAIC,QAAO,KAAM,MAAjB,EAAyB;AACvB9G,4BAAI,CAAC+G,IAAL,CAAU;AACRC,kCAAQ,EAAE,SADF;AAERC,8BAAI,EAAE,SAFE;AAGR7F,+BAAK,EAAE,gBAHC;AAIR8F,2CAAiB,EAAE,KAJX;AAKRC,+BAAK,EAAE;AALC,yBAAV;;AAOA,8BAAI,CAACC,oBAAL;AACF;AACD,qBAdC,EAeDC,KAfC,CAeK,eAAI,EAAK;AACd,0BAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,4BAAIQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAnC,EAA+D;AAC7D,gCAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AAEAzH,4BAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,oEAAnB,EAAyF,OAAzF;AACF;AACD,qBAxBC,CAnCG;;AAAA;AAAA;AAAA,2BA4DH/G,IAAI,CAAC+G,IAAL,CAAU;AACdC,8BAAQ,EAAE,QADI;AAEdC,0BAAI,EAAE,SAFQ;AAGd7F,2BAAK,EAAE,yBAHO;AAId8F,uCAAiB,EAAE,KAJL;AAKdC,2BAAK,EAAE;AALO,qBAAV,CA5DG;;AAAA;AAmET,yBAAKjF,UAAL,GAAkB,KAAlB;;AAnES;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,WA7BM;AAkGfwF,mBAAW;AAAA,qFAAE,kBAAgBvG,KAAhB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACXoE,2BAAO,CAACC,GAAR,CAAYrE,KAAZ;AACA,yBAAKiB,MAAL,GAAc,IAAd;AACMW,6BAHK,GAGO5B,KAAK,CAACA,KAAN,CAAYC,KAHnB;AAIL4B,gCAJK,GAIU7B,KAAK,CAACA,KAAN,CAAYmE,UAAZ,CAAuB,CAAvB,CAJV;AAMX,yBAAKhD,IAAL,GAAYnB,KAAK,CAACA,KAAlB;AACA,yBAAKmB,IAAL,CAAUmD,OAAV,CAAkB,OAAlB,EAA2B1C,SAA3B;AACA,yBAAKT,IAAL,CAAUmD,OAAV,CAAkB,YAAlB,EAAgCzC,YAAhC;AAEI0C,wBAVO,GAUA,IAAIC,IAAJ,EAVA;AAWPC,qBAXO,GAWHF,IAAI,CAACG,OAAL,EAXG;AAYPC,qBAZO,GAYHJ,IAAI,CAACK,QAAL,EAZG;AAaPC,qBAbO,GAaHN,IAAI,CAACO,WAAL,EAbG;AAcX,wBAAIN,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B;AAEMpE,wBAhBK,GAgBE;AACX0E,2BAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,+BAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXjF,2BAAK,EAAE;AACL2B,8BAAM,EAAE3B,KAAK,CAACA,KAAN,CAAYqB,EADf;AAELO,iCAAS,EAAEA,SAFN;AAGLC,oCAAY,EAAE7B,KAAK,CAACA,KAAN,CAAYmE,UAAZ,CAAuB,CAAvB,CAHT;AAILrC,uCAAe,EAAE9B,KAAK,CAACA,KAAN,CAAYmF,aAAZ,CAA0B7D,WAJtC;AAKLS,iCAAS,EAAEnC,MAAM,CAACI,KAAK,CAACA,KAAN,CAAYoF,QAAb,CAAN,CAA6BC,MAA7B,CAAoC,qBAApC,CALN;AAMLrD,+BAAO,EAAEpC,MAAM,CAACI,KAAK,CAACA,KAAN,CAAYsF,MAAb,CAAN,CAA2BD,MAA3B,CAAkC,qBAAlC,CANJ;AAOLpD,oCAAY,EAAEjC,KAAK,CAACA,KAAN,CAAYmF,aAAZ,CAA0B1D;AAPnC,uBAHI;AAYXN,0BAAI,EAAE,KAAKA,IAZA;AAaXoE,0BAAI,EAAE,IAAIf,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B,CAbK;AAcXe,4BAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AAdG,qBAhBF;AAAA;AAAA,2BAiCLtF,KAAI,CACL8F,IADC,CACI,kBADJ,EACwBpF,IADxB,EAEDqF,IAFC,CAEI,kBAAO,EAAK;AAEhB,0BAAIC,QAAO,KAAM,MAAjB,EAAyB;AACvB9G,4BAAI,CAAC+G,IAAL,CAAU;AACRC,kCAAQ,EAAE,SADF;AAERC,8BAAI,EAAE,SAFE;AAGR7F,+BAAK,EAAE,gBAHC;AAIR8F,2CAAiB,EAAE,KAJX;AAKRC,+BAAK,EAAE;AALC,yBAAV;;AAOA,8BAAI,CAACC,oBAAL;AACF;AACD,qBAdC,EAeDC,KAfC,CAeK,eAAI,EAAK;AACd,0BAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,4BAAIQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAnC,EAA+D;AAC7D,gCAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AAEAzH,4BAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,oEAAnB,EAAyF,OAAzF;AACF;AACD,qBAxBC,CAjCK;;AAAA;AAAA;AAAA,2BA0DL/G,IAAI,CAAC+G,IAAL,CAAU;AACdC,8BAAQ,EAAE,QADI;AAEdC,0BAAI,EAAE,SAFQ;AAGd7F,2BAAK,EAAE,yBAHO;AAId8F,uCAAiB,EAAE,KAJL;AAKdC,2BAAK,EAAE;AALO,qBAAV,CA1DK;;AAAA;AAiEX,yBAAKjF,UAAL,GAAkB,KAAlB;;AAjEW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,WAlGI;AAqKfyF,YAAI,EAAE,cAASC,CAAT,EAAW;AAAA;;AAEf,cAAIlF,KAAI,GAAI3B,MAAM,CAAC6G,CAAC,CAAClC,IAAH,CAAN,CAAemC,GAAf,CAAmB,CAAnB,EAAsB,MAAtB,EAA8BrB,MAA9B,CAAqC,qBAArC,CAAZ;AACA,cAAI7D,GAAE,GAAI5B,MAAM,CAAC2B,KAAD,CAAN,CAAcmF,GAAd,CAAkB,CAAlB,EAAqB,OAArB,EAA8BrB,MAA9B,CAAqC,qBAArC,CAAV;AACA,cAAIrF,KAAI,GAAI2G,IAAI,CAACC,KAAL,CAAW5B,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAZ;AAEA,cAAMrD,SAAQ,GAAI5B,KAAK,CAACC,KAAxB;AACA,cAAM4B,YAAW,GAAI7B,KAAK,CAACG,QAA3B;AAEA,eAAKgB,IAAL,GAAYnB,KAAZ;AACA,eAAKmB,IAAL,CAAU,OAAV,IAAqBS,SAArB;AACA,eAAKT,IAAL,CAAU,YAAV,IAA0BU,YAA1B;AAEA,cAAI0C,IAAG,GAAI,IAAIC,IAAJ,EAAX;AACA,cAAIC,IAAIF,IAAI,CAACG,OAAL,EAAR;AACA,cAAIC,IAAIJ,IAAI,CAACK,QAAL,EAAR;AACA,cAAIC,IAAIN,IAAI,CAACO,WAAL,EAAR;AACA,cAAIN,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B;AAEA,cAAMpE,IAAG,GAAI;AACX0E,iBAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,qBAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXjF,iBAAK,EAAE;AACL2B,oBAAM,EAAE3B,KAAK,CAACqB,EADT;AAELO,uBAAS,EAAEA,SAFN;AAGLC,0BAAY,EAAE7B,KAAK,CAACG,QAHf;AAIL2B,6BAAe,EAAE9B,KAAK,CAACsB,WAJlB;AAKLS,uBAAS,EAAER,KALN;AAMLS,qBAAO,EAAER,GANJ;AAOLS,0BAAY,EAAEjC,KAAK,CAACyB;AAPf,aAHI;AAYXN,gBAAI,EAAE,KAAKA,IAZA;AAaXoE,gBAAI,EAAE,IAAIf,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B,CAbK;AAcXe,kBAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AAdG,WAAb;AAiBAtF,eAAI,CACC8F,IADL,CACU,kBADV,EAC8BpF,IAD9B,EAEKqF,IAFL,CAEU,kBAAO,EAAK;AAEhB,gBAAIC,QAAO,KAAM,MAAjB,EAAyB;AACvB9G,kBAAI,CAAC+G,IAAL,CAAU;AACRC,wBAAQ,EAAE,SADF;AAERC,oBAAI,EAAE,SAFE;AAGR7F,qBAAK,EAAE,gBAHC;AAIR8F,iCAAiB,EAAE,KAJX;AAKRC,qBAAK,EAAE;AALC,eAAV;AAOF;AACD,WAbL,EAcKE,KAdL,CAcW,eAAI,EAAK;AACd,gBAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,kBAAIQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAnC,EAA+D;AAC7D,sBAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AAEAzH,kBAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,oEAAnB,EAAyF,OAAzF;AACF;AACD,WAvBL;AAwBA,eAAK7E,UAAL,GAAkB,KAAlB;AAED;AAnOc;AAvEZ,KAAP;AA6SD,GA/TY;AAgUb8F,YAAU,EAAE;AACVvH,gBAAY,EAAZA,YADU;AAEVR,aAAS,EAATA,SAFU;AAGVC,gBAAY,EAAZA,YAHU;AAIVQ,aAAS,EAATA;AAJU,GAhUC;AAsUbuH,SAAO,EAAE;AAEDC,WAFC,qBAES;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACR1G,oBADQ,GACD;AACX0E,uBAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,2BAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXO,wBAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AAHG,iBADC;AAAA;AAAA,uBAORtF,KAAI,CACL8F,IADC,CACI,wBADJ,EAC8BpF,IAD9B,EAEDqF,IAFC,CAEI,kBAAO,EAAK;AAChB,wBAAI,CAACnD,eAAL,CAAqByE,MAArB,GAA8BrB,QAAQ,CAACtF,IAAvC;AACD,iBAJC,EAKD6F,KALC,CAKK,eAAI,EAAK;AACd,sBAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,wBAAGQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAlC,EAA6D;AAC3D,4BAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AAEAzH,wBAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,mEAAnB,EAAwF,OAAxF;AACF;AACD,iBAdC,CAPQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBf,KAxBM;AAyBPqB,cAzBO,sBAyBI1C,IAzBJ,EAyBU;AACf,UAAI2C,UAAS,GAAI,CACf,SADe,EAEf,UAFe,EAGf,OAHe,EAIf,OAJe,EAKf,KALe,EAMf,MANe,EAOf,MAPe,EAQf,QARe,EASf,WATe,EAUf,SAVe,EAWf,UAXe,EAYf,UAZe,CAAjB;AAcA,UAAIzC,IAAI,IAAID,IAAJ,CAASD,IAAT,CAAR;AAAA,UACI4C,KAAI,GAAI,KAAKD,UAAU,CAACzC,CAAC,CAACG,QAAF,EAAD,CAD3B;AAAA,UAEIwC,GAAE,GAAI,KAAK3C,CAAC,CAACC,OAAF,EAFf;AAAA,UAGI2C,IAAG,GAAI5C,CAAC,CAACK,WAAF,EAHX;AAIA,UAAIqC,KAAK,CAACG,MAAN,GAAe,CAAnB,EAAsBH,KAAI,GAAI,MAAMA,KAAd;AACtB,UAAIC,GAAG,CAACE,MAAJ,GAAa,CAAjB,EAAoBF,GAAE,GAAI,MAAMA,GAAZ;AACpB,aAAO,CAACA,GAAE,GAAI,GAAN,GAAYD,KAAb,EAAoBE,IAApB,EAA0BE,IAA1B,CAA+B,GAA/B,CAAP;AACD,KA/CM;AAgDPC,eAAW,EAAE,qBAAUjD,IAAV,EAAgBc,MAAhB,EAAwB;AACnCd,UAAG,GAAI3E,MAAM,CAAC2E,IAAD,CAAN,CAAac,MAAb,CAAoBA,MAApB,CAAP;AACA,aAAOd,IAAP;AACD,KAnDM;AAoDPlB,kBApDO,4BAoDU;AACf,UAAIoE,MAAM,CAACC,UAAP,IAAqB,GAArB,IAA4BD,MAAM,CAACC,UAAP,GAAoB,IAApD,EAA0D;AACxD,eAAO,cAAP;AACF,OAFA,MAEO,IAAID,MAAM,CAACC,UAAP,IAAqB,GAAzB,EAA8B;AACnC,eAAO,WAAP;AACF,OAFO,MAEA;AACL,eAAO,cAAP;AACF;AACD,KA5DM;;AA6DP;;;AAGA;AACMC,gBAjEC,wBAiEYlB,CAjEZ,EAiEe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACpB,sBAAI,CAACzF,SAAL,GAAiB,IAAjB,CADoB,CAGpB;;AACA,sBAAI,CAAClB,EAAL,CAAQ8H,MAAR;;AAJoB,qBAKhB,MAAI,CAAC9H,EAAL,CAAQ+H,QALQ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAQZ5H,qBARY,GAQJ,MAAI,CAACD,KAAL,CAAWC,KARP;AASZE,wBATY,GASD,MAAI,CAACH,KAAL,CAAWG,QATV;AAUd2H,2BAVc,GAUA,MAAI,CAACC,KAAL,CAAWC,YAAX,CAAwBC,MAAxB,EAVA,EAYlB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA,sBAAI,CAACpH,aAAL,GAAqBiH,WAAW,CAACI,QAAZ,CAAqB;AACxC7G,oBAAE,EAAE,MAAI,CAACH,YAAL,CAAkBoG,MAAlB,GAA2B,CADS;AAExCrH,uBAAK,EAALA,KAFwC;AAGxCsB,uBAAK,EAAE,MAAI,CAACc,MAH4B;AAIxCb,qBAAG,EAAE,MAAI,CAACc,QAJ8B;AAKxC6B,4BAAU,EAAE,CAAChE,QAAD;AAL4B,iBAArB,CAArB;;AAQA,sBAAI,CAACgI,UAAL;;AACA,sBAAI,CAACrH,SAAL,GAAiB,KAAjB;AACA,sBAAI,CAACI,YAAL,GAAoB,EAApB;;AAlEkB;AAoEpB,sBAAI,CAACF,SAAL,GAAiB,KAAjB;AACA,sBAAI,CAAChB,KAAL,GAAa,EAAb;;AArEoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsErB,KAvIM;AAwIP;AACAoI,aAzIO,qBAyIG3B,CAzIH,EAyIM;AACX,WAAKzF,SAAL,GAAiB,KAAjB;AACA,WAAKF,SAAL,GAAiB,KAAjB;AACA,WAAKd,KAAL,GAAa,EAAb;AACD,KA7IM;;AA8IP;;;AAEK;AACCqI,cAjJC,sBAiJU5B,CAjJV,EAiJa;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAClB,sBAAI,CAACxF,MAAL,GAAc,IAAd;AACMW,yBAFY,GAEA,MAAI,CAACF,SAAL,CAAeE,SAFf;AAGZC,4BAHY,GAGG,MAAI,CAACH,SAAL,CAAeG,YAHlB;;AAKlB,sBAAI,CAACV,IAAL,CAAUmD,OAAV,CAAkB,OAAlB,EAA2B1C,SAA3B;;AACA,sBAAI,CAACT,IAAL,CAAUmD,OAAV,CAAkB,YAAlB,EAAgCzC,YAAhC;;AAEI0C,oBARc,GAQP,IAAIC,IAAJ,EARO;AASdC,iBATc,GASVF,IAAI,CAACG,OAAL,EATU;AAUdC,iBAVc,GAUVJ,IAAI,CAACK,QAAL,EAVU;AAWdC,iBAXc,GAWVN,IAAI,CAACO,WAAL,EAXU;AAYlB,oBAAIN,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B;AAEMpE,oBAdY,GAcL;AACX0E,uBAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,2BAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXjF,uBAAK,EAAE,MAAI,CAAC0B,SAHD;AAIXP,sBAAI,EAAE,MAAI,CAACA,IAJA;AAKXoE,sBAAI,EAAE,IAAIf,IAAJ,CAASK,CAAT,EAAYF,CAAZ,EAAeF,IAAI,EAAnB,EAAuB,EAAvB,EAA2B,CAA3B,CALK;AAMXe,wBAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AANG,iBAdK;AAAA;AAAA,uBAuBZtF,KAAI,CACL8F,IADC,CACI,kBADJ,EACwBpF,IADxB,EAEDqF,IAFC,CAEI,kBAAO,EAAK;AAChB,wBAAI,CAACO,oBAAL;;AACA,sBAAGN,QAAO,KAAM,MAAhB,EAAuB;AACrB9G,wBAAI,CAAC+G,IAAL,CAAU;AACRC,8BAAQ,EAAE,SADF;AAERC,0BAAI,EAAE,SAFE;AAGR7F,2BAAK,EAAE,gBAHC;AAIR8F,uCAAiB,EAAE,KAJX;AAKRC,2BAAK,EAAE;AALC,qBAAV;AAOF;AACD,iBAbC,EAcDE,KAdC,CAcK,eAAI,EAAK;AACd,sBAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,wBAAGQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAlC,EAA6D;AAC3D,4BAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AAEAzH,wBAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,oEAAnB,EAAyF,OAAzF;AACF;AACD,iBAvBC,CAvBY;;AAAA;AA+ClB,sBAAI,CAACuC,UAAL;;AACA,sBAAI,CAACpH,UAAL,GAAkB,KAAlB;;AAhDkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiDnB,KAlMM;;AAmMP;;;AAGAuH,eAtMO,yBAsMO;AACZ,WAAKnH,IAAL,CAAUoH,MAAV;AACA,WAAKxH,UAAL,GAAkB,KAAlB;AACD,KAzMM;;AA0MP;;;;AAIA8C,eA9MO,uBA8MK2E,IA9ML,EA8MW;AAChB,WAAKtH,YAAL,GAAoBsH,IAApB;AACA,WAAK1H,SAAL,GAAiB,IAAjB;AACD,KAjNM;;AAkNP;;;AAGAiD,aArNO,qBAqNGyE,IArNH,EAqNS;AAAA;;AACd,WAAKrH,IAAL,GAAYqH,IAAI,CAACxI,KAAjB;AACA,WAAK0B,SAAL,CAAeC,MAAf,GAAwB,KAAKR,IAAL,CAAUsH,IAAV,CAAeC,QAAvC;AAEA,UAAMrI,IAAG,GAAI;AACX0E,aAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,iBAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGX0D,eAAO,EAAE,KAAKjH,SAAL,CAAeC,MAHb;AAIX6D,cAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AAJG,OAAb;AAOAtF,WAAK,CAAC8F,IAAN,CAAW,mBAAX,EAAgCpF,IAAhC,EACKqF,IADL,CACU,kBAAO,EAAK;AAChB,YAAIrF,IAAG,GAAIsF,QAAQ,CAACtF,IAAT,CAAc,CAAd,CAAX;AACA,cAAI,CAACqB,SAAL,CAAeE,SAAf,GAA2BvB,IAAI,CAACJ,KAAhC;AACA,cAAI,CAACyB,SAAL,CAAeI,eAAf,GAAiCzB,IAAI,CAACiB,WAAtC;AACA,cAAI,CAACI,SAAL,CAAeO,YAAf,GAA8B5B,IAAI,CAACoB,QAAnC;AACA,cAAI,CAACC,SAAL,CAAeG,YAAf,GAA8BxB,IAAI,CAACuI,SAAnC;AACA,cAAI,CAAClH,SAAL,CAAeK,SAAf,GAA2BnC,MAAM,CAACS,IAAI,CAACkB,KAAN,CAAN,CAAmB8D,MAAnB,CAA0B,qBAA1B,CAA3B;AACA,cAAI,CAAC3D,SAAL,CAAeM,OAAf,GAAyBpC,MAAM,CAACS,IAAI,CAACmB,GAAN,CAAN,CAAiB6D,MAAjB,CAAwB,qBAAxB,CAAzB;AACAjB,eAAO,CAACC,GAAR,CAAY,MAAI,CAAC3C,SAAL,CAAeK,SAAf,CAAyB8G,cAAzB,CAAwC,OAAxC,EAAiD;AAC3DrG,kBAAQ,EAAE;AADiD,SAAjD,CAAZ,EARgB,CAWhB;AACA;;AACA,cAAI,CAACzB,UAAL,GAAkB,IAAlB;AACD,OAfL,EAgBKmF,KAhBL,CAgBW,eAAI,EAAK;AACd,YAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,cAAIQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAnC,EAA+D;AAC7D,kBAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AAEAzH,cAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,oEAAnB,EAAyF,OAAzF;AACF;AACD,OAzBL;AA0BD,KA1PM;AA2PPkD,cA3PO,wBA2PM;AACX,WAAK/H,UAAL,GAAkB,KAAlB;AACD,KA7PM;AA8PPgI,WA9PO,qBA8PG;AAAA;;AACRlK,UAAI,CAAC+G,IAAL,CAAU;AACR3F,aAAK,EAAE,eADC;AAERM,YAAI,EAAE,mCAFE;AAGRuF,YAAI,EAAE,SAHE;AAIRkD,wBAAgB,EAAE,IAJV;AAKRC,0BAAkB,EAAE,SALZ;AAMRC,yBAAiB,EAAE,SANX;AAORC,yBAAiB,EAAE;AAPX,OAAV,EAQGzD,IARH,CAQQ,UAAC0D,MAAD,EAAY;AAClB,YAAIA,MAAM,CAACxI,KAAX,EAAkB;AAChB,gBAAI,CAAC0H,WAAL;;AACAzJ,cAAI,CAAC+G,IAAL,CAAU,UAAV,EAAsB,yBAAtB,EAAiD,SAAjD;AACF;AACD,OAbD;AAcD,KA7QM;AA8QDK,wBA9QC,kCA8QqB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACpB5F,oBADoB,GACb;AACX0E,uBAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,2BAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXO,wBAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AAHG,iBADa;AAAA;AAAA,uBAOpBtF,KAAI,CACL8F,IADC,CACI,wBADJ,EAC8BpF,IAD9B,EAEDqF,IAFC,CAEI,kBAAO,EAAK;AAChB,yBAAI,CAACnD,eAAL,CAAqByE,MAArB,GAA8BrB,QAAQ,CAACtF,IAAvC;AACD,iBAJC,EAKD6F,KALC,CAKK,eAAI,EAAK;AACd,sBAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,wBAAGQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAlC,EAA6D;AAC3D,6BAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AAEAzH,wBAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,mEAAnB,EAAwF,OAAxF;AACF;AACD,iBAdC,CAPoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsB3B,KApSM;;AAqSP;;;AAGA3B,gBAxSO,wBAwSM+C,MAxSN,EAwSc;AACnB,WAAKnG,aAAL,GAAqBmG,MAArB;AACD,KA1SM;;AA2SP;;;AAGAmB,cA9SO,wBA8SM;AACXtJ,UAAI,CAAC+G,IAAL,CAAU;AACRC,gBAAQ,EAAE,QADF;AAERC,YAAI,EAAE,SAFE;AAGR7F,aAAK,EAAE,uBAHC;AAIR8F,yBAAiB,EAAE,KAJX;AAKRC,aAAK,EAAE;AALC,OAAV;AAOD,KAtTM;AAuTPqD,cAvTO,sBAuTIrC,MAvTJ,EAuTW;AAChBA,YAAM,CAACsC,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpB,eAAO,IAAIhF,IAAJ,CAAS+E,CAAC,CAAChI,KAAX,IAAoB,IAAIiD,IAAJ,CAASgF,CAAC,CAACjI,KAAX,CAA3B,CADoB,CAC0B;AAC/C,OAFD;AAGD;AA3TM,GAtUI;AAmoBPkI,SAnoBO,qBAmoBG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEd,kBAAItK,SAAJ,CAAcuK,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAd,EAA0D;AACxDC,4BAAY,EAAE,iBAD0C;AAExDC,yBAAS,EAAE,mBAAUC,OAAV,EAAmB;AAAA;;AAE5B,sBAAInB,OAAM,GAAI,CAAd;AACA,sBAAMtI,IAAG,GAAI;AACX0E,yBAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,6BAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXO,0BAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB,CAHG;AAIXjF,yBAAK,EAAE;AACLC,2BAAK,EAAG6J,OAAO,CAACC,SADX;AAELxI,2BAAK,EAAE,IAAIiD,IAAJ,EAFF;AAGLoE,+BAAS,EAAEkB,OAAO,CAACE,YAAR,CAAqB,YAArB;AAHN;AAJI,mBAAb;AAWArK,uBAAK,CAAC8F,IAAN,CAAW,kBAAX,EAA+BpF,IAA/B,EAAqCqF,IAArC,CAA0C,kBAAO,EAAK;AACpD,wBAAIC,QAAQ,CAACsE,MAAT,KAAoB,GAAxB,EAA4B;AAC1BtB,6BAAM,GAAIhD,QAAQ,CAACtF,IAAT,CAAc,IAAd,CAAV;AAEA,0BAAIL,MAAI,GAAI;AACVqB,0BAAE,EAAEsH,OADM;AAEV1I,6BAAK,EAAE6J,OAAO,CAACC,SAFL;AAGVzI,mCAAW,EAAE,EAHH;AAIVnB,gCAAQ,EAAE2J,OAAO,CAACE,YAAR,CAAqB,YAArB,CAJA;AAKVzI,6BAAK,EAAE,IAAIiD,IAAJ,EALG;AAMV/C,gCAAQ,EAAE;AANA,uBAAZ;AASAuD,kCAAY,CAACkF,OAAb,CAAqB,eAArB,EAAsCvD,IAAI,CAACwD,SAAL,CAAenK,MAAf,CAAtC;AAEAnB,0BAAI,CAAC+G,IAAL,CAAU;AACRC,gCAAQ,EAAE,SADF;AAERC,4BAAI,EAAE,SAFE;AAGR7F,6BAAK,EAAE,gBAHC;AAIR8F,yCAAiB,EAAE,KAJX;AAKRC,6BAAK,EAAE;AALC,uBAAV;AAOF;AACD,mBAvBD,EAuBGE,KAvBH,CAuBS,eAAI,EAAK;AAChB,wBAAIC,KAAK,CAACR,QAAV,EAAoB;AAClB,0BAAGQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAlC,EAA6D;AAC3D,+BAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AACAzH,0BAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,kEAAnB,EAAuF,OAAvF;AACF;AACD,mBA9BD;AA+BA,sBAAI5F,KAAI,GAAI2G,IAAI,CAACC,KAAL,CAAW5B,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAZ;AACA,yBAAO;AACL5D,sBAAE,EAAErB,KAAK,CAACqB,EADL;AAELpB,yBAAK,EAAE6J,OAAO,CAACC,SAFV;AAGLxI,yBAAK,EAAE,IAAIiD,IAAJ,EAHF;AAILoE,6BAAS,EAAEkB,OAAO,CAACE,YAAR,CAAqB,YAArB;AAJN,mBAAP;AAMD;AAtDuD,eAA1D;AAyDM3J,kBA3DQ,GA2DD;AACX0E,qBAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADI;AAEXC,yBAAS,EAAEF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFA;AAGXO,sBAAM,EAAER,YAAY,CAACC,OAAb,CAAqB,IAArB;AAHG,eA3DC;AAAA;AAAA,qBAiERtF,KAAI,CACL8F,IADC,CACI,wBADJ,EAC8BpF,IAD9B,EAEDqF,IAFC,CAEI,kBAAO,EAAK;AAChB,uBAAI,CAACnD,eAAL,CAAqByE,MAArB,GAA8BrB,QAAQ,CAACtF,IAAvC;AACD,eAJC,EAKD6F,KALC,CAKK,eAAI,EAAK;AACd,oBAAIC,KAAK,CAACR,QAAV,EAAoB;AAElB,sBAAGQ,KAAK,CAACR,QAAN,CAAetF,IAAf,CAAoB+F,MAApB,KAA+B,0BAAlC,EAA6D;AAC3D,2BAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF;;AACAzH,sBAAI,CAAC+G,IAAL,CAAU,OAAV,EAAmB,mEAAnB,EAAwF,OAAxF;AACF;AACD,eAbC,CAjEQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+Ef;AAltBY,CAAf","names":["Swal","SimpleBar","CalendarIcon","dayGridPlugin","timeGridPlugin","interactionPlugin","Draggable","bootstrapPlugin","listPlugin","FullCalendar","flatPickr","required","helpers","useVuelidate","axios","moment","setup","v$","validations","event","title","withMessage","category","page","data","items","text","href","active","categories","name","value","currentEvents","showModal","eventModal","submitted","submit","newEventData","edit","deleteId","id","description","start","end","location","editevent","editID","editTitle","editcategory","editDescription","editStart","editEnd","editLocation","dateTimeConfig","enableTime","dateFormat","toDate","fromDate","calendarOptions","timeZone","Intl","DateTimeFormat","resolvedOptions","droppable","navLinks","plugins","themeSystem","headerToolbar","left","center","right","windowResize","getInitialView","initialView","editable","selectable","selectMirror","dayMaxEvents","weekends","dateClick","dateClicked","eventClick","editEvent","eventsSet","handleEvents","eventDrop","classNames","console","log","setProp","date","Date","d","getDate","m","getMonth","y","getFullYear","token","localStorage","getItem","userEmail","extendedProps","startStr","format","endStr","test","userID","post","then","response","fire","position","icon","showConfirmButton","timer","updateCalendarEvents","catch","error","detail","$router","push","eventResize","drop","e","add","JSON","parse","components","methods","getData","events","formatDate","monthNames","month","day","year","length","join","formatDate2","window","innerWidth","handleSubmit","$touch","$invalid","calendarApi","$refs","fullCalendar","getApi","addEvent","successmsg","hideModal","editSubmit","deleteEvent","remove","info","_def","publicId","eventID","className","toLocaleString","closeModal","confirm","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","sortEvents","sort","a","b","mounted","document","getElementById","itemSelector","eventData","eventEl","innerText","getAttribute","status","setItem","stringify"],"sourceRoot":"","sources":["C:\\wamp64\\www\\crm\\frontend\\src\\components\\calendar.vue"],"sourcesContent":["<script>\r\nimport Swal from \"sweetalert2\";\r\nimport \"@fullcalendar/core/vdom\";\r\nimport { SimpleBar } from \"simplebar-vue3\";\r\nimport { CalendarIcon } from \"@zhuowenli/vue-feather-icons\";\r\n\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\r\nimport interactionPlugin, { Draggable } from \"@fullcalendar/interaction\";\r\nimport bootstrapPlugin from \"@fullcalendar/bootstrap\";\r\nimport listPlugin from \"@fullcalendar/list\";\r\n\r\nimport FullCalendar from \"@fullcalendar/vue3\";\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\n\r\nimport { required, helpers } from \"@vuelidate/validators\";\r\nimport useVuelidate from \"@vuelidate/core\";\r\n\r\n// import { INITIAL_EVENTS } from \"./calendar\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment/moment\";\r\n// import moment from \"moment\";\r\n\r\nexport default {\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  validations: {\r\n    event: {\r\n      title: {\r\n        required: helpers.withMessage(\"Title is required\", required),\r\n      },\r\n      category: {\r\n        required: helpers.withMessage(\"Category is required\", required),\r\n      },\r\n    },\r\n  },\r\n  page: {\r\n    title: \"Calendar\",\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Calendar\",\r\n      items: [\r\n        {\r\n          text: \"Apps\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Calendar\",\r\n          active: true,\r\n        },\r\n      ],\r\n      categories: [\r\n        {\r\n          name: 'Danger',\r\n          value: 'bg-danger'\r\n        },\r\n        {\r\n          name: 'Success',\r\n          value: 'bg-success'\r\n        },\r\n        {\r\n          name: 'Primary',\r\n          value: 'bg-primary'\r\n        },\r\n        {\r\n          name: 'Info',\r\n          value: 'bg-info'\r\n        },\r\n        {\r\n          name: 'Dark',\r\n          value: 'bg-dark'\r\n        },\r\n        {\r\n          name: 'Warning',\r\n          value: 'bg-warning'\r\n        },\r\n      ],\r\n      currentEvents: [],\r\n      showModal: false,\r\n      eventModal: false,\r\n      submitted: false,\r\n      submit: false,\r\n      newEventData: {},\r\n      edit: {},\r\n      deleteId: {},\r\n      event: {\r\n        id: \"\",\r\n        title: \"\",\r\n        description: \"\",\r\n        category: \"\",\r\n        start: null,\r\n        end: null,\r\n        location: \"\",\r\n      },\r\n      editevent: {\r\n        editID: 0,\r\n        editTitle: \"\",\r\n        editcategory: \"\",\r\n        editDescription: \"\",\r\n        editStart: \"\",\r\n        editEnd: \"\",\r\n        editLocation: \"\",\r\n      },\r\n      description: \"\",\r\n      dateTimeConfig: {\r\n        enableTime: true,\r\n        dateFormat: \"F j, Y H:i K\"\r\n      },\r\n      toDate:  null,\r\n      fromDate: null,\r\n      calendarOptions: {\r\n        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        droppable: true,\r\n        navLinks: true,\r\n        plugins: [\r\n          dayGridPlugin,\r\n          timeGridPlugin,\r\n          interactionPlugin,\r\n          bootstrapPlugin,\r\n          listPlugin,\r\n        ],\r\n        themeSystem: \"bootstrap\",\r\n        headerToolbar: {\r\n          left: \"prev,next today\",\r\n          center: \"title\",\r\n          right: \"dayGridMonth,timeGridWeek,timeGridDay,listMonth\",\r\n        },\r\n        windowResize: () => {\r\n          this.getInitialView();\r\n        },\r\n        initialView: this.getInitialView(),\r\n        editable: true,\r\n        selectable: true,\r\n        selectMirror: true,\r\n        dayMaxEvents: true,\r\n        weekends: true,\r\n        dateClick: this.dateClicked,\r\n        eventClick: this.editEvent,\r\n        eventsSet: this.handleEvents,\r\n        eventDrop: async function (event) {\r\n          this.submit = true;\r\n          const editTitle = event.event.title;\r\n          const editcategory = event.event.classNames[0];\r\n          console.log(editcategory)\r\n\r\n          this.edit = event.event;\r\n          this.edit.setProp(\"title\", editTitle);\r\n          this.edit.setProp(\"classNames\", editcategory);\r\n\r\n          var date = new Date();\r\n          var d = date.getDate();\r\n          var m = date.getMonth();\r\n          var y = date.getFullYear();\r\n          new Date(y, m, d + 24, 16, 0)\r\n\r\n          const data = {\r\n            token: localStorage.getItem('jwt'),\r\n            userEmail: localStorage.getItem('email'),\r\n            event: {\r\n              editID: event.event.id,\r\n              editTitle: editTitle,\r\n              editcategory: event.event.classNames[0],\r\n              editDescription: event.event.extendedProps.description,\r\n              editStart: moment(event.event.startStr).format('MMMM D, YYYY h:mm A'),\r\n              editEnd: moment(event.event.endStr).format('MMMM D, YYYY h:mm A'),\r\n              editLocation: event.event.extendedProps.location,\r\n            },\r\n            edit: this.edit,\r\n            test: new Date(y, m, d + 24, 16, 0),\r\n            userID: localStorage.getItem('id')\r\n          }\r\n\r\n          console.log(data)\r\n\r\n          await axios\r\n              .post('/api/updateEvent', data)\r\n              .then(response => {\r\n\r\n                if (response === 'True') {\r\n                  Swal.fire({\r\n                    position: \"top-end\",\r\n                    icon: \"success\",\r\n                    title: \"Event updated!\",\r\n                    showConfirmButton: false,\r\n                    timer: 2000,\r\n                  });\r\n                  this.updateCalendarEvents()\r\n                }\r\n              })\r\n              .catch(error => {\r\n                if (error.response) {\r\n\r\n                  if (error.response.data.detail === 'Your session is expired!') {\r\n                    this.$router.push('logout')\r\n                  }\r\n\r\n                  Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n                }\r\n              })\r\n          await Swal.fire({\r\n            position: \"center\",\r\n            icon: \"success\",\r\n            title: \"Event has been updated!\",\r\n            showConfirmButton: false,\r\n            timer: 1000,\r\n          });\r\n          this.eventModal = false;\r\n        },\r\n        eventResize: async function (event) {\r\n          console.log(event)\r\n          this.submit = true;\r\n          const editTitle = event.event.title;\r\n          const editcategory = event.event.classNames[0];\r\n\r\n          this.edit = event.event;\r\n          this.edit.setProp(\"title\", editTitle);\r\n          this.edit.setProp(\"classNames\", editcategory);\r\n\r\n          var date = new Date();\r\n          var d = date.getDate();\r\n          var m = date.getMonth();\r\n          var y = date.getFullYear();\r\n          new Date(y, m, d + 24, 16, 0)\r\n\r\n          const data = {\r\n            token: localStorage.getItem('jwt'),\r\n            userEmail: localStorage.getItem('email'),\r\n            event: {\r\n              editID: event.event.id,\r\n              editTitle: editTitle,\r\n              editcategory: event.event.classNames[0],\r\n              editDescription: event.event.extendedProps.description,\r\n              editStart: moment(event.event.startStr).format('MMMM D, YYYY h:mm A'),\r\n              editEnd: moment(event.event.endStr).format('MMMM D, YYYY h:mm A'),\r\n              editLocation: event.event.extendedProps.location\r\n            },\r\n            edit: this.edit,\r\n            test: new Date(y, m, d + 24, 16, 0),\r\n            userID: localStorage.getItem('id')\r\n          }\r\n\r\n          await axios\r\n              .post('/api/updateEvent', data)\r\n              .then(response => {\r\n\r\n                if (response === 'True') {\r\n                  Swal.fire({\r\n                    position: \"top-end\",\r\n                    icon: \"success\",\r\n                    title: \"Event updated!\",\r\n                    showConfirmButton: false,\r\n                    timer: 1000,\r\n                  });\r\n                  this.updateCalendarEvents()\r\n                }\r\n              })\r\n              .catch(error => {\r\n                if (error.response) {\r\n\r\n                  if (error.response.data.detail === 'Your session is expired!') {\r\n                    this.$router.push('logout')\r\n                  }\r\n\r\n                  Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n                }\r\n              })\r\n          await Swal.fire({\r\n            position: \"center\",\r\n            icon: \"success\",\r\n            title: \"Event has been updated!\",\r\n            showConfirmButton: false,\r\n            timer: 1000,\r\n          });\r\n          this.eventModal = false;\r\n        },\r\n        drop: function(e){\r\n\r\n          let start = moment(e.date).add(1, 'days').format('MMMM D, YYYY h:mm A');\r\n          let end = moment(start).add(1, 'hours').format('MMMM D, YYYY h:mm A');\r\n          let event = JSON.parse(localStorage.getItem('creatingEvent'))\r\n\r\n          const editTitle = event.title;\r\n          const editcategory = event.category;\r\n\r\n          this.edit = event;\r\n          this.edit[\"title\"] = editTitle;\r\n          this.edit[\"classNames\"] = editcategory;\r\n\r\n          var date = new Date();\r\n          var d = date.getDate();\r\n          var m = date.getMonth();\r\n          var y = date.getFullYear();\r\n          new Date(y, m, d + 24, 16, 0)\r\n\r\n          const data = {\r\n            token: localStorage.getItem('jwt'),\r\n            userEmail: localStorage.getItem('email'),\r\n            event: {\r\n              editID: event.id,\r\n              editTitle: editTitle,\r\n              editcategory: event.category,\r\n              editDescription: event.description,\r\n              editStart: start,\r\n              editEnd: end,\r\n              editLocation: event.location,\r\n            },\r\n            edit: this.edit,\r\n            test: new Date(y, m, d + 24, 16, 0),\r\n            userID: localStorage.getItem('id')\r\n          }\r\n\r\n          axios\r\n              .post('/api/updateEvent', data)\r\n              .then(response => {\r\n\r\n                if (response === 'True') {\r\n                  Swal.fire({\r\n                    position: \"top-end\",\r\n                    icon: \"success\",\r\n                    title: \"Event updated!\",\r\n                    showConfirmButton: false,\r\n                    timer: 2000,\r\n                  });\r\n                }\r\n              })\r\n              .catch(error => {\r\n                if (error.response) {\r\n\r\n                  if (error.response.data.detail === 'Your session is expired!') {\r\n                    this.$router.push('logout')\r\n                  }\r\n\r\n                  Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n                }\r\n              })\r\n          this.eventModal = false;\r\n\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    FullCalendar,\r\n    SimpleBar,\r\n    CalendarIcon,\r\n    flatPickr,\r\n  },\r\n  methods: {\r\n\r\n    async getData() {\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n      }\r\n\r\n      await axios\r\n          .post('/api/getCalendarEvents', data)\r\n          .then(response => {\r\n            this.calendarOptions.events = response.data;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    formatDate(date) {\r\n      var monthNames = [\r\n        \"January\",\r\n        \"February\",\r\n        \"March\",\r\n        \"April\",\r\n        \"May\",\r\n        \"June\",\r\n        \"July\",\r\n        \"August\",\r\n        \"September\",\r\n        \"October\",\r\n        \"November\",\r\n        \"December\",\r\n      ];\r\n      var d = new Date(date),\r\n          month = \"\" + monthNames[d.getMonth()],\r\n          day = \"\" + d.getDate(),\r\n          year = d.getFullYear();\r\n      if (month.length < 2) month = \"0\" + month;\r\n      if (day.length < 2) day = \"0\" + day;\r\n      return [day + \" \" + month, year].join(\",\");\r\n    },\r\n    formatDate2: function (date, format) {\r\n      date = moment(date).format(format)\r\n      return date;\r\n    },\r\n    getInitialView() {\r\n      if (window.innerWidth >= 768 && window.innerWidth < 1200) {\r\n        return \"timeGridWeek\";\r\n      } else if (window.innerWidth <= 768) {\r\n        return \"listMonth\";\r\n      } else {\r\n        return \"dayGridMonth\";\r\n      }\r\n    },\r\n    /**\r\n     * Modal form submit\r\n     */\r\n    // eslint-disable-next-line no-unused-vars\r\n    async handleSubmit(e) {\r\n      this.submitted = true;\r\n\r\n      // stop here if form is invalid\r\n      this.v$.$touch();\r\n      if (this.v$.$invalid) {\r\n        return;\r\n      } else {\r\n        const title = this.event.title;\r\n        const category = this.event.category;\r\n        let calendarApi = this.$refs.fullCalendar.getApi();\r\n\r\n        // console.log(calendarApi);\r\n\r\n        // const data = {\r\n        //   token: localStorage.getItem('jwt'),\r\n        //   userEmail: localStorage.getItem('email'),\r\n        //   userID: localStorage.getItem('id'),\r\n        //   event: {\r\n        //     title: eventEl.innerText,\r\n        //     start: new Date(),\r\n        //     className: eventEl.getAttribute(\"data-class\"),\r\n        //   }\r\n        // }\r\n        //\r\n        // await axios\r\n        //     .post('/api/createEvent', data)\r\n        //     .then(response => {\r\n        //       if (response){\r\n        //         Swal.fire({\r\n        //           position: \"top-end\",\r\n        //           icon: \"success\",\r\n        //           title: \"Event created!\",\r\n        //           showConfirmButton: false,\r\n        //           timer: 1000,\r\n        //         });\r\n        //         this.updateCalendarEvents()\r\n        //       }\r\n        //     })\r\n        //     .catch(error => {\r\n        //       if (error.response) {\r\n        //\r\n        //         if(error.response.data.detail === 'Your session is expired!'){\r\n        //           this.$router.push('logout')\r\n        //         }\r\n        //\r\n        //         Swal.fire(\"Oops!\", \"Calendar Events couldn't be saved, please contact your SysAdmin.\", \"error\")\r\n        //       }\r\n        //     })\r\n\r\n        // return {\r\n        //   title: eventEl.innerText,\r\n        //   start: new Date(),\r\n        //   className: eventEl.getAttribute(\"data-class\"),\r\n        // };\r\n\r\n        this.currentEvents = calendarApi.addEvent({\r\n          id: this.newEventData.length + 1,\r\n          title,\r\n          start: this.toDate,\r\n          end: this.fromDate,\r\n          classNames: [category],\r\n        });\r\n\r\n        this.successmsg();\r\n        this.showModal = false;\r\n        this.newEventData = {};\r\n      }\r\n      this.submitted = false;\r\n      this.event = {};\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    hideModal(e) {\r\n      this.submitted = false;\r\n      this.showModal = false;\r\n      this.event = {};\r\n    },\r\n    /**\r\n     * Edit event modal submit\r\n     */  // eslint-disable-next-line no-unused-vars\r\n    async editSubmit(e) {\r\n      this.submit = true;\r\n      const editTitle = this.editevent.editTitle;\r\n      const editcategory = this.editevent.editcategory;\r\n\r\n      this.edit.setProp(\"title\", editTitle);\r\n      this.edit.setProp(\"classNames\", editcategory);\r\n\r\n      var date = new Date();\r\n      var d = date.getDate();\r\n      var m = date.getMonth();\r\n      var y = date.getFullYear();\r\n      new Date(y, m, d + 24, 16, 0)\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        event: this.editevent,\r\n        edit: this.edit,\r\n        test: new Date(y, m, d + 24, 16, 0),\r\n        userID: localStorage.getItem('id')\r\n      }\r\n\r\n      await axios\r\n          .post('/api/updateEvent', data)\r\n          .then(response => {\r\n            this.updateCalendarEvents()\r\n            if(response === 'True'){\r\n              Swal.fire({\r\n                position: \"top-end\",\r\n                icon: \"success\",\r\n                title: \"Event updated!\",\r\n                showConfirmButton: false,\r\n                timer: 1000,\r\n              });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n      this.successmsg();\r\n      this.eventModal = false;\r\n    },\r\n    /**\r\n     * Delete event\r\n     */\r\n    deleteEvent() {\r\n      this.edit.remove();\r\n      this.eventModal = false;\r\n    },\r\n    /**\r\n     * Click any date to add event\r\n     * Modal open for add event\r\n     */\r\n    dateClicked(info) {\r\n      this.newEventData = info;\r\n      this.showModal = true;\r\n    },\r\n    /**\r\n     * Modal open for edit event\r\n     */\r\n    editEvent(info) {\r\n      this.edit = info.event;\r\n      this.editevent.editID = this.edit._def.publicId\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        eventID: this.editevent.editID,\r\n        userID: localStorage.getItem('id')\r\n      }\r\n\r\n      axios.post('/api/getEventByid', data)\r\n          .then(response => {\r\n            let data = response.data[0]\r\n            this.editevent.editTitle = data.title;\r\n            this.editevent.editDescription = data.description;\r\n            this.editevent.editLocation = data.location;\r\n            this.editevent.editcategory = data.className;\r\n            this.editevent.editStart = moment(data.start).format('MMMM D, YYYY h:mm A');\r\n            this.editevent.editEnd = moment(data.end).format('MMMM D, YYYY h:mm A');\r\n            console.log(this.editevent.editStart.toLocaleString('en-US', {\r\n              timeZone: 'America/New_York',\r\n            }))\r\n            // this.editevent.editStart = this.edit._instance.range.start;\r\n            // this.editevent.editEnd = this.edit._instance.range.end;\r\n            this.eventModal = true;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if (error.response.data.detail === 'Your session is expired!') {\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    closeModal() {\r\n      this.eventModal = false;\r\n    },\r\n    confirm() {\r\n      Swal.fire({\r\n        title: \"Are you sure?\",\r\n        text: \"You won't be able to delete this!\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        confirmButtonColor: \"#34c38f\",\r\n        cancelButtonColor: \"#f46a6a\",\r\n        confirmButtonText: \"Yes, delete it!\",\r\n      }).then((result) => {\r\n        if (result.value) {\r\n          this.deleteEvent();\r\n          Swal.fire(\"Deleted!\", \"Event has been deleted.\", \"success\");\r\n        }\r\n      });\r\n    },\r\n    async updateCalendarEvents(){\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n      }\r\n\r\n      await axios\r\n          .post('/api/getCalendarEvents', data)\r\n          .then(response => {\r\n            this.calendarOptions.events = response.data;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    /**\r\n     * Show list of events\r\n     */\r\n    handleEvents(events) {\r\n      this.currentEvents = events;\r\n    },\r\n    /**\r\n     * Show successfull Save Dialog\r\n     */\r\n    successmsg() {\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"success\",\r\n        title: \"Event has been saved!\",\r\n        showConfirmButton: false,\r\n        timer: 1000,\r\n      });\r\n    },\r\n    sortEvents(events){\r\n      events.sort((a, b) => {\r\n        return new Date(a.start) - new Date(b.start); // descending\r\n      })\r\n    },\r\n  },\r\n  async mounted() {\r\n\r\n    new Draggable(document.getElementById(\"external-events\"), {\r\n      itemSelector: \".external-event\",\r\n      eventData: function (eventEl) {\r\n\r\n        let eventID = 0;\r\n        const data = {\r\n          token: localStorage.getItem('jwt'),\r\n          userEmail: localStorage.getItem('email'),\r\n          userID: localStorage.getItem('id'),\r\n          event: {\r\n            title:  eventEl.innerText,\r\n            start: new Date(),\r\n            className: eventEl.getAttribute(\"data-class\"),\r\n          }\r\n        }\r\n\r\n        axios.post('/api/createEvent', data).then(response => {\r\n          if (response.status === 200){\r\n            eventID = response.data['ID']\r\n\r\n            let event = {\r\n              id: eventID,\r\n              title: eventEl.innerText,\r\n              description: '',\r\n              category: eventEl.getAttribute(\"data-class\"),\r\n              start: new Date(),\r\n              location: ''\r\n            }\r\n\r\n            localStorage.setItem('creatingEvent', JSON.stringify(event))\r\n\r\n            Swal.fire({\r\n              position: \"top-end\",\r\n              icon: \"success\",\r\n              title: \"Event created!\",\r\n              showConfirmButton: false,\r\n              timer: 1000,\r\n            });\r\n          }\r\n        }).catch(error => {\r\n          if (error.response) {\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n            Swal.fire(\"Oops!\", \"Calendar Events couldn't be saved, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n        let event = JSON.parse(localStorage.getItem('creatingEvent'))\r\n        return {\r\n          id: event.id,\r\n          title: eventEl.innerText,\r\n          start: new Date(),\r\n          className: eventEl.getAttribute(\"data-class\"),\r\n        };\r\n      },\r\n    });\r\n\r\n    const data = {\r\n      token: localStorage.getItem('jwt'),\r\n      userEmail: localStorage.getItem('email'),\r\n      userID: localStorage.getItem('id'),\r\n    }\r\n\r\n    await axios\r\n        .post('/api/getCalendarEvents', data)\r\n        .then(response => {\r\n          this.calendarOptions.events = response.data;\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n            Swal.fire(\"Oops!\", \"Calendar Events couldn't be loaded, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-3\">\r\n          <div class=\"card card-h-100\">\r\n            <div class=\"card-body\">\r\n              <button class=\"btn btn-primary w-100\" id=\"btn-new-event\" @click=\"showModal = true\">\r\n                <i class=\"mdi mdi-plus\"></i> Create New Event\r\n              </button>\r\n\r\n              <div id=\"external-events\">\r\n                <br />\r\n                <p class=\"text-muted\">\r\n                  Drag and drop your event or click in the calendar\r\n                </p>\r\n                <div class=\"external-event fc-event bg-soft-success text-success\"\r\n                    data-class=\"bg-soft-success\"\r\n                >\r\n                  <i class=\"mdi mdi-checkbox-blank-circle font-size-11 me-2\"\r\n                  ></i\r\n                  >New Event\r\n                </div>\r\n                <div class=\"external-event fc-event bg-soft-info text-info\"\r\n                    data-class=\"bg-soft-info\"\r\n                >\r\n                  <i class=\"mdi mdi-checkbox-blank-circle font-size-11 me-2\"\r\n                  ></i\r\n                  >Meeting\r\n                </div>\r\n                <div class=\"external-event fc-event bg-soft-warning text-warning\"\r\n                    data-class=\"bg-soft-warning\"\r\n                >\r\n                  <i class=\"mdi mdi-checkbox-blank-circle font-size-11 me-2\"\r\n                  ></i\r\n                  >Important Reminder\r\n                </div>\r\n                <div class=\"external-event fc-event bg-soft-danger text-danger\"\r\n                    data-class=\"bg-soft-danger\"\r\n                >\r\n                  <i class=\"mdi mdi-checkbox-blank-circle font-size-11 me-2\"\r\n                  ></i\r\n                  >Urgent Reminder\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h5 class=\"mb-1\">{{ $t(\"t-upcoming-events\") }}</h5>\r\n            <p class=\"text-muted\">Don't miss scheduled events</p>\r\n            <SimpleBar\r\n                class=\"upcoming-events pe-2 me-n1 mb-3\"\r\n                data-simplebar=\"init\"\r\n                style=\"height: 400px\"\r\n            >\r\n              <div\r\n                  class=\"card mb-3\"\r\n                  v-for=\"event in currentEvents\"\r\n                  :key=\"event.id\"\r\n              >\r\n                <div class=\"card-body\">\r\n                  <div class=\"d-flex mb-3\">\r\n                    <div class=\"flex-grow-1\">\r\n                      <i\r\n                          :class=\"`mdi mdi-checkbox-blank-circle me-2 ${event.classNames[0]} `\"\r\n                      ></i\r\n                      ><span class=\"fw-medium\">{{\r\n                        this.formatDate(event.start)\r\n                      }}</span>\r\n                    </div>\r\n                    <div class=\"flex-shrink-0\">\r\n                      <small class=\"badge badge-soft-primary ms-auto\"></small>\r\n                    </div>\r\n                  </div>\r\n                  <h6 class=\"card-title fs-16\">{{ event.title }}</h6>\r\n                  <p class=\"text-muted text-truncate-two-lines mb-0\">\r\n                    {{ event.description }}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </SimpleBar>\r\n          </div>\r\n          <div class=\"card\">\r\n            <div class=\"card-body bg-soft-info\">\r\n              <div class=\"d-flex\">\r\n                <div class=\"flex-shrink-0\">\r\n                  <CalendarIcon\r\n                      class=\"text-info icon-dual-info\"\r\n                  ></CalendarIcon>\r\n                </div>\r\n                <div class=\"flex-grow-1 ms-3\">\r\n                  <h6 class=\"fs-15\">Welcome to your Calendar!</h6>\r\n                  <p class=\"text-muted mb-0\">\r\n                    Event that applications book will appear here. Click on an\r\n                    event to see the details and manage applicants event.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--end card-->\r\n        </div>\r\n        <div class=\"col-xl-9\">\r\n          <div class=\"card card-h-100\">\r\n            <div class=\"card-body\">\r\n              <FullCalendar ref=\"fullCalendar\" :options=\"calendarOptions\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div style=\"clear: both\"></div>\r\n    </div>\r\n  </div>\r\n  <b-modal\r\n      v-model=\"showModal\"\r\n      title=\"Add New Event\"\r\n      title-class=\"text-black font-18\"\r\n      body-class=\"p-3\"\r\n      hide-footer>\r\n    <form @submit.prevent=\"handleSubmit\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"name\">Title</label>\r\n            <input\r\n                id=\"name\"\r\n                v-model=\"event.title\"\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Insert Event name\"\r\n                :class=\"{ 'is-invalid': submitted && v$.event.title.$error }\"\r\n            />\r\n            <div\r\n                v-if=\"submitted && v$.event.title.$error\"\r\n                class=\"invalid-feedback\">\r\n              <span v-if=\"v$.event.title.required.$message\">{{\r\n                  v$.event.title.required.$message\r\n                }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <label for=\"filterFromDate\" class=\"form-label\"> Start On </label>\r\n          <flat-pickr\r\n              v-model=\"event.start\"\r\n              :config=\"dateTimeConfig\"\r\n              class=\"form-control\"\r\n          ></flat-pickr>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <label for=\"filterToDate\" class=\"form-label\"> End On</label>\r\n          <flat-pickr\r\n              v-model=\"event.end\"\r\n              :config=\"dateTimeConfig\"\r\n              class=\"form-control\"\r\n          ></flat-pickr>\r\n        </div>\r\n        <div class=\"col-12\" style=\"margin-top: 5px;\">\r\n            <label for=\"eventDescription\" class=\"form-label\">Description</label>\r\n            <textarea class=\"form-control\" id=\"eventDescription\" rows=\"3\" v-model=\"event.description\"></textarea>\r\n        </div>\r\n        <div class=\"col-12\" style=\"margin-top: 5px;\">\r\n          <div class=\"mb-3\">\r\n            <label class=\"control-label\">Category</label>\r\n            <select\r\n                v-model=\"event.category\"\r\n                class=\"form-control\"\r\n                name=\"category\"\r\n            >\r\n              <option\r\n                  v-for=\"option in categories\"\r\n                  :key=\"option.backgroundColor\"\r\n                  :value=\"`${option.value}`\"\r\n              >\r\n                {{ option.name }}\r\n              </option>\r\n            </select>\r\n            <div\r\n                v-if=\"submitted && v$.event.category.$error\"\r\n                class=\"invalid-feedback\"\r\n            >\r\n              <span v-if=\"v$.event.category.required.$message\">{{\r\n                  v$.event.category.required.$message\r\n                }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"text-end pt-5 mt-3\">\r\n        <b-button variant=\"light\" @click=\"hideModal\">Close</b-button>\r\n        <b-button type=\"submit\" variant=\"success\" class=\"ms-1\">Create event</b-button>\r\n      </div>\r\n    </form>\r\n  </b-modal>\r\n\r\n  <!-- Edit Modal -->\r\n  <b-modal\r\n      v-model=\"eventModal\"\r\n      title=\"Edit Event\"\r\n      title-class=\"text-black font-18\"\r\n      hide-footer\r\n      body-class=\"p-3\"\r\n  >\r\n    <form @submit.prevent=\"editSubmit\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"name\">Event Name</label>\r\n            <input\r\n                id=\"name1\"\r\n                v-model=\"editevent.editTitle\"\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Insert Event name\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <label for=\"filterFromDate\" class=\"form-label\"> Start On </label>\r\n          <flat-pickr\r\n              v-model=\"editevent.editStart\"\r\n              :config=\"dateTimeConfig\"\r\n              class=\"form-control\"\r\n              data-provider=\"timepickr\"\r\n              data-time-hrs=\"true\"\r\n          ></flat-pickr>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <label for=\"filterToDate\" class=\"form-label\"> End On</label>\r\n          <flat-pickr\r\n              v-model=\"editevent.editEnd\"\r\n              :config=\"dateTimeConfig\"\r\n              class=\"form-control\"\r\n              data-provider=\"timepickr\"\r\n              data-time-hrs=\"true\"\r\n          ></flat-pickr>\r\n        </div>\r\n        <div class=\"col-12\" style=\"margin-top: 5px;\">\r\n          <label for=\"eventDescription\" class=\"form-label\">Description</label>\r\n          <textarea class=\"form-control\" id=\"eventDescription\" rows=\"3\" v-model=\"editevent.editDescription\"></textarea>\r\n        </div>\r\n        <div class=\"col-12\" style=\"margin-top: 5px;\">\r\n          <div class=\"mb-3\">\r\n            <label class=\"control-label\">Category</label>\r\n            <select\r\n                v-model=\"editevent.editcategory\"\r\n                class=\"form-control\"\r\n                name=\"category\"\r\n            >\r\n              <option\r\n                  v-for=\"option in categories\"\r\n                  :key=\"option.backgroundColor\"\r\n                  :value=\"`${option.value}`\"\r\n              >\r\n                {{ option.name }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"text-end p-3\">\r\n        <b-button variant=\"light\" @click=\"closeModal\">Close</b-button>\r\n        <b-button class=\"ms-1\" variant=\"danger\" @click=\"confirm\"\r\n        >Delete</b-button\r\n        >\r\n        <b-button class=\"ms-1\" variant=\"success\" @click=\"editSubmit\"\r\n        >Save</b-button\r\n        >\r\n      </div>\r\n    </form>\r\n  </b-modal>\r\n</template>\r\n"]}]}