{"remainingRequest":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\wamp64\\www\\crm\\frontend\\src\\views\\communication\\scheduleMessages.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\wamp64\\www\\crm\\frontend\\src\\views\\communication\\scheduleMessages.vue","mtime":1680787181380},{"path":"C:\\wamp64\\www\\crm\\frontend\\babel.config.js","mtime":1645939880000},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1652458135842},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1668443313146}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L3dhbXA2NC93d3cvY3JtL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgZmxhdFBpY2tyIGZyb20gInZ1ZS1mbGF0cGlja3ItY29tcG9uZW50IjsKaW1wb3J0ICJmbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuY3NzIjsKaW1wb3J0IExheW91dCBmcm9tICIuLi8uLi9sYXlvdXRzL21haW4udnVlIjsKaW1wb3J0IFBhZ2VIZWFkZXIgZnJvbSAiQC9jb21wb25lbnRzL3BhZ2UtaGVhZGVyIjsKaW1wb3J0IGFwcENvbmZpZyBmcm9tICIuLi8uLi8uLi9hcHAuY29uZmlnIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBQYXBhIGZyb20gInBhcGFwYXJzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBwYWdlOiB7CiAgICB0aXRsZTogIkFnZW50cyBMaXN0IGNhcmRzIiwKICAgIG1ldGE6IFt7CiAgICAgIG5hbWU6ICJkZXNjcmlwdGlvbiIsCiAgICAgIGNvbnRlbnQ6IGFwcENvbmZpZy5kZXNjcmlwdGlvbgogICAgfV0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExheW91dDogTGF5b3V0LAogICAgUGFnZUhlYWRlcjogUGFnZUhlYWRlciwKICAgIGZsYXRQaWNrcjogZmxhdFBpY2tyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICJBZ2VudHMgfCBTY2hlZHVsZWQgTWVzc2FnZXMiLAogICAgICBpdGVtczogW3sKICAgICAgICB0ZXh0OiAiQWdlbnRzIiwKICAgICAgICBocmVmOiAiLyIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJBZ2VudCBMaXN0IGNhcmRzIiwKICAgICAgICBhY3RpdmU6IHRydWUKICAgICAgfV0sCiAgICAgIHRpbWVDb25maWc6IHsKICAgICAgICBlbmFibGVUaW1lOiBmYWxzZSwKICAgICAgICBkYXRlRm9ybWF0OiAiZCBNLCBZIgogICAgICB9LAogICAgICBkYXRlVGltZUNvbmZpZzogewogICAgICAgIGVuYWJsZVRpbWU6IHRydWUsCiAgICAgICAgZGF0ZUZvcm1hdDogIm0tZC15IEg6aSBLIgogICAgICB9LAogICAgICBsaXN0OiBbXSwKICAgICAgbWVzc2FnZUxpc3Q6IFtdLAogICAgICByZWNpZXBpZW50TGlzdDogW10sCiAgICAgIGNvbnRlbnQ6IFtdLAogICAgICBudW1iZXJPZlJlY2lwZW50czogMCwKICAgICAgaHVtYW5mcmllbmRseUNvbmZpZzogewogICAgICAgIGRhdGVGb3JtYXQ6ICJGIGosIFkiCiAgICAgIH0sCiAgICAgIHNjaGVkdWxlTWVzc2FnZUNvbnRlbnQ6ICcnLAogICAgICBzY2hlZHVsZUhvdXI6ICcxNDowMCcsCiAgICAgIHBhZ2U6IDEsCiAgICAgIHBlclBhZ2U6IDYsCiAgICAgIHBhZ2VzOiBbXSwKICAgICAgdXBsb2FkTGFuZ3VhZ2U6ICcwJywKICAgICAgZGF0YTogewogICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgc2VhcmNoVmFsdWVzOiB7CiAgICAgICAgICBpc0FjdGl2ZTogMSwKICAgICAgICAgIG5vdGVTZWFyY2g6ICcnLAogICAgICAgICAga2V5d29yZDogJycsCiAgICAgICAgICBsaWNlbnNlZDogMSwKICAgICAgICAgIGxhbmd1YWdlOiAzLAogICAgICAgICAgb3JkZXJCeTogJ0FTQycsCiAgICAgICAgICBzb3J0Qnk6ICduYW1lJywKICAgICAgICAgIGRlcGFydG1lbnQ6ICcwJywKICAgICAgICAgIGRhdGVSYW5nZTogMCwKICAgICAgICAgIHN0YXR1czogMCwKICAgICAgICAgIHRvRGF0ZTogbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLXVzJywgewogICAgICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgICAgIG1vbnRoOiAibG9uZyIsCiAgICAgICAgICAgIGRheTogIm51bWVyaWMiCiAgICAgICAgICB9KSwKICAgICAgICAgIGZyb21EYXRlOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEZ1bGxZZWFyKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIDEpKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLXVzJywgewogICAgICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgICAgIG1vbnRoOiAibG9uZyIsCiAgICAgICAgICAgIGRheTogIm51bWVyaWMiCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSwKICAgICAgcGFyc2VkOiBmYWxzZSwKICAgICAgc3BlY3RlZENvbHVtbnM6IFsiRnVsbCBuYW1lIChvcHRpb25hbCkiLCAiRmlyc3QgTmFtZSIsICJMYXN0IE5hbWUiLCAiUGhvbmUiXSwKICAgICAgZGF0ZTogbmV3IERhdGUobmV3IERhdGUoKS5zZXRGdWxsWWVhcihuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgLSAxKSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi11cycsIHsKICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgbW9udGg6ICJsb25nIiwKICAgICAgICBkYXk6ICJudW1lcmljIgogICAgICB9KQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBjb250YWN0c0xpc3Q6IGZ1bmN0aW9uIGNvbnRhY3RzTGlzdCgpIHsKICAgICAgdGhpcy5zZXRQYWdlcygpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0UGFnZXMoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBkaXNwbGF5ZWRQb3N0czogZnVuY3Rpb24gZGlzcGxheWVkUG9zdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLnBhZ2luYXRlKHRoaXMubGlzdCk7CiAgICB9LAogICAgcmVzdWx0UXVlcnk6IGZ1bmN0aW9uIHJlc3VsdFF1ZXJ5KCkgewogICAgICBpZiAodGhpcy5kYXRhLnNlYXJjaFZhbHVlcy5rZXl3b3JkLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgdmFyIHNlYXJjaCA9IHRoaXMuZGF0YS5zZWFyY2hWYWx1ZXMua2V5d29yZC50b0xvd2VyQ2FzZSgpOwogICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXllZFBvc3RzLmZpbHRlcihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIGRhdGEuYWRkcmVzcy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5hZ2VudE51bWJlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5jaXR5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSB8fCBkYXRhLmVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSB8fCBkYXRhLnBob25lTnVtYmVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSB8fCBkYXRhLmZpcnN0TmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5sYXN0TmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5mdWxsbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5zdGF0dXNOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5ZWRQb3N0czsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlLCBmb3JtYXQpIHsKICAgICAgZGF0ZSA9IG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9LAogICAgc2V0UGFnZXM6IGZ1bmN0aW9uIHNldFBhZ2VzKCkgewogICAgICB2YXIgbnVtYmVyT2ZQYWdlcyA9IE1hdGguY2VpbCh0aGlzLmxpc3QubGVuZ3RoIC8gdGhpcy5wZXJQYWdlKTsKICAgICAgdGhpcy5wYWdlcyA9IFtdOwoKICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8PSBudW1iZXJPZlBhZ2VzOyBpbmRleCsrKSB7CiAgICAgICAgdGhpcy5wYWdlcy5wdXNoKGluZGV4KTsKICAgICAgfQogICAgfSwKICAgIHBhZ2luYXRlOiBmdW5jdGlvbiBwYWdpbmF0ZShjb250YWN0c0xpc3QpIHsKICAgICAgdmFyIHBhZ2UgPSB0aGlzLnBhZ2U7CiAgICAgIHZhciBwZXJQYWdlID0gdGhpcy5wZXJQYWdlOwogICAgICB2YXIgZnJvbSA9IHBhZ2UgKiBwZXJQYWdlIC0gcGVyUGFnZTsKICAgICAgdmFyIHRvID0gcGFnZSAqIHBlclBhZ2U7CiAgICAgIHJldHVybiBjb250YWN0c0xpc3Quc2xpY2UoZnJvbSwgdG8pOwogICAgfSwKICAgIGZvcm1hdFBob25lOiBmdW5jdGlvbiBmb3JtYXRQaG9uZShwaG9uZSkgewogICAgICB2YXIgZmxhZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKCiAgICAgIC8vIGlmIGZsYWcgPT0gMSBwdXQgdmFsdWUgaW4gcGhvbmUgRWRpdAogICAgICBpZiAocGhvbmUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHZhciB4ID0gcGhvbmUucmVwbGFjZSgvXEQvZywgJycpLm1hdGNoKC8oXGR7MCwzfSkoXGR7MCwzfSkoXGR7MCw0fSkvKTsKICAgICAgICBwaG9uZSA9ICF4WzJdID8geFsxXSA6ICcoJyArIHhbMV0gKyAnKSAnICsgeFsyXSArICh4WzNdID8gJy0nICsgeFszXSA6ICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwaG9uZSA9ICcnOwogICAgICB9CgogICAgICBpZiAoZmxhZyAhPT0gMSkgewogICAgICAgIHJldHVybiBwaG9uZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdFBob25lTnVtYmVyJykudmFsdWUgPSBwaG9uZTsKICAgICAgfQogICAgfSwKICAgIGFkZFJlY2lwaWVudHM6IGZ1bmN0aW9uIGFkZFJlY2lwaWVudHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBpZHNfYXJyYXksIGl0ZW1zLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlkc19hcnJheSA9IFtdOwogICAgICAgICAgICAgICAgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiY2hrX2NoaWxkIik7CiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVsZS5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdHJOb2RlID0gZWxlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHRyTm9kZS5xdWVyeVNlbGVjdG9yKCIuaWQgYSIpLmlubmVySFRNTDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZHNfYXJyYXkuaW5jbHVkZXMoaWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZHNfYXJyYXkucHVzaChpZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgaWRzX2FycmF5ICE9PSAidW5kZWZpbmVkIiAmJiBpZHNfYXJyYXkubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHJlY2lwaWVudHNMaXN0OiBpZHNfYXJyYXkuam9pbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9nZXRVc2VyQnlpZHMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB2YXIgYXJyYXkxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZWNpZXBpZW50TGlzdCkpOwogICAgICAgICAgICAgICAgICB2YXIgYXJyYXkyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7CiAgICAgICAgICAgICAgICAgIHZhciBhcnJheTMgPSBhcnJheTEuY29uY2F0KGFycmF5Mik7CiAgICAgICAgICAgICAgICAgIGFycmF5MyA9IGFycmF5My5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgc2VsZikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCA9PT0gc2VsZi5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LklEID09PSB2YWx1ZS5JRCAmJiB0LnBob25lTnVtYmVyID09PSB2YWx1ZS5waG9uZU51bWJlcjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnJlY2llcGllbnRMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcnJheTMpKTsKICAgICAgICAgICAgICAgICAgX3RoaXMubnVtYmVyT2ZSZWNpcGVudHMgPSBfdGhpcy5yZWNpZXBpZW50TGlzdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGUuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICBlbGUuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgZWxlLmNsb3Nlc3QoInRyIikuY2xhc3NMaXN0LnJlbW92ZSgidGFibGUtYWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkRlcGFydG1lbnRzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJQbGVhc2UsIHNlbGVjdCBhdCBsZWFzdCBvbmUgcmVjaXBpZW50ISIsCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogImJ0biBidG4taW5mbyIsCiAgICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZGRSZWNpcGllbnRzRnJvbUZpbGU6IGZ1bmN0aW9uIGFkZFJlY2lwaWVudHNGcm9tRmlsZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgbGFuZ3VhZ2UsIGFycmF5MSwgYXJyYXkyLCBhcnJheTM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gX3RoaXMyLnVwbG9hZExhbmd1YWdlOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczIuY29udGVudC5kYXRhLmxlbmd0aCA+IDAgJiYgbGFuZ3VhZ2UgIT09ICcwJykgewogICAgICAgICAgICAgICAgICBhcnJheTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzMi5yZWNpZXBpZW50TGlzdCkpOwogICAgICAgICAgICAgICAgICBhcnJheTIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzMi5jb250ZW50LmRhdGEpKTsKICAgICAgICAgICAgICAgICAgYXJyYXkzID0gW107CiAgICAgICAgICAgICAgICAgIGFycmF5Mi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0TmFtZSA9ICcnOwogICAgICAgICAgICAgICAgICAgIHZhciBsYXN0TmFtZSA9ICcnOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVsnRmlyc3QgTmFtZSddLmxlbmd0aCA+IDEgJiYgaXRlbVsnTGFzdCBOYW1lJ10ubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lID0gaXRlbVsnRmlyc3QgTmFtZSddOwogICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWUgPSBpdGVtWydMYXN0IE5hbWUnXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHNwbGl0RnVsbE5hbWUgPSBpdGVtWydGdWxsIG5hbWUgKG9wdGlvbmFsKSddLnNwbGl0KCcnKTsKICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZSA9IHNwbGl0RnVsbE5hbWVbMF07CiAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZSA9IHNwbGl0RnVsbE5hbWVbMV07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBhcnJheTMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAnSUQnOiAwLAogICAgICAgICAgICAgICAgICAgICAgJ2RlcGFydG1lbnROYW1lJzogJ24vYScsCiAgICAgICAgICAgICAgICAgICAgICAnZW1haWwnOiAnbi9hJywKICAgICAgICAgICAgICAgICAgICAgICdmaXJzdE5hbWUnOiBmaXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAnbGFuZ3VhZ2UnOiBsYW5ndWFnZSwKICAgICAgICAgICAgICAgICAgICAgICdsYXN0TmFtZSc6IGxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAgICAgJ3Bob25lTnVtYmVyJzogaXRlbVsnUGhvbmUnXSwKICAgICAgICAgICAgICAgICAgICAgICdzdGF0dXNOYW1lJzogJ24vYScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5yZWNpZXBpZW50TGlzdCA9IGFycmF5MS5jb25jYXQoYXJyYXkzKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLnJlY2llcGllbnRMaXN0KTsKICAgICAgICAgICAgICAgICAgX3RoaXMyLm51bWJlck9mUmVjaXBlbnRzID0gX3RoaXMyLnJlY2llcGllbnRMaXN0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlTGlzdE1vZGFsJykuY2xpY2soKTsgLy8gdGhpcy5vcGVuTW9kYWwoJ2NyZWF0ZU1lc3NhZ2UnKQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIudXBsb2FkTGFuZ3VhZ2UgPT09ICcwJykgewogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlLCBzZWxlY3QgdGhlIGxhbmd1YWdlISIsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAiYnRuIGJ0bi1pbmZvIiwKICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIlBsZWFzZSwgdXBsb2FkIGFsbW9zdCBvbmUgcmVjaXBpZW50IGluIHRoZSBsaXN0ISIsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAiYnRuIGJ0bi1pbmZvIiwKICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZW1vdmVSZWNpcGllbnQ6IGZ1bmN0aW9uIHJlbW92ZVJlY2lwaWVudChpbmRleCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiVGhpcyByZWNpcGllbnQgd2lsbCBiZSByZW1vdmVkISIsCiAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjMmNhMjE5IiwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjZTEyZTJlIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgZGVsZXRlIGl0ISIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgX3RoaXMzLnJlY2llcGllbnRMaXN0LnNwbGljZShfdGhpczMucmVjaWVwaWVudExpc3QuaW5kZXhPZihpbmRleCksIDEpOwoKICAgICAgICAgIFN3YWwuZmlyZSgiRGVsZXRlZCEiLCAiUmVjaXBpZW50IGhhcyBiZWVuIGRlbGV0ZWQuIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgIF90aGlzMy5udW1iZXJPZlJlY2lwZW50cyA9IF90aGlzMy5yZWNpZXBpZW50TGlzdC5sZW5ndGg7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzY2hlZHVsZU1lc3NhZ2U6IGZ1bmN0aW9uIHNjaGVkdWxlTWVzc2FnZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgdmFsaWRhdGUsIGVycm9ycywgZGF0YSwgbGlzdCwgaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdmFsaWRhdGUgPSB0cnVlOwogICAgICAgICAgICAgICAgZXJyb3JzID0gW107CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC5zY2hlZHVsZU1lc3NhZ2VDb250ZW50ID09PSAnJyAmJiBfdGhpczQuc2NoZWR1bGVNZXNzYWdlQ29udGVudC5sZW5ndGggPCAxMCkgewogICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgnTWVzc2FnZSBzaG91bGQgYmUgbG9uZ2VyIHRoYW4gMTAgY2hhcmFjdGVycyEnKTsKICAgICAgICAgICAgICAgICAgdmFsaWRhdGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LnNjaGVkdWxlSG91ciA9PT0gJycgJiYgX3RoaXM0LnNjaGVkdWxlSG91ci5sZW5ndGggPCAzKSB7CiAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCdQbGVhc2UsIHNldCB0aGUgc2NoZWR1bGUgaG91ciBmb3IgdGhlIG1lc3NhZ2UhJyk7CiAgICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC5yZWNpZXBpZW50TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1BsZWFzZSwgYWRkIGFsbW9zdCBvbmUgcmVjaXBpZW50IHRvIHRoZSBsaXN0IScpOwogICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHJlY2lwaWVudHM6IF90aGlzNC5yZWNpZXBpZW50TGlzdCwKICAgICAgICAgICAgICAgICAgaG91cjogX3RoaXM0LnNjaGVkdWxlSG91ciwKICAgICAgICAgICAgICAgICAgZGF0ZTogX3RoaXM0LmRhdGUsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzNC5zY2hlZHVsZU1lc3NhZ2VDb250ZW50LAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmICghdmFsaWRhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY29tbS9zYXZlU2NoZWR1bGVNZXNzYWdlJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlbW9kYWwnKS5jbGljaygpOwogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdNZXNzYWdlIHNjaGVkdWxlZCBzdWNjZXNzZnVsbHkhJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiUGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGxpc3QgPSAnJzsKCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZXJyb3JzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QgKz0gZXJyb3JzW2ldICsgJyBcbic7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiBTd2FsLmZpcmUoIiIgKyBsaXN0LCAnJywgJ2luZm8nKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICAvLyB0aGlzLnJlY2llcGllbnRMaXN0ID0gW107CiAgICAgIHRoaXMubnVtYmVyT2ZSZWNpcGVudHMgPSAwOwogICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZUNvbnRlbnQgPSAnJzsKICAgICAgdGhpcy5zY2hlZHVsZUhvdXIgPSAnMTQ6MDAnOwogICAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEZ1bGxZZWFyKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIDEpKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLXVzJywgewogICAgICAgIHllYXI6ICJudW1lcmljIiwKICAgICAgICBtb250aDogImxvbmciLAogICAgICAgIGRheTogIm51bWVyaWMiCiAgICAgIH0pOwogICAgfSwKICAgIGdldFNjaGVkdWxlZE1lc3NhZ2VzOiBmdW5jdGlvbiBnZXRTY2hlZHVsZWRNZXNzYWdlcygpIHsvLyBjb25zdCBkYXRhID0gewogICAgICAvLyAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgIC8vICAgcmVjaXBpZW50czogdGhpcy5yZWNpZXBpZW50TGlzdCwKICAgICAgLy8gICBob3VyOiB0aGlzLnNjaGVkdWxlSG91ciwKICAgICAgLy8gICBkYXRlOiB0aGlzLmRhdGUsCiAgICAgIC8vICAgbWVzc2FnZTogdGhpcy5zY2hlZHVsZU1lc3NhZ2VDb250ZW50LAogICAgICAvLyAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgIC8vIH0KCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVBZ2VudExpc3Q6IGZ1bmN0aW9uIHVwZGF0ZUFnZW50TGlzdCgpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgICBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHN0YXR1cywgdmFsaWRhdGUsIGVycm9ycywgZmlsdGVyS2V5d29yZCwgZmlsdGVyTGFuZ3VhZ2UsIGRhdGEsIGxpc3QsIGk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXR1cyA9IF9hcmd1bWVudHMubGVuZ3RoID4gMCAmJiBfYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzBdIDogMDsKICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVycm9ycyA9IFtdOwogICAgICAgICAgICAgICAgZmlsdGVyS2V5d29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWx0ZXJLZXl3b3JkIikudmFsdWU7CiAgICAgICAgICAgICAgICBfdGhpczUuZGF0YS5zZWFyY2hWYWx1ZXMuc3RhdHVzID0gc3RhdHVzOwogICAgICAgICAgICAgICAgZmlsdGVyTGFuZ3VhZ2UgPSBfdGhpczUuZGF0YS5zZWFyY2hWYWx1ZXMubGFuZ3VhZ2U7CgogICAgICAgICAgICAgICAgaWYgKGZpbHRlckxhbmd1YWdlICE9PSAnJyAmJiAoZmlsdGVyTGFuZ3VhZ2UgPT09ICcxJyB8fCBmaWx0ZXJMYW5ndWFnZSA9PT0gJzInKSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuZGF0YS5zZWFyY2hWYWx1ZXMubGFuZ3VhZ2UgPSBmaWx0ZXJMYW5ndWFnZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyS2V5d29yZCAhPT0gJycgJiYgZmlsdGVyS2V5d29yZC5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICBfdGhpczUuZGF0YS5zZWFyY2hWYWx1ZXMua2V5d29yZCA9IGZpbHRlcktleXdvcmQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlcktleXdvcmQgIT09ICcnICYmIGZpbHRlcktleXdvcmQubGVuZ3RoIDwgMykgewogICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgnS2V5d29yZCBzZWFyY2ggc2hvdWxkIGhhdmUgMyBvciBtb3JlIGNoYXJhY3RlcnMhJyk7CiAgICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgICAgc2VhcmNoVmFsdWVzOiBfdGhpczUuZGF0YS5zZWFyY2hWYWx1ZXMsCiAgICAgICAgICAgICAgICAgIGlzQWdlbnQ6IF90aGlzNS5kYXRhLnNlYXJjaFZhbHVlcy5saWNlbnNlZCwKICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkYXRlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvbGlzdEFnZW50cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS5saXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXM1LnBhZ2UgPSAxOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LnNldFBhZ2VzKCk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgICAgfSAvLyBmb3IgKGNvbnN0IHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVycm9ycy5wdXNoKGAke3Byb3BlcnR5fTogJHtlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XX1gKQogICAgICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgIF90aGlzNS5lcnJvcnMucHVzaCgnU29tZXRoaW5nIHdhcyB3cm9uZywgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4nKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBsaXN0ID0gJyc7CgogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGVycm9ycy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgICAgICAgICBsaXN0ICs9IGVycm9yc1tpXSArICcgXG4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gU3dhbC5maXJlKCIiICsgbGlzdCwgJycsICdpbmZvJyk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBwYXJzZUZpbGU6IGZ1bmN0aW9uIHBhcnNlRmlsZSgpIHsKICAgICAgdmFyIGFsbG93ZWRFeHRlbnNpb25zID0gLyhcLmNzdikkL2k7CgogICAgICBpZiAoYWxsb3dlZEV4dGVuc2lvbnMuZXhlYyh0aGlzLmZpbGUubmFtZSkpIHsKICAgICAgICBQYXBhLnBhcnNlKHRoaXMuZmlsZSwgewogICAgICAgICAgaGVhZGVyOiB0cnVlLAogICAgICAgICAgc2tpcEVtcHR5TGluZXM6IHRydWUsCiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKHJlc3VsdHMpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyZSh0aGlzLnNwZWN0ZWRDb2x1bW5zLCByZXN1bHRzLm1ldGEuZmllbGRzKSkgewogICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHJlc3VsdHM7CiAgICAgICAgICAgICAgdGhpcy5wYXJzZWQgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIk9vcHMsIHRoaXMgZmlsZSBpcyBub3Qgd2hhdCB3ZSBzcGVjdGVkISIsCiAgICAgICAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0uYmluZCh0aGlzKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkZpbGUgZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQhIiwKICAgICAgICAgIGljb246ICd3YXJuaW5nJywKICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogImJ0biBidG4taW5mbyIsCiAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUZpbGVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZUZpbGVVcGxvYWQoKSB7CiAgICAgIHRoaXMuZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0RmlsZScpLmZpbGVzWzBdOwogICAgICB0aGlzLnBhcnNlRmlsZSgpOwogICAgfSwKICAgIGNvbXBhcmU6IGZ1bmN0aW9uIGNvbXBhcmUobzEsIG8yKSB7CiAgICAgIGZvciAodmFyIHAgaW4gbzEpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICAgICAgaWYgKG8xLmhhc093blByb3BlcnR5KHApKSB7CiAgICAgICAgICBpZiAobzFbcF0gIT09IG8yW3BdKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9wIGluIG8yKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwogICAgICAgIGlmIChvMi5oYXNPd25Qcm9wZXJ0eShfcCkpIHsKICAgICAgICAgIGlmIChvMVtfcF0gIT09IG8yW19wXSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBkZWxldGVSZWNvcmQ6IGZ1bmN0aW9uIGRlbGV0ZVJlY29yZChlbGUpIHsKICAgICAgZWxlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgIHZhciBwYXR0ZXJuLCBpc0FnZW50LCBkYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHBhdHRlcm4gPSAnQWdlbnRzJzsKICAgICAgICAgICAgICBpc0FnZW50ID0gMDsKCiAgICAgICAgICAgICAgaWYgKF90aGlzNi50aXRsZS5tYXRjaChwYXR0ZXJuKSkgewogICAgICAgICAgICAgICAgaXNBZ2VudCA9IDE7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgIHNlYXJjaFZhbHVlczogX3RoaXM2LmRhdGEuc2VhcmNoVmFsdWVzLAogICAgICAgICAgICAgICAgaXNBZ2VudDogaXNBZ2VudCwKICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJykKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9saXN0RGVwYXJ0bWVudHMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM2LmRlcGFydG1lbnRMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkRlcGFydG1lbnRzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2xpc3RTdGF0dXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM2LnN0YXR1c0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU3RhdHVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMDsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9saXN0QWdlbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzNi5saXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIF90aGlzNi5wYWdlID0gMTsKCiAgICAgICAgICAgICAgICBfdGhpczYuc2V0UGFnZXMoKTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgey8vIGZvciAoY29uc3QgcHJvcGVydHkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAvLyB0aGlzLmVycm9ycy5wdXNoKGAke3Byb3BlcnR5fTogJHtlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XX1gKQogICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEyOwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2NvbW0vZ2V0U2NoZWR1bGVkTWVzc2FnZXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM2Lm1lc3NhZ2VMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgIH0gLy8gZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZXJyb3JzLnB1c2goYCR7cHJvcGVydHl9OiAke2Vycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldfWApCiAgICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU2KTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"mappings":"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","names":["flatPickr","Layout","PageHeader","appConfig","moment","axios","Swal","Papa","page","title","meta","name","content","description","components","data","items","text","href","active","timeConfig","enableTime","dateFormat","dateTimeConfig","list","messageList","reciepientList","numberOfRecipents","humanfriendlyConfig","scheduleMessageContent","scheduleHour","perPage","pages","uploadLanguage","token","localStorage","getItem","searchValues","isActive","noteSearch","keyword","licensed","language","orderBy","sortBy","department","dateRange","status","toDate","Date","toLocaleDateString","year","month","day","fromDate","setFullYear","getFullYear","parsed","spectedColumns","date","watch","contactsList","setPages","created","computed","displayedPosts","paginate","resultQuery","length","search","toLowerCase","filter","address","includes","agentNumber","city","email","phoneNumber","firstName","lastName","fullname","statusName","methods","formatDate","format","numberOfPages","Math","ceil","index","push","from","to","slice","formatPhone","phone","flag","undefined","x","replace","match","document","getElementById","value","addRecipients","ids_array","getElementsByName","forEach","ele","checked","trNode","parentNode","id","querySelector","innerHTML","recipientsList","join","post","then","array1","JSON","parse","stringify","array2","response","array3","concat","self","findIndex","t","ID","closest","classList","remove","catch","error","fire","confirmButtonClass","buttonsStyling","showCloseButton","addRecipientsFromFile","item","splitFullName","split","console","log","click","removeRecipient","icon","showCancelButton","cancelButtonColor","confirmButtonColor","confirmButtonText","result","splice","indexOf","scheduleMessage","validate","errors","recipients","hour","message","userEmail","i","resetForm","getScheduledMessages","updateAgentList","filterKeyword","filterLanguage","isAgent","detail","$router","parseFile","allowedExtensions","exec","file","header","skipEmptyLines","complete","results","compare","fields","bind","handleFileUpload","files","o1","o2","p","hasOwnProperty","deleteRecord","target","parentElement","mounted","pattern","departmentList","statusList"],"sourceRoot":"","sources":["C:\\wamp64\\www\\crm\\frontend\\src\\views\\communication\\scheduleMessages.vue"],"sourcesContent":["<script>\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport Layout from \"../../layouts/main.vue\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport appConfig from \"../../../app.config\";\r\nimport moment from \"moment\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport Papa from \"papaparse\";\r\n\r\nexport default {\r\n  page: {\r\n    title: \"Agents List cards\",\r\n    meta: [{name: \"description\", content: appConfig.description}],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n    flatPickr,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Agents | Scheduled Messages\",\r\n      items: [\r\n        {\r\n          text: \"Agents\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Agent List cards\",\r\n          active: true,\r\n        },\r\n      ],\r\n      timeConfig: {\r\n        enableTime: false,\r\n        dateFormat: \"d M, Y\"\r\n      },\r\n      dateTimeConfig: {\r\n        enableTime: true,\r\n        dateFormat: \"m-d-y H:i K\"\r\n      },\r\n      list: [],\r\n      messageList: [],\r\n      reciepientList: [],\r\n      content: [],\r\n      numberOfRecipents: 0,\r\n      humanfriendlyConfig: {\r\n        dateFormat: \"F j, Y\",\r\n      },\r\n      scheduleMessageContent: '',\r\n      scheduleHour: '14:00',\r\n      page: 1,\r\n      perPage: 6,\r\n      pages: [],\r\n      uploadLanguage: '0',\r\n      data: {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: {\r\n          isActive: 1,\r\n          noteSearch: '',\r\n          keyword: '',\r\n          licensed: 1,\r\n          language: 3,\r\n          orderBy: 'ASC',\r\n          sortBy: 'name',\r\n          department: '0',\r\n          dateRange: 0,\r\n          status: 0,\r\n          toDate: new Date().toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"}) ,\r\n          fromDate: new Date(new Date().setFullYear(new Date().getFullYear() - 1)).toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"}),\r\n        }\r\n      },\r\n      parsed: false,\r\n      spectedColumns: [\r\n        \"Full name (optional)\",\r\n        \"First Name\",\r\n        \"Last Name\",\r\n        \"Phone\"\r\n      ],\r\n      date: new Date(new Date().setFullYear(new Date().getFullYear() - 1)).toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"}),\r\n    };\r\n  },\r\n  watch: {\r\n    contactsList() {\r\n      this.setPages();\r\n    },\r\n  },\r\n  created() {\r\n    this.setPages();\r\n  },\r\n  computed: {\r\n    displayedPosts() {\r\n      return this.paginate(this.list);\r\n    },\r\n    resultQuery() {\r\n      if (this.data.searchValues.keyword.length >= 3) {\r\n        const search = this.data.searchValues.keyword.toLowerCase();\r\n        return this.displayedPosts.filter((data) => {\r\n          return (\r\n              data.address.toLowerCase().includes(search) ||\r\n              data.agentNumber.toLowerCase().includes(search) ||\r\n              data.city.toLowerCase().includes(search) ||\r\n              data.email.toLowerCase().includes(search) ||\r\n              data.phoneNumber.toLowerCase().includes(search) ||\r\n              data.firstName.toLowerCase().includes(search) ||\r\n              data.lastName.toLowerCase().includes(search) ||\r\n              data.fullname.toLowerCase().includes(search) ||\r\n              data.statusName.toLowerCase().includes(search)\r\n          );\r\n        });\r\n      } else {\r\n        return this.displayedPosts;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    formatDate: function (date, format) {\r\n      date = moment(date).format(format)\r\n      return date;\r\n    },\r\n    setPages() {\r\n\r\n      let numberOfPages = Math.ceil(this.list.length / this.perPage);\r\n      this.pages = []\r\n      for (let index = 1; index <= numberOfPages; index++) {\r\n        this.pages.push(index);\r\n      }\r\n    },\r\n    paginate(contactsList) {\r\n      let page = this.page;\r\n      let perPage = this.perPage;\r\n      let from = page * perPage - perPage;\r\n      let to = page * perPage;\r\n      return contactsList.slice(from, to);\r\n    },\r\n    formatPhone: function(phone, flag=0) {\r\n\r\n      // if flag == 1 put value in phone Edit\r\n      if(phone !== undefined){\r\n        const x = phone.replace(/\\D/g, '').match(/(\\d{0,3})(\\d{0,3})(\\d{0,4})/);\r\n        phone = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');\r\n      }else{\r\n        phone = ''\r\n      }\r\n\r\n      if(flag !== 1){\r\n        return phone;\r\n      }else{\r\n        document.getElementById('editPhoneNumber').value = phone;\r\n      }\r\n    },\r\n    async addRecipients() {\r\n      let ids_array = [];\r\n      let items = document.getElementsByName(\"chk_child\");\r\n      items.forEach(function (ele) {\r\n        if (ele.checked == true) {\r\n          let trNode = ele.parentNode.parentNode.parentNode;\r\n          let id = trNode.querySelector(\".id a\").innerHTML;\r\n\r\n          if(!ids_array.includes(id)){\r\n            ids_array.push(id);\r\n          }\r\n        }\r\n      });\r\n\r\n      if (typeof ids_array !== \"undefined\" && ids_array.length > 0) {\r\n        const data = {\r\n          token: localStorage.getItem('jwt'),\r\n          recipientsList: ids_array.join(),\r\n        }\r\n\r\n        await axios\r\n            .post('/api/getUserByids', data)\r\n            .then(response => {\r\n              let array1 = JSON.parse(JSON.stringify(this.reciepientList))\r\n              let array2 = JSON.parse(JSON.stringify(response.data))\r\n              let array3 = array1.concat(array2);\r\n\r\n              array3 = array3.filter((value, index, self) =>\r\n                index === self.findIndex((t) => (\r\n                    t.ID === value.ID && t.phoneNumber === value.phoneNumber\r\n                ))\r\n              )\r\n\r\n              this.reciepientList = JSON.parse(JSON.stringify(array3));\r\n              this.numberOfRecipents = this.reciepientList.length\r\n\r\n              items.forEach(function (ele) {\r\n                if (ele.checked == true) {\r\n                  ele.checked = false\r\n                  ele.closest(\"tr\").classList.remove(\"table-active\");\r\n                }\r\n              });\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                Swal.fire(\"Oops!\", \"Departments could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n              })\r\n      } else {\r\n        Swal.fire({\r\n          title: \"Please, select at least one recipient!\",\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    async addRecipientsFromFile() {\r\n      let language = this.uploadLanguage;\r\n      if (this.content.data.length > 0 && language !== '0') {\r\n        let array1 = JSON.parse(JSON.stringify(this.reciepientList))\r\n        let array2 = JSON.parse(JSON.stringify(this.content.data))\r\n        let array3 = []\r\n\r\n        array2.forEach(function (item) {\r\n          let firstName = '';\r\n          let lastName = '';\r\n\r\n          if (item['First Name'].length > 1 && item['Last Name'].length > 1) {\r\n            firstName = item['First Name']\r\n            lastName = item['Last Name']\r\n          } else {\r\n            let splitFullName = item['Full name (optional)'].split('')\r\n            firstName = splitFullName[0]\r\n            lastName = splitFullName[1]\r\n          }\r\n\r\n          array3.push({\r\n            'ID': 0,\r\n            'departmentName': 'n/a',\r\n            'email': 'n/a','firstName':firstName,\r\n            'language': language,\r\n            'lastName': lastName,\r\n            'phoneNumber': item['Phone'],\r\n            'statusName': 'n/a'\r\n          })\r\n        });\r\n\r\n        this.reciepientList = array1.concat(array3);\r\n        console.log(this.reciepientList)\r\n        this.numberOfRecipents = this.reciepientList.length\r\n\r\n        document.getElementById('closeListModal').click()\r\n        // this.openModal('createMessage')\r\n\r\n      }else if(this.uploadLanguage === '0'){\r\n        Swal.fire({\r\n          title: \"Please, select the language!\",\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      } else {\r\n        Swal.fire({\r\n          title: \"Please, upload almost one recipient in the list!\",\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    removeRecipient(index){\r\n      Swal.fire({\r\n        title: \"Are you sure?\",\r\n        text: \"This recipient will be removed!\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        cancelButtonColor: \"#2ca219\",\r\n        confirmButtonColor: \"#e12e2e\",\r\n        confirmButtonText: \"Yes, delete it!\",\r\n      }).then((result) => {\r\n        if (result.value) {\r\n          this.reciepientList.splice(this.reciepientList.indexOf(index), 1);\r\n          Swal.fire(\"Deleted!\", \"Recipient has been deleted.\", \"success\");\r\n          this.numberOfRecipents = this.reciepientList.length\r\n        }\r\n      });\r\n    },\r\n    async scheduleMessage() {\r\n\r\n      let validate = true;\r\n      let errors = [];\r\n\r\n      if (this.scheduleMessageContent === '' && this.scheduleMessageContent.length < 10) {\r\n        errors.push('Message should be longer than 10 characters!')\r\n        validate = false;\r\n      }\r\n\r\n      if (this.scheduleHour === '' && this.scheduleHour.length < 3) {\r\n        errors.push('Please, set the schedule hour for the message!')\r\n        validate = false;\r\n      }\r\n\r\n      if (this.reciepientList.length === 0) {\r\n        errors.push('Please, add almost one recipient to the list!')\r\n        validate = false;\r\n      }\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        recipients: this.reciepientList,\r\n        hour: this.scheduleHour,\r\n        date: this.date,\r\n        message: this.scheduleMessageContent,\r\n        userEmail: localStorage.getItem('email'),\r\n      }\r\n\r\n      if(validate){\r\n        await axios\r\n            .post('/api/comm/saveScheduleMessage', data)\r\n            .then(response => {\r\n              document.getElementById('closemodal').click();\r\n              Swal.fire({\r\n                icon: 'success',\r\n                title: 'Success',\r\n                text: 'Message scheduled successfully!'\r\n              });\r\n              console.log(response)\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                Swal.fire(\"Oops!\", \"Please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n      }else{\r\n        let list = '';\r\n        for (var i = 0; i < errors.length; i+=1) {\r\n          list += errors[i] + ' \\n';\r\n        }\r\n\r\n        await Swal.fire(\"\" + list, '', 'info');\r\n\r\n      }\r\n    },\r\n    resetForm(){\r\n      // this.reciepientList = [];\r\n      this.numberOfRecipents = 0;\r\n      this.scheduleMessageContent = '';\r\n      this.scheduleHour = '14:00'\r\n      this.date = new Date(new Date().setFullYear(new Date().getFullYear() - 1)).toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"})\r\n    },\r\n    async getScheduledMessages(){\r\n\r\n      // const data = {\r\n      //   token: localStorage.getItem('jwt'),\r\n      //   recipients: this.reciepientList,\r\n      //   hour: this.scheduleHour,\r\n      //   date: this.date,\r\n      //   message: this.scheduleMessageContent,\r\n      //   userEmail: localStorage.getItem('email'),\r\n      // }\r\n    },\r\n    async updateAgentList(status=0) {\r\n\r\n      let validate = true;\r\n      let errors = [];\r\n      let filterKeyword = document.getElementById(\"filterKeyword\").value;\r\n      this.data.searchValues.status = status;\r\n      let filterLanguage = this.data.searchValues.language;\r\n\r\n      if (filterLanguage !== '' && (filterLanguage === '1' || filterLanguage === '2')){\r\n        this.data.searchValues.language = filterLanguage;\r\n      }\r\n\r\n      if (filterKeyword !== '' && filterKeyword.length >= 3) {\r\n        this.data.searchValues.keyword = filterKeyword;\r\n      } else if (filterKeyword !== '' && filterKeyword.length < 3) {\r\n        errors.push('Keyword search should have 3 or more characters!')\r\n        validate = false;\r\n      }\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: this.data.searchValues,\r\n        isAgent: this.data.searchValues.licensed,\r\n        userEmail: localStorage.getItem('email'),\r\n      }\r\n\r\n      if(validate){\r\n        axios\r\n            .post('/api/listAgents', data)\r\n            .then(response => {\r\n              this.list=response.data\r\n              this.page = 1\r\n              this.setPages()\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n\r\n                if(error.response.data.detail === 'Your session is expired!'){\r\n                  this.$router.push('logout')\r\n                }\r\n                // for (const property in error.response.data) {\r\n                // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                // }\r\n              } else if (error.message) {\r\n                this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n              }\r\n            })\r\n      }else{\r\n        let list = '';\r\n        for (var i = 0; i < errors.length; i+=1) {\r\n          list += errors[i] + ' \\n';\r\n        }\r\n\r\n        await Swal.fire(\"\" + list, '', 'info');\r\n\r\n      }\r\n\r\n    },\r\n    parseFile() {\r\n      var allowedExtensions = /(\\.csv)$/i;\r\n      if (allowedExtensions.exec(this.file.name)) {\r\n        Papa.parse( this.file, {\r\n          header: true,\r\n          skipEmptyLines: true,\r\n          complete: function ( results ) {\r\n            if( this.compare(this.spectedColumns, results.meta.fields)){\r\n              this.content = results;\r\n              this.parsed = true;\r\n            } else {\r\n              Swal.fire({\r\n                title: \"Oops, this file is not what we spected!\",\r\n                icon: 'warning',\r\n                confirmButtonClass: \"btn btn-info\",\r\n                buttonsStyling: false,\r\n                showCloseButton: true,\r\n              });\r\n            }\r\n          }.bind(this)\r\n        } );\r\n      } else {\r\n        Swal.fire({\r\n          title: \"File extension not supported!\",\r\n          icon: 'warning',\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    handleFileUpload() {\r\n      this.file = document.getElementById('listFile').files[0];\r\n      this.parseFile();\r\n    },\r\n    compare (o1, o2){\r\n      for(let p in o1){\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if(o1.hasOwnProperty(p)){\r\n          if(o1[p] !== o2[p]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      for(let p in o2){\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if(o2.hasOwnProperty(p)){\r\n          if(o1[p] !== o2[p]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n    deleteRecord(ele){\r\n      ele.target.parentElement.parentElement.remove();\r\n    }\r\n  },\r\n  async mounted() {\r\n\r\n    const pattern = 'Agents';\r\n    let isAgent = 0;\r\n    if(this.title.match(pattern)) {\r\n      isAgent = 1;\r\n    }\r\n\r\n    const data = {\r\n      token: localStorage.getItem('jwt'),\r\n      searchValues: this.data.searchValues,\r\n      isAgent: isAgent,\r\n      userEmail: localStorage.getItem('email'),\r\n    }\r\n\r\n    await axios\r\n        .post('/api/listDepartments', data)\r\n        .then(response => {\r\n          this.departmentList=response.data\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n            Swal.fire(\"Oops!\", \"Departments could not be loaded, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n\r\n    await axios\r\n        .post('/api/listStatus', data)\r\n        .then(response => {\r\n          this.statusList=response.data\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n            Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n\r\n    await axios\r\n        .post('/api/listAgents', data)\r\n        .then(response => {\r\n          this.list=response.data\r\n          this.page = 1\r\n          this.setPages()\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n            // for (const property in error.response.data) {\r\n            // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n            // }\r\n          } else if (error.message) {\r\n            this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n          }\r\n        })\r\n\r\n    await axios\r\n        .post('/api/comm/getScheduledMessages', data)\r\n        .then(response => {\r\n          this.messageList=response.data\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n\r\n            // for (const property in error.response.data) {\r\n            // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n            // }\r\n          } else if (error.message) {\r\n            this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n          }\r\n        })\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\"/>\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\" id=\"leadsList\">\r\n          <div class=\"card-header border-0\">\r\n            <div class=\"row g-4 align-items-center\">\r\n              <div class=\"col-sm-3\">\r\n                <div class=\"search-box\">\r\n                  <input\r\n                      type=\"text\"\r\n                      class=\"form-control search\"\r\n                      placeholder=\"Search for...\"\r\n                  />\r\n                  <i class=\"ri-search-line search-icon\"></i>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-auto ms-auto\">\r\n                <div class=\"hstack gap-2\">\r\n                  <button type=\"button\" class=\"btn btn-soft-success add-btn\" href=\"#open-filters\" data-bs-toggle=\"modal\">\r\n                    <i class=\"ri-filter-line align-bottom me-1\"></i> Filters\r\n                  </button>\r\n                  <button type=\"button\" class=\"btn btn-soft-success\" href=\"#createMessage\" data-bs-toggle=\"modal\" @click=\"resetForm\">\r\n                    <i class=\"ri-message-2-line align-bottom me-1\"></i> Create Message\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Table Head -->\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table align-middle table-nowrap mb-0\">\r\n              <thead class=\"table-light\">\r\n              <tr>\r\n                <th scope=\"col\" style=\"width: 50px\">\r\n                  <div class=\"form-check\">\r\n                    <input\r\n                        class=\"form-check-input\"\r\n                        type=\"checkbox\"\r\n                        id=\"checkAll\"\r\n                        value=\"option\"\r\n                    />\r\n                  </div>\r\n                </th>\r\n                <th scope=\"col\">Message</th>\r\n                <th scope=\"col\">Is Active</th>\r\n                <th scope=\"col\">Sent</th>\r\n                <th scope=\"col\">Scheduled To</th>\r\n                <th scope=\"col\">Create Date</th>\r\n                <th scope=\"col\">Actions</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(data, index) of messageList\" :key=\"index\">\r\n                <td>\r\n                  <div class=\"form-check\">\r\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"cardtableCheck01\">\r\n                    <label class=\"form-check-label\" for=\"cardtableCheck01\"></label>\r\n                  </div>\r\n                </td>\r\n                <td>{{ data.message }}</td>\r\n                <td><a href=\"javascript:void(0);\" :class=\" data.active === 1 ? 'link-success' : 'link-danger'\" >{{ data.active === 1 ? 'Yes' : 'No' }}</a></td>\r\n                <td>{{ data.sent === 1 ? 'Yes' : 'No' }}</td>\r\n                <td>{{formatDate(data.scheduledTo, 'MMMM Do YYYY, h:mmA') }}</td>\r\n                <td>{{formatDate(data.createdOn, 'MMM Do YYYY, h:mmA') }}</td>\r\n                <td>\r\n                  <ul class=\"list-inline hstack gap-2 mb-0\">\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"modal\" href=\"#agentModal\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Edit\" @click=\"getUserInfo(data.ID)\">\r\n                      <a class=\"edit-item-btn\" href=\"javascript:void(0);\"><i class=\"ri-pencil-fill align-bottom text-muted\"></i></a>\r\n                    </li>\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"tooltip\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Delete\">\r\n                      <a class=\"remove-item-btn\" data-bs-toggle=\"modal\" href=\"javascript:void(0);\">\r\n                        <i class=\"ri-delete-bin-fill align-bottom text-muted\"></i>\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--end col-->\r\n    </div>\r\n    <!--end row-->\r\n\r\n    <!-- Filters Modal -->\r\n    <div id=\"open-filters\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"myModalLabel\">Filters</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"> </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-12\">\r\n                <label for=\"filterKeyword\" class=\"form-label\">Keyword</label>\r\n                <input type=\"text\" id=\"filterKeyword\" name=\"filterKeyword\" class=\"form-control mb-2\" placeholder=\"Enter Keyword\" v-model=\"this.data.searchValues.keyword\">\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterLicensed\" class=\"form-label\">Licensed agents?</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Licensed Agents?\" id=\"filterLicensed\" name=\"filterLicensed\" v-model=\"this.data.searchValues.licensed\">\r\n                  <option value=\"1\" selected>Both</option>\r\n                  <option value=\"2\">Yes</option>\r\n                  <option value=\"3\">No</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <div class=\"form-check form-switch form-switch-lg\" dir=\"ltr\" style=\"margin: 0;position: absolute;top: 50%;-ms-transform: translateY(-50%);transform: translateY(-50%);\">\r\n                  <input type=\"checkbox\" class=\"form-check-input\" id=\"isActive\" checked=\"\">\r\n                  <label class=\"form-check-label\" for=\"isActive\">Active</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"filterLanguage\" name=\"filterLanguage\" v-model=\"this.data.searchValues.language\">\r\n                  <option value=\"3\" selected>Both</option>\r\n                  <option value=\"1\" selected>English</option>\r\n                  <option value=\"2\">Spanish</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"editStatus\" class=\"form-label\">Search by Notes</label>\r\n                <input type=\"text\" id=\"filterNotes\" name=\"filterNotes\" class=\"form-control mb-2\" placeholder=\"Enter note\" v-model=\"this.data.searchValues.noteSearch\">\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterFromDate\" class=\"form-label\"> From date </label>\r\n                <flat-pickr\r\n                    v-model=\"this.data.searchValues.fromDate\"\r\n                    :config=\"humanfriendlyConfig\"\r\n                    class=\"form-control flatpickr-input\"\r\n                    id=\"filterFromDate\"\r\n                    name=\"filterFromDate\"\r\n                ></flat-pickr>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterToDate\" class=\"form-label\"> To Date </label>\r\n                <flat-pickr\r\n                    v-model=\"this.data.searchValues.toDate\"\r\n                    :config=\"humanfriendlyConfig\"\r\n                    class=\"form-control flatpickr-input\"\r\n                    id=\"filterToDate\"\r\n                    name=\"filterToDate\"\r\n                ></flat-pickr>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-light\" data-bs-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"updateAgentList()\">Search</button>\r\n          </div>\r\n\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!--  Create message Modal  -->\r\n    <div id=\"createMessage\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n      <div class=\"modal-dialog modal-dialog-centered modal-lg\" style=\"max-width: 1000px;\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"myModalLabel\">Create Schedule Message</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"> </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-5\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-6\">\r\n                    <label for=\"filterFromDate\" class=\"form-label\"> Date</label>\r\n                    <flat-pickr\r\n                        v-model=\"date\"\r\n                        :config=\"humanfriendlyConfig\"\r\n                        class=\"form-control flatpickr-input\"\r\n                        id=\"filterFromDate\"\r\n                        name=\"filterFromDate\"\r\n                    ></flat-pickr>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div>\r\n                      <label for=\"exampleInputtime\" class=\"form-label\">Hour</label>\r\n                      <input type=\"time\" class=\"form-control\" id=\"exampleInputtime\" v-model=\"scheduleHour\">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\" style=\"margin-top: 10px;\">\r\n                    <div>\r\n                      <label for=\"exampleFormControlTextarea5\" class=\"form-label\">Message Content</label>\r\n                      <textarea class=\"form-control\" id=\"exampleFormControlTextarea5\" rows=\"15\" v-model=\"scheduleMessageContent\"></textarea>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-7\">\r\n                  <div class=\"row\" style=\"margin-top: 0px;\">\r\n                    <div class=\"col-sm-6\">\r\n                      <label for=\"filterKeyword\" class=\"form-label\">Keyword Search</label>\r\n                      <input type=\"text\" id=\"filterKeyword\"\r\n                             name=\"filterKeyword\"\r\n                             class=\"form-control search\"\r\n                             placeholder=\"Search for...\"\r\n                             v-model=\"this.data.searchValues.keyword\"\r\n                             @change=\"this.data.searchValues.keyword.length >= 3 ? updateAgentList(): ''\"\r\n                             v-on:keyup.enter=\"this.data.searchValues.keyword === '' ? updateAgentList() : ''\">\r\n                    </div>\r\n                    <div class=\"col-sm-3\">\r\n                      <label for=\"filterLicensed\" class=\"form-label\">Licensed agents?</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Licensed Agents?\" id=\"filterLicensed\" name=\"filterLicensed\" v-model=\"this.data.searchValues.licensed\">\r\n                        <option value=\"1\" selected>Both</option>\r\n                        <option value=\"2\">Yes</option>\r\n                        <option value=\"3\">No</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-sm-3\">\r\n                      <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"filterLanguage\" name=\"filterLanguage\" v-model=\"this.data.searchValues.language\">\r\n                        <option value=\"3\" selected>Both</option>\r\n                        <option value=\"1\" selected>English</option>\r\n                        <option value=\"2\">Spanish</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                <div class=\"table-responsive\" style=\"max-height: 500px;\">\r\n                  <table class=\"table align-middle table-nowrap mb-0\">\r\n                    <thead class=\"table-light\">\r\n                    <tr>\r\n                      <th scope=\"col\" style=\"width: 50px\">\r\n                        #\r\n                      </th>\r\n                      <th scope=\"col\">Name</th>\r\n                      <th scope=\"col\">Status</th>\r\n                      <th scope=\"col\">Phone</th>\r\n                      <th scope=\"col\">Department</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr v-for=\"(data, index) of resultQuery\" :key=\"index\">\r\n                      <td>\r\n                        <div class=\"form-check\">\r\n                          <input class=\"form-check-input\"\r\n                                 type=\"checkbox\"\r\n                                 name=\"chk_child\"\r\n                                 value=\"option1\">\r\n                        </div>\r\n                      </td>\r\n                      <td class=\"id\" style=\"display: none\">\r\n                        <a\r\n                            href=\"javascript:void(0);\"\r\n                            class=\"fw-medium link-primary\"\r\n                        >{{ data.ID }}</a>\r\n                      </td>\r\n                      <td>{{ data.firstName }} {{ data.lastName }}</td>\r\n                      <td><a href=\"javascript:void(0);\" class=\"link-success\">{{ data.statusName }}</a></td>\r\n                      <td>{{ formatPhone(data.phoneNumber) }}</td>\r\n                      <td>{{ data.departmentName }}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  <div class=\"d-flex justify-content-end mt-3\" v-if=\"resultQuery.length >= 0\">\r\n                    <button type=\"button\" class=\"btn btn-soft-success custom-toggle active\" data-bs-toggle=\"button\" @click=\"addRecipients()\" style=\"margin-right: 5px;\">\r\n                      <span class=\"icon-on\">+ Recipient</span>\r\n                    </button>\r\n                    <div class=\"col-md-2\" style=\"margin-top: 5px;\">\r\n                      <button\r\n                          type=\"button\"\r\n                          id=\"dropdownMenuLink1\"\r\n                          data-bs-toggle=\"dropdown\"\r\n                          aria-expanded=\"false\"\r\n                          class=\"btn btn-soft-info\"\r\n                      >\r\n                        <i class=\"ri-more-2-fill\"></i>\r\n                      </button>\r\n                      <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink1\">\r\n                        <li><a class=\"dropdown-item\" href=\"#uploadRecipients\" data-bs-toggle=\"modal\">Upload Recipients</a></li>\r\n                      </ul>\r\n                    </div>\r\n                    <div class=\"pagination-wrap hstack gap-2\">\r\n                      <a\r\n                          class=\"page-item pagination-prev disabled\"\r\n                          href=\"#\"\r\n                          v-if=\"page !== 1\"\r\n                          @click=\"page--\"\r\n                      >\r\n                        Previous\r\n                      </a>\r\n                      <ul class=\"pagination listjs-pagination mb-0\">\r\n                        <li\r\n                            :class=\"{\r\n                      active: pageNumber == page,\r\n                      disabled: pageNumber == '...',\r\n                    }\"\r\n                            v-for=\"(pageNumber, index) in pages.slice(\r\n                      page - 1,\r\n                      page + 5\r\n                    )\"\r\n                            :key=\"index\"\r\n                            @click=\"page = pageNumber\"\r\n                        >\r\n                          <a class=\"page\" href=\"#\">{{ pageNumber }}</a>\r\n                        </li>\r\n                      </ul>\r\n                      <a\r\n                          class=\"page-item pagination-next\"\r\n                          href=\"#\"\r\n                          @click=\"page++\"\r\n                          v-if=\"page < pages.length\"\r\n                      >\r\n                        Next\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"align-middle \">\r\n                <p><b style=\"font-size: 1.5em;\">Number Of Recipients: {{ numberOfRecipents }}</b></p>\r\n              </div>\r\n              <div class=\"table-responsive\" style=\"max-height: 500px;\">\r\n                <table class=\"table align-middle table-nowrap mb-0\">\r\n                  <thead class=\"table-light\">\r\n                  <tr>\r\n                    <th scope=\"col\" style=\"width: 50px\">\r\n                      #\r\n                    </th>\r\n                    <th scope=\"col\">Name</th>\r\n                    <th scope=\"col\">Status</th>\r\n                    <th scope=\"col\">Phone</th>\r\n                    <th scope=\"col\">Department</th>\r\n                    <th scope=\"col\">Remove</th>\r\n                  </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                  <tr v-for=\"(data, index) of reciepientList\" :key=\"index\">\r\n                    <td>\r\n                      <div class=\"form-check\">\r\n                        <input class=\"form-check-input\"\r\n                               type=\"checkbox\"\r\n                               name=\"chk_child\"\r\n                               value=\"option1\">\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"id\" style=\"display: none\">\r\n                      <a\r\n                          href=\"javascript:void(0);\"\r\n                          class=\"fw-medium link-primary\"\r\n                      >{{ data.ID }}</a>\r\n                    </td>\r\n                    <td>{{ data.firstName }} {{ data.lastName }}</td>\r\n                    <td><a href=\"javascript:void(0);\" class=\"link-success\">{{ data.statusName }}</a></td>\r\n                    <td>{{ formatPhone(data.phoneNumber) }}</td>\r\n                    <td>{{ data.departmentName }}</td>\r\n                    <td>\r\n                      <b-button variant=\"danger\" class=\"btn-icon waves-effect waves-light\" size=\"sm\" @click=\"removeRecipient(index)\">\r\n                        <i class=\"ri-delete-bin-5-line\"></i>\r\n                      </b-button>\r\n                    </td>\r\n                  </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-light\" id=\"closemodal\" data-bs-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-success\" @click=\"scheduleMessage()\">Scheduled</button>\r\n          </div>\r\n\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!-- Upload Prospects Modal -->\r\n    <b-modal id=\"uploadRecipients\" title=\"Fullscreen | Upload Clients\" class=\"v-modal-custom\" fullscreen>\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-12\">\r\n          <form>\r\n            <!-- end card -->\r\n\r\n            <div class=\"card\">\r\n              <div class=\"card-body\">\r\n                <div class=\"vstack gap-2\">\r\n                  <h5 class=\"fs-14 mb-1\">Upload Your Recipients List</h5>\r\n                  <h6> <span style=\"color:red; font-size: 0.7em;\">Please, upload a .csv file or convert the .xls/.xlsx to .csv</span></h6>\r\n                  <input class=\"form-control\" id=\"listFile\" type=\"file\"\r\n                         accept=\"text/csv\" @change=\"selectedFile\"/>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-3\">\r\n                      <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"uploadLanguage\" name=\"uploadLanguage\" v-model=\"uploadLanguage\">\r\n                        <option value=\"0\">...</option>\r\n                        <option value=\"1\">English</option>\r\n                        <option value=\"2\">Spanish</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"border rounded\" v-for=\"(file, index) of files\" :key=\"index\">\r\n                    <div class=\"d-flex align-items-center p-2\">\r\n                      <div class=\"flex-grow-1\">\r\n                        <div class=\"pt-1\">\r\n                          <h5 class=\"fs-14 mb-1\" data-dz-name=\"\">\r\n                            {{ file.name }}\r\n                          </h5>\r\n                          <p class=\"fs-13 text-muted mb-0\" data-dz-size=\"\">\r\n                            <strong>{{ file.size / 1024 }}</strong> KB\r\n                          </p>\r\n                          <strong class=\"error text-danger\" data-dz-errormessage=\"\"></strong>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"flex-shrink-0 ms-3\">\r\n                        <button data-dz-remove=\"\" class=\"btn btn-sm btn-danger\" @click=\"deleteRecord\">\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"text-end mb-3\">\r\n                    <button type=\"button\" class=\"btn btn-success w-sm\" @click=\"handleFileUpload\">Process File</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- end card -->\r\n          </form>\r\n        </div>\r\n        <!-- end col -->\r\n\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n\r\n            <!-- Tables Border Colors -->\r\n            <table class=\"table table-bordered border-secondary table-nowrap\" v-if=\"parsed\">\r\n              <thead>\r\n              <tr>\r\n                <th scope=\"col\">\r\n                  ID\r\n                </th>\r\n                <th v-for=\"(header, key) in content.meta.fields\"\r\n                    v-bind:key=\"'header-'+key\" scope=\"col\">{{ header }}\r\n                </th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(row, rowKey) in content.data\"\r\n                  v-bind:key=\"'row-'+rowKey\">\r\n                <td>\r\n                  <b>{{ (rowKey+1) }}</b>\r\n                </td>\r\n                <td v-for=\"(column, columnKey) in content.meta.fields\"\r\n                    v-bind:key=\"'row-'+rowKey+'-column-'+columnKey\">\r\n                  {{ content.data[rowKey][column] }}\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n\r\n          </div>\r\n        </div>\r\n        <div class=\"text-end mb-3\">\r\n          <button type=\"button\" class=\"btn btn-light\" id=\"closeListModal\" data-bs-dismiss=\"modal\">Close</button>\r\n          <button type=\"button\" class=\"btn btn-success w-sm\" @click=\"addRecipientsFromFile\">Add to recipients list</button>\r\n        </div>\r\n      </div>\r\n    </b-modal>\r\n\r\n  </Layout>\r\n</template>\r\n"]}]}