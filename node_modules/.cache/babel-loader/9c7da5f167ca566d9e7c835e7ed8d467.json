{"remainingRequest":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\wamp64\\www\\crm\\frontend\\src\\components\\appoinmentCalendar.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\wamp64\\www\\crm\\frontend\\src\\components\\appoinmentCalendar.vue","mtime":1689110555999},{"path":"C:\\wamp64\\www\\crm\\frontend\\babel.config.js","mtime":1645939880000},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1668443304941},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1652458135842},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1668443313146}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L3dhbXA2NC93d3cvY3JtL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0ICJAZnVsbGNhbGVuZGFyL2NvcmUvdmRvbSI7CmltcG9ydCB7IFNpbXBsZUJhciB9IGZyb20gInNpbXBsZWJhci12dWUzIjsKaW1wb3J0IHsgQ2FsZW5kYXJJY29uIH0gZnJvbSAiQHpodW93ZW5saS92dWUtZmVhdGhlci1pY29ucyI7CmltcG9ydCBkYXlHcmlkUGx1Z2luIGZyb20gIkBmdWxsY2FsZW5kYXIvZGF5Z3JpZCI7CmltcG9ydCB0aW1lR3JpZFBsdWdpbiBmcm9tICJAZnVsbGNhbGVuZGFyL3RpbWVncmlkIjsgLy8gaW1wb3J0IGludGVyYWN0aW9uUGx1Z2luLCB7IERyYWdnYWJsZSB9IGZyb20gIkBmdWxsY2FsZW5kYXIvaW50ZXJhY3Rpb24iOwoKaW1wb3J0IGJvb3RzdHJhcFBsdWdpbiBmcm9tICJAZnVsbGNhbGVuZGFyL2Jvb3RzdHJhcCI7CmltcG9ydCBsaXN0UGx1Z2luIGZyb20gIkBmdWxsY2FsZW5kYXIvbGlzdCI7CmltcG9ydCBGdWxsQ2FsZW5kYXIgZnJvbSAiQGZ1bGxjYWxlbmRhci92dWUzIjsKaW1wb3J0IGZsYXRQaWNrciBmcm9tICJ2dWUtZmxhdHBpY2tyLWNvbXBvbmVudCI7CmltcG9ydCAiZmxhdHBpY2tyL2Rpc3QvZmxhdHBpY2tyLmNzcyI7CmltcG9ydCB7IHJlcXVpcmVkLCBoZWxwZXJzIH0gZnJvbSAiQHZ1ZWxpZGF0ZS92YWxpZGF0b3JzIjsKaW1wb3J0IHVzZVZ1ZWxpZGF0ZSBmcm9tICJAdnVlbGlkYXRlL2NvcmUiOyAvLyBpbXBvcnQgeyBJTklUSUFMX0VWRU5UUyB9IGZyb20gIi4vY2FsZW5kYXIiOwoKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQvbW9tZW50IjsgLy8gaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwoKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHJldHVybiB7CiAgICAgIHYkOiB1c2VWdWVsaWRhdGUoKQogICAgfTsKICB9LAogIHZhbGlkYXRpb25zOiB7CiAgICBldmVudDogewogICAgICB0aXRsZTogewogICAgICAgIHJlcXVpcmVkOiBoZWxwZXJzLndpdGhNZXNzYWdlKCJUaXRsZSBpcyByZXF1aXJlZCIsIHJlcXVpcmVkKQogICAgICB9LAogICAgICBjYXRlZ29yeTogewogICAgICAgIHJlcXVpcmVkOiBoZWxwZXJzLndpdGhNZXNzYWdlKCJDYXRlZ29yeSBpcyByZXF1aXJlZCIsIHJlcXVpcmVkKQogICAgICB9CiAgICB9CiAgfSwKICBwYWdlOiB7CiAgICB0aXRsZTogIkNhbGVuZGFyIgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICJDYWxlbmRhciIsCiAgICAgIGl0ZW1zOiBbewogICAgICAgIHRleHQ6ICJBcHBzIiwKICAgICAgICBocmVmOiAiLyIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJDYWxlbmRhciIsCiAgICAgICAgYWN0aXZlOiB0cnVlCiAgICAgIH1dLAogICAgICBjYXRlZ29yaWVzOiBbewogICAgICAgIG5hbWU6ICdEYW5nZXInLAogICAgICAgIHZhbHVlOiAnYmctZGFuZ2VyJwogICAgICB9LCB7CiAgICAgICAgbmFtZTogJ1N1Y2Nlc3MnLAogICAgICAgIHZhbHVlOiAnYmctc3VjY2VzcycKICAgICAgfSwgewogICAgICAgIG5hbWU6ICdQcmltYXJ5JywKICAgICAgICB2YWx1ZTogJ2JnLXByaW1hcnknCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAnSW5mbycsCiAgICAgICAgdmFsdWU6ICdiZy1pbmZvJwogICAgICB9LCB7CiAgICAgICAgbmFtZTogJ0RhcmsnLAogICAgICAgIHZhbHVlOiAnYmctZGFyaycKICAgICAgfSwgewogICAgICAgIG5hbWU6ICdXYXJuaW5nJywKICAgICAgICB2YWx1ZTogJ2JnLXdhcm5pbmcnCiAgICAgIH1dLAogICAgICBjdXJyZW50RXZlbnRzOiBbXSwKICAgICAgc2hvd01vZGFsOiBmYWxzZSwKICAgICAgZXZlbnRNb2RhbDogZmFsc2UsCiAgICAgIHN1Ym1pdHRlZDogZmFsc2UsCiAgICAgIHN1Ym1pdDogZmFsc2UsCiAgICAgIG5ld0V2ZW50RGF0YToge30sCiAgICAgIGVkaXQ6IHt9LAogICAgICBkZWxldGVJZDoge30sCiAgICAgIGVycm9yczogW10sCiAgICAgIGV2ZW50OiB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgY2F0ZWdvcnk6ICIiLAogICAgICAgIHN0YXJ0OiBudWxsLAogICAgICAgIGVuZDogbnVsbCwKICAgICAgICBsb2NhdGlvbjogIiIKICAgICAgfSwKICAgICAgZWRpdGV2ZW50OiB7CiAgICAgICAgZWRpdElEOiAwLAogICAgICAgIGVkaXRUaXRsZTogIiIsCiAgICAgICAgZWRpdGNhdGVnb3J5OiAiIiwKICAgICAgICBlZGl0RGVzY3JpcHRpb246ICIiLAogICAgICAgIGVkaXRTdGFydDogIiIsCiAgICAgICAgZWRpdEVuZDogIiIsCiAgICAgICAgZWRpdExvY2F0aW9uOiAiIgogICAgICB9LAogICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIGRhdGVUaW1lQ29uZmlnOiB7CiAgICAgICAgZW5hYmxlVGltZTogdHJ1ZSwKICAgICAgICBkYXRlRm9ybWF0OiAiRiBqLCBZIEg6aSBLIgogICAgICB9LAogICAgICB0b0RhdGU6IG51bGwsCiAgICAgIGZyb21EYXRlOiBudWxsLAogICAgICBjYWxlbmRhck9wdGlvbnM6IHsKICAgICAgICB0aW1lWm9uZTogSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lLAogICAgICAgIGRyb3BwYWJsZTogdHJ1ZSwKICAgICAgICBuYXZMaW5rczogdHJ1ZSwKICAgICAgICBwbHVnaW5zOiBbZGF5R3JpZFBsdWdpbiwgdGltZUdyaWRQbHVnaW4sIC8vIGludGVyYWN0aW9uUGx1Z2luLAogICAgICAgIGJvb3RzdHJhcFBsdWdpbiwgbGlzdFBsdWdpbl0sCiAgICAgICAgdGhlbWVTeXN0ZW06ICJib290c3RyYXAiLAogICAgICAgIGhlYWRlclRvb2xiYXI6IHsKICAgICAgICAgIGxlZnQ6ICJwcmV2LG5leHQgdG9kYXkiLAogICAgICAgICAgY2VudGVyOiAidGl0bGUiLAogICAgICAgICAgcmlnaHQ6ICJkYXlHcmlkTW9udGgsdGltZUdyaWRXZWVrLHRpbWVHcmlkRGF5LGxpc3RNb250aCIKICAgICAgICB9LAogICAgICAgIHdpbmRvd1Jlc2l6ZTogZnVuY3Rpb24gd2luZG93UmVzaXplKCkgewogICAgICAgICAgX3RoaXMuZ2V0SW5pdGlhbFZpZXcoKTsKICAgICAgICB9LAogICAgICAgIGluaXRpYWxWaWV3OiB0aGlzLmdldEluaXRpYWxWaWV3KCksCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgc2VsZWN0YWJsZTogdHJ1ZSwKICAgICAgICBzZWxlY3RNaXJyb3I6IHRydWUsCiAgICAgICAgZGF5TWF4RXZlbnRzOiB0cnVlLAogICAgICAgIHdlZWtlbmRzOiB0cnVlLAogICAgICAgIGRhdGVDbGljazogdGhpcy5kYXRlQ2xpY2tlZCwKICAgICAgICBldmVudENsaWNrOiB0aGlzLmVkaXRFdmVudCwKICAgICAgICBldmVudHNTZXQ6IHRoaXMuaGFuZGxlRXZlbnRzLAogICAgICAgIGV2ZW50RHJvcDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9ldmVudERyb3AgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZXZlbnQpIHsKICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgZWRpdFRpdGxlLCBlZGl0Y2F0ZWdvcnksIGRhdGUsIGQsIG0sIHksIGRhdGE7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWRpdFRpdGxlID0gZXZlbnQuZXZlbnQudGl0bGU7CiAgICAgICAgICAgICAgICAgICAgZWRpdGNhdGVnb3J5ID0gZXZlbnQuZXZlbnQuY2xhc3NOYW1lc1swXTsgLy8gY29uc29sZS5sb2coZWRpdGNhdGVnb3J5KQoKICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXQgPSBldmVudC5ldmVudDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXQuc2V0UHJvcCgidGl0bGUiLCBlZGl0VGl0bGUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdC5zZXRQcm9wKCJjbGFzc05hbWVzIiwgZWRpdGNhdGVnb3J5KTsKICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICBkID0gZGF0ZS5nZXREYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgbSA9IGRhdGUuZ2V0TW9udGgoKTsKICAgICAgICAgICAgICAgICAgICB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHksIG0sIGQgKyAyNCwgMTYsIDApOwogICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRJRDogZXZlbnQuZXZlbnQuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRUaXRsZTogZWRpdFRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0Y2F0ZWdvcnk6IGV2ZW50LmV2ZW50LmNsYXNzTmFtZXNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXREZXNjcmlwdGlvbjogZXZlbnQuZXZlbnQuZXh0ZW5kZWRQcm9wcy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdFN0YXJ0OiBtb21lbnQoZXZlbnQuZXZlbnQuc3RhcnRTdHIpLmZvcm1hdCgnTU1NTSBELCBZWVlZIGg6bW0gQScpLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0RW5kOiBtb21lbnQoZXZlbnQuZXZlbnQuZW5kU3RyKS5mb3JtYXQoJ01NTU0gRCwgWVlZWSBoOm1tIEEnKSwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdExvY2F0aW9uOiBldmVudC5ldmVudC5leHRlbmRlZFByb3BzLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgZWRpdDogdGhpcy5lZGl0LAogICAgICAgICAgICAgICAgICAgICAgdGVzdDogbmV3IERhdGUoeSwgbSwgZCArIDI0LCAxNiwgMCksCiAgICAgICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpCiAgICAgICAgICAgICAgICAgICAgfTsgLy8gY29uc29sZS5sb2coZGF0YSkKCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL3VwZGF0ZUV2ZW50JywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gJ1RydWUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJFdmVudCB1cGRhdGVkISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnVwZGF0ZUNhbGVuZGFyRXZlbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkV2ZW50IGhhcyBiZWVuIHVwZGF0ZWQhIiwKICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNb2RhbCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgZnVuY3Rpb24gZXZlbnREcm9wKF94KSB7CiAgICAgICAgICAgIHJldHVybiBfZXZlbnREcm9wLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGV2ZW50RHJvcDsKICAgICAgICB9KCksCiAgICAgICAgZXZlbnRSZXNpemU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfZXZlbnRSZXNpemUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIGVkaXRUaXRsZSwgZWRpdGNhdGVnb3J5LCBkYXRlLCBkLCBtLCB5LCBkYXRhOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50KQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlZGl0VGl0bGUgPSBldmVudC5ldmVudC50aXRsZTsKICAgICAgICAgICAgICAgICAgICBlZGl0Y2F0ZWdvcnkgPSBldmVudC5ldmVudC5jbGFzc05hbWVzWzBdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdCA9IGV2ZW50LmV2ZW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdC5zZXRQcm9wKCJ0aXRsZSIsIGVkaXRUaXRsZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0LnNldFByb3AoImNsYXNzTmFtZXMiLCBlZGl0Y2F0ZWdvcnkpOwogICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIGQgPSBkYXRlLmdldERhdGUoKTsKICAgICAgICAgICAgICAgICAgICBtID0gZGF0ZS5nZXRNb250aCgpOwogICAgICAgICAgICAgICAgICAgIHkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoeSwgbSwgZCArIDI0LCAxNiwgMCk7CiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdElEOiBldmVudC5ldmVudC5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdFRpdGxlOiBlZGl0VGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRjYXRlZ29yeTogZXZlbnQuZXZlbnQuY2xhc3NOYW1lc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdERlc2NyaXB0aW9uOiBldmVudC5ldmVudC5leHRlbmRlZFByb3BzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0U3RhcnQ6IG1vbWVudChldmVudC5ldmVudC5zdGFydFN0cikuZm9ybWF0KCdNTU1NIEQsIFlZWVkgaDptbSBBJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRFbmQ6IG1vbWVudChldmVudC5ldmVudC5lbmRTdHIpLmZvcm1hdCgnTU1NTSBELCBZWVlZIGg6bW0gQScpLAogICAgICAgICAgICAgICAgICAgICAgICBlZGl0TG9jYXRpb246IGV2ZW50LmV2ZW50LmV4dGVuZGVkUHJvcHMubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBlZGl0OiB0aGlzLmVkaXQsCiAgICAgICAgICAgICAgICAgICAgICB0ZXN0OiBuZXcgRGF0ZSh5LCBtLCBkICsgMjQsIDE2LCAwKSwKICAgICAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvdXBkYXRlRXZlbnQnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSAnVHJ1ZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkV2ZW50IHVwZGF0ZWQhIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXI6IDEwMDAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMudXBkYXRlQ2FsZW5kYXJFdmVudHMoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiQ2FsZW5kYXIgRXZlbnRzIGNvdWxkbid0IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkV2ZW50IGhhcyBiZWVuIHVwZGF0ZWQhIiwKICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNb2RhbCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBmdW5jdGlvbiBldmVudFJlc2l6ZShfeDIpIHsKICAgICAgICAgICAgcmV0dXJuIF9ldmVudFJlc2l6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBldmVudFJlc2l6ZTsKICAgICAgICB9KCksCiAgICAgICAgZHJvcDogZnVuY3Rpb24gZHJvcChlKSB7CiAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgICAgICB2YXIgc3RhcnQgPSBtb21lbnQoZS5kYXRlKS5hZGQoMSwgJ2RheXMnKS5mb3JtYXQoJ01NTU0gRCwgWVlZWSBoOm1tIEEnKTsKICAgICAgICAgIHZhciBlbmQgPSBtb21lbnQoc3RhcnQpLmFkZCgxLCAnaG91cnMnKS5mb3JtYXQoJ01NTU0gRCwgWVlZWSBoOm1tIEEnKTsKICAgICAgICAgIHZhciBldmVudCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NyZWF0aW5nRXZlbnQnKSk7CiAgICAgICAgICB2YXIgZWRpdFRpdGxlID0gZXZlbnQudGl0bGU7CiAgICAgICAgICB2YXIgZWRpdGNhdGVnb3J5ID0gZXZlbnQuY2F0ZWdvcnk7CiAgICAgICAgICB0aGlzLmVkaXQgPSBldmVudDsKICAgICAgICAgIHRoaXMuZWRpdFsidGl0bGUiXSA9IGVkaXRUaXRsZTsKICAgICAgICAgIHRoaXMuZWRpdFsiY2xhc3NOYW1lcyJdID0gZWRpdGNhdGVnb3J5OwogICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgdmFyIGQgPSBkYXRlLmdldERhdGUoKTsKICAgICAgICAgIHZhciBtID0gZGF0ZS5nZXRNb250aCgpOwogICAgICAgICAgdmFyIHkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICBuZXcgRGF0ZSh5LCBtLCBkICsgMjQsIDE2LCAwKTsKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICBldmVudDogewogICAgICAgICAgICAgIGVkaXRJRDogZXZlbnQuaWQsCiAgICAgICAgICAgICAgZWRpdFRpdGxlOiBlZGl0VGl0bGUsCiAgICAgICAgICAgICAgZWRpdGNhdGVnb3J5OiBldmVudC5jYXRlZ29yeSwKICAgICAgICAgICAgICBlZGl0RGVzY3JpcHRpb246IGV2ZW50LmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgIGVkaXRTdGFydDogc3RhcnQsCiAgICAgICAgICAgICAgZWRpdEVuZDogZW5kLAogICAgICAgICAgICAgIGVkaXRMb2NhdGlvbjogZXZlbnQubG9jYXRpb24KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWRpdDogdGhpcy5lZGl0LAogICAgICAgICAgICB0ZXN0OiBuZXcgRGF0ZSh5LCBtLCBkICsgMjQsIDE2LCAwKSwKICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKQogICAgICAgICAgfTsKICAgICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvdXBkYXRlRXZlbnQnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09ICdUcnVlJykgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdGl0bGU6ICJFdmVudCB1cGRhdGVkISIsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgX3RoaXM0LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSB1cGRhdGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZXZlbnRNb2RhbCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEZ1bGxDYWxlbmRhcjogRnVsbENhbGVuZGFyLAogICAgU2ltcGxlQmFyOiBTaW1wbGVCYXIsCiAgICBDYWxlbmRhckljb246IENhbGVuZGFySWNvbiwKICAgIGZsYXRQaWNrcjogZmxhdFBpY2tyCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREYXRhOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvZ2V0QWdlbnRBcHBvaW50bWVudHMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuY2FsZW5kYXJPcHRpb25zLmV2ZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJDYWxlbmRhciBFdmVudHMgY291bGRuJ3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIHZhciBtb250aE5hbWVzID0gWyJKYW51YXJ5IiwgIkZlYnJ1YXJ5IiwgIk1hcmNoIiwgIkFwcmlsIiwgIk1heSIsICJKdW5lIiwgIkp1bHkiLCAiQXVndXN0IiwgIlNlcHRlbWJlciIsICJPY3RvYmVyIiwgIk5vdmVtYmVyIiwgIkRlY2VtYmVyIl07CiAgICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSksCiAgICAgICAgICBtb250aCA9ICIiICsgbW9udGhOYW1lc1tkLmdldE1vbnRoKCldLAogICAgICAgICAgZGF5ID0gIiIgKyBkLmdldERhdGUoKSwKICAgICAgICAgIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgIGlmIChtb250aC5sZW5ndGggPCAyKSBtb250aCA9ICIwIiArIG1vbnRoOwogICAgICBpZiAoZGF5Lmxlbmd0aCA8IDIpIGRheSA9ICIwIiArIGRheTsKICAgICAgcmV0dXJuIFtkYXkgKyAiICIgKyBtb250aCwgeWVhcl0uam9pbigiLCIpOwogICAgfSwKICAgIGZvcm1hdERhdGUyMjogZnVuY3Rpb24gZm9ybWF0RGF0ZTIyKGRhdGUsIGZvcm1hdCkgewogICAgICBkYXRlID0gbW9tZW50KGRhdGUpLmZvcm1hdChmb3JtYXQpOwogICAgICByZXR1cm4gZGF0ZTsKICAgIH0sCiAgICBnZXRJbml0aWFsVmlldzogZnVuY3Rpb24gZ2V0SW5pdGlhbFZpZXcoKSB7CiAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjggJiYgd2luZG93LmlubmVyV2lkdGggPCAxMjAwKSB7CiAgICAgICAgcmV0dXJuICJ0aW1lR3JpZFdlZWsiOwogICAgICB9IGVsc2UgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2OCkgewogICAgICAgIHJldHVybiAibGlzdE1vbnRoIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gImRheUdyaWRNb250aCI7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogTW9kYWwgZm9ybSBzdWJtaXQNCiAgICAgKi8KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciB0aXRsZSwgY2F0ZWdvcnksIGNhbGVuZGFyQXBpOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczYuc3VibWl0dGVkID0gdHJ1ZTsgLy8gc3RvcCBoZXJlIGlmIGZvcm0gaXMgaW52YWxpZAoKICAgICAgICAgICAgICAgIF90aGlzNi52JC4kdG91Y2goKTsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzNi52JC4kaW52YWxpZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgdGl0bGUgPSBfdGhpczYuZXZlbnQudGl0bGU7CiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9IF90aGlzNi5ldmVudC5jYXRlZ29yeTsKICAgICAgICAgICAgICAgIGNhbGVuZGFyQXBpID0gX3RoaXM2LiRyZWZzLmZ1bGxDYWxlbmRhci5nZXRBcGkoKTsgLy8gY29uc29sZS5sb2coY2FsZW5kYXJBcGkpOwogICAgICAgICAgICAgICAgLy8gY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgIC8vICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICAgICAgICAgIC8vICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgICAgIC8vICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICAgICAgICAgIC8vICAgZXZlbnQ6IHsKICAgICAgICAgICAgICAgIC8vICAgICB0aXRsZTogZXZlbnRFbC5pbm5lclRleHQsCiAgICAgICAgICAgICAgICAvLyAgICAgc3RhcnQ6IG5ldyBEYXRlKCksCiAgICAgICAgICAgICAgICAvLyAgICAgY2xhc3NOYW1lOiBldmVudEVsLmdldEF0dHJpYnV0ZSgiZGF0YS1jbGFzcyIpLAogICAgICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gYXdhaXQgYXhpb3MKICAgICAgICAgICAgICAgIC8vICAgICAucG9zdCgnL2FwaS9jcmVhdGVFdmVudCcsIGRhdGEpCiAgICAgICAgICAgICAgICAvLyAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgLy8gICAgICAgaWYgKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgICAgLy8gICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICB0aXRsZTogIkV2ZW50IGNyZWF0ZWQhIiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgdGltZXI6IDEwMDAsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFyRXZlbnRzKCkKICAgICAgICAgICAgICAgIC8vICAgICAgIH0KICAgICAgICAgICAgICAgIC8vICAgICB9KQogICAgICAgICAgICAgICAgLy8gICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAvLyAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJyl7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJ2xvZ291dCcpCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiQ2FsZW5kYXIgRXZlbnRzIGNvdWxkbid0IGJlIHNhdmVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpCiAgICAgICAgICAgICAgICAvLyAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgfSkKICAgICAgICAgICAgICAgIC8vIHJldHVybiB7CiAgICAgICAgICAgICAgICAvLyAgIHRpdGxlOiBldmVudEVsLmlubmVyVGV4dCwKICAgICAgICAgICAgICAgIC8vICAgc3RhcnQ6IG5ldyBEYXRlKCksCiAgICAgICAgICAgICAgICAvLyAgIGNsYXNzTmFtZTogZXZlbnRFbC5nZXRBdHRyaWJ1dGUoImRhdGEtY2xhc3MiKSwKICAgICAgICAgICAgICAgIC8vIH07CgogICAgICAgICAgICAgICAgX3RoaXM2LmN1cnJlbnRFdmVudHMgPSBjYWxlbmRhckFwaS5hZGRFdmVudCh7CiAgICAgICAgICAgICAgICAgIGlkOiBfdGhpczYubmV3RXZlbnREYXRhLmxlbmd0aCArIDEsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgICAgICAgICAgc3RhcnQ6IF90aGlzNi50b0RhdGUsCiAgICAgICAgICAgICAgICAgIGVuZDogX3RoaXM2LmZyb21EYXRlLAogICAgICAgICAgICAgICAgICBjbGFzc05hbWVzOiBbY2F0ZWdvcnldCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczYuc3VjY2Vzc21zZygpOwoKICAgICAgICAgICAgICAgIF90aGlzNi5zaG93TW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzNi5uZXdFdmVudERhdGEgPSB7fTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF90aGlzNi5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzNi5ldmVudCA9IHt9OwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICBoaWRlTW9kYWw6IGZ1bmN0aW9uIGhpZGVNb2RhbChlKSB7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7CiAgICAgIHRoaXMuZXZlbnQgPSB7fTsKICAgIH0sCgogICAgLyoqDQogICAgICogRWRpdCBldmVudCBtb2RhbCBzdWJtaXQNCiAgICAgKi8KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgZWRpdFN1Ym1pdDogZnVuY3Rpb24gZWRpdFN1Ym1pdChlKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGVkaXRUaXRsZSwgZWRpdGNhdGVnb3J5LCBkYXRlLCBkLCBtLCB5LCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczcuc3VibWl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVkaXRUaXRsZSA9IF90aGlzNy5lZGl0ZXZlbnQuZWRpdFRpdGxlOwogICAgICAgICAgICAgICAgZWRpdGNhdGVnb3J5ID0gX3RoaXM3LmVkaXRldmVudC5lZGl0Y2F0ZWdvcnk7CgogICAgICAgICAgICAgICAgX3RoaXM3LmVkaXQuc2V0UHJvcCgidGl0bGUiLCBlZGl0VGl0bGUpOwoKICAgICAgICAgICAgICAgIF90aGlzNy5lZGl0LnNldFByb3AoImNsYXNzTmFtZXMiLCBlZGl0Y2F0ZWdvcnkpOwoKICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgZCA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgbSA9IGRhdGUuZ2V0TW9udGgoKTsKICAgICAgICAgICAgICAgIHkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICBuZXcgRGF0ZSh5LCBtLCBkICsgMjQsIDE2LCAwKTsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIGV2ZW50OiBfdGhpczcuZWRpdGV2ZW50LAogICAgICAgICAgICAgICAgICBlZGl0OiBfdGhpczcuZWRpdCwKICAgICAgICAgICAgICAgICAgdGVzdDogbmV3IERhdGUoeSwgbSwgZCArIDI0LCAxNiwgMCksCiAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvdXBkYXRlRXZlbnQnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczcudXBkYXRlQ2FsZW5kYXJFdmVudHMoKTsKCiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gJ1RydWUnKSB7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgICAgICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkV2ZW50IHVwZGF0ZWQhIiwKICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiQ2FsZW5kYXIgRXZlbnRzIGNvdWxkbid0IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX3RoaXM3LnN1Y2Nlc3Ntc2coKTsKCiAgICAgICAgICAgICAgICBfdGhpczcuZXZlbnRNb2RhbCA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIERlbGV0ZSBldmVudA0KICAgICAqLwogICAgZGVsZXRlRXZlbnQ6IGZ1bmN0aW9uIGRlbGV0ZUV2ZW50KCkgewogICAgICB0aGlzLmVkaXQucmVtb3ZlKCk7CiAgICAgIHRoaXMuZXZlbnRNb2RhbCA9IGZhbHNlOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDbGljayBhbnkgZGF0ZSB0byBhZGQgZXZlbnQNCiAgICAgKiBNb2RhbCBvcGVuIGZvciBhZGQgZXZlbnQNCiAgICAgKi8KICAgIGRhdGVDbGlja2VkOiBmdW5jdGlvbiBkYXRlQ2xpY2tlZChpbmZvKSB7CiAgICAgIHRoaXMubmV3RXZlbnREYXRhID0gaW5mbzsKICAgICAgdGhpcy5zaG93TW9kYWwgPSB0cnVlOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBNb2RhbCBvcGVuIGZvciBlZGl0IGV2ZW50DQogICAgICovCiAgICBlZGl0RXZlbnQ6IGZ1bmN0aW9uIGVkaXRFdmVudChpbmZvKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdGhpcy5lZGl0ID0gaW5mby5ldmVudDsKICAgICAgdGhpcy5lZGl0ZXZlbnQuZWRpdElEID0gdGhpcy5lZGl0Ll9kZWYucHVibGljSWQ7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICBldmVudElEOiB0aGlzLmVkaXRldmVudC5lZGl0SUQsCiAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKQogICAgICB9OwogICAgICBheGlvcy5wb3N0KCcvYXBpL2dldEV2ZW50QnlpZCcsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhWzBdOwogICAgICAgIF90aGlzOC5lZGl0ZXZlbnQuZWRpdFRpdGxlID0gZGF0YS50aXRsZTsKICAgICAgICBfdGhpczguZWRpdGV2ZW50LmVkaXREZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247CiAgICAgICAgX3RoaXM4LmVkaXRldmVudC5lZGl0TG9jYXRpb24gPSBkYXRhLmxvY2F0aW9uOwogICAgICAgIF90aGlzOC5lZGl0ZXZlbnQuZWRpdGNhdGVnb3J5ID0gZGF0YS5jbGFzc05hbWU7CiAgICAgICAgX3RoaXM4LmVkaXRldmVudC5lZGl0U3RhcnQgPSBtb21lbnQoZGF0YS5zdGFydCkuZm9ybWF0KCdNTU1NIEQsIFlZWVkgaDptbSBBJyk7CiAgICAgICAgX3RoaXM4LmVkaXRldmVudC5lZGl0RW5kID0gbW9tZW50KGRhdGEuZW5kKS5mb3JtYXQoJ01NTU0gRCwgWVlZWSBoOm1tIEEnKTsgLy8gY29uc29sZS5sb2codGhpcy5lZGl0ZXZlbnQuZWRpdFN0YXJ0LnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHsKICAgICAgICAvLyAgIHRpbWVab25lOiAnQW1lcmljYS9OZXdfWW9yaycsCiAgICAgICAgLy8gfSkpCiAgICAgICAgLy8gdGhpcy5lZGl0ZXZlbnQuZWRpdFN0YXJ0ID0gdGhpcy5lZGl0Ll9pbnN0YW5jZS5yYW5nZS5zdGFydDsKICAgICAgICAvLyB0aGlzLmVkaXRldmVudC5lZGl0RW5kID0gdGhpcy5lZGl0Ll9pbnN0YW5jZS5yYW5nZS5lbmQ7CgogICAgICAgIF90aGlzOC5ldmVudE1vZGFsID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgIF90aGlzOC4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgfQoKICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiQ2FsZW5kYXIgRXZlbnRzIGNvdWxkbid0IGJlIHVwZGF0ZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjbG9zZU1vZGFsOiBmdW5jdGlvbiBjbG9zZU1vZGFsKCkgewogICAgICB0aGlzLmV2ZW50TW9kYWwgPSBmYWxzZTsKICAgIH0sCiAgICBjb25maXJtOiBmdW5jdGlvbiBjb25maXJtKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiWW91IHdvbid0IGJlIGFibGUgdG8gZGVsZXRlIHRoaXMhIiwKICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzRjMzhmIiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNmNDZhNmEiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBkZWxldGUgaXQhIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBfdGhpczkuZGVsZXRlRXZlbnQoKTsKCiAgICAgICAgICBTd2FsLmZpcmUoIkRlbGV0ZWQhIiwgIkV2ZW50IGhhcyBiZWVuIGRlbGV0ZWQuIiwgInN1Y2Nlc3MiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUNhbGVuZGFyRXZlbnRzOiBmdW5jdGlvbiB1cGRhdGVDYWxlbmRhckV2ZW50cygpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgICAgICAgICAgIHVzZXJJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9nZXRBZ2VudEFwcG9pbnRtZW50cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTAuY2FsZW5kYXJPcHRpb25zLmV2ZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJDYWxlbmRhciBFdmVudHMgY291bGRuJ3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFNob3cgbGlzdCBvZiBldmVudHMNCiAgICAgKi8KICAgIGhhbmRsZUV2ZW50czogZnVuY3Rpb24gaGFuZGxlRXZlbnRzKGV2ZW50cykgewogICAgICB0aGlzLmN1cnJlbnRFdmVudHMgPSBldmVudHM7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFNob3cgc3VjY2Vzc2Z1bGwgU2F2ZSBEaWFsb2cNCiAgICAgKi8KICAgIHN1Y2Nlc3Ntc2c6IGZ1bmN0aW9uIHN1Y2Nlc3Ntc2coKSB7CiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgcG9zaXRpb246ICJjZW50ZXIiLAogICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICB0aXRsZTogIkV2ZW50IGhhcyBiZWVuIHNhdmVkISIsCiAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgIHRpbWVyOiAxMDAwCiAgICAgIH0pOwogICAgfSwKICAgIHNvcnRFdmVudHM6IGZ1bmN0aW9uIHNvcnRFdmVudHMoZXZlbnRzKSB7CiAgICAgIGV2ZW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuc3RhcnQpIC0gbmV3IERhdGUoYi5zdGFydCk7IC8vIGRlc2NlbmRpbmcKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRlRXZlbnQ6IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICB0aGlzLmVycm9ycyA9IFtdOwoKICAgICAgaWYgKCF0aGlzLmV2ZW50LnRpdGxlKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgnRXZlbnQgdGl0dGxlIGlzIHJlcXVpcmVkLicpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZXZlbnQuZGVzY3JpcHRpb24pIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdFdmVudCBEZXNjcmlwdGlvbiBpcyByZXF1aXJlZC4nKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmV2ZW50LmRlc2NyaXB0aW9uKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgnRXZlbnQgRGVzY3JpcHRpb24gaXMgcmVxdWlyZWQuJyk7CiAgICAgIH0KCiAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZUNhdGVnb3J5JykudmFsdWUpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdFdmVudCBDYXRlZ29yeSBpcyByZXF1aXJlZC4nKTsKICAgICAgfQoKICAgICAgdGhpcy5ldmVudC5jYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGVDYXRlZ29yeScpLnZhbHVlOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyksCiAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICBldmVudDogewogICAgICAgICAgdGl0bGU6IHRoaXMuZXZlbnQudGl0bGUsCiAgICAgICAgICBzdGFydDogdGhpcy5ldmVudC5zdGFydCwKICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmV2ZW50LmRlc2NyaXB0aW9uLAogICAgICAgICAgZW5kOiB0aGlzLmV2ZW50LmVuZCwKICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5ldmVudC5jYXRlZ29yeSwKICAgICAgICAgIGNyZWF0ZUJ1dHRvbjogMQogICAgICAgIH0KICAgICAgfTsKICAgICAgYXhpb3MucG9zdCgnL2FwaS9jcmVhdGVFdmVudCcsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgIHRpdGxlOiAiRXZlbnQgY3JlYXRlZCEiLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgIF90aGlzMTEuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkNhbGVuZGFyIEV2ZW50cyBjb3VsZG4ndCBiZSBzYXZlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgdmFyIGRhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2dldEFnZW50QXBwb2ludG1lbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzMTIuY2FsZW5kYXJPcHRpb25zLmV2ZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgIF90aGlzMTIuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJDYWxlbmRhciBFdmVudHMgY291bGRuJ3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTcpOwogICAgfSkpKCk7CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["Swal","SimpleBar","CalendarIcon","dayGridPlugin","timeGridPlugin","bootstrapPlugin","listPlugin","FullCalendar","flatPickr","required","helpers","useVuelidate","axios","moment","setup","v$","validations","event","title","withMessage","category","page","data","items","text","href","active","categories","name","value","currentEvents","showModal","eventModal","submitted","submit","newEventData","edit","deleteId","errors","id","description","start","end","location","editevent","editID","editTitle","editcategory","editDescription","editStart","editEnd","editLocation","dateTimeConfig","enableTime","dateFormat","toDate","fromDate","calendarOptions","timeZone","Intl","DateTimeFormat","resolvedOptions","droppable","navLinks","plugins","themeSystem","headerToolbar","left","center","right","windowResize","getInitialView","initialView","editable","selectable","selectMirror","dayMaxEvents","weekends","dateClick","dateClicked","eventClick","editEvent","eventsSet","handleEvents","eventDrop","classNames","setProp","date","Date","d","getDate","m","getMonth","y","getFullYear","token","localStorage","getItem","userEmail","extendedProps","startStr","format","endStr","test","userID","post","then","response","fire","position","icon","showConfirmButton","timer","updateCalendarEvents","catch","error","detail","$router","push","eventResize","drop","e","add","JSON","parse","components","methods","getData","events","console","log","formatDate","monthNames","month","day","year","length","join","formatDate22","window","innerWidth","handleSubmit","$touch","$invalid","calendarApi","$refs","fullCalendar","getApi","addEvent","successmsg","hideModal","editSubmit","deleteEvent","remove","info","_def","publicId","eventID","className","closeModal","confirm","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","sortEvents","sort","a","b","createEvent","document","getElementById","createButton","status","reload","mounted"],"sourceRoot":"","sources":["C:\\wamp64\\www\\crm\\frontend\\src\\components\\appoinmentCalendar.vue"],"sourcesContent":["<script>\r\nimport Swal from \"sweetalert2\";\r\nimport \"@fullcalendar/core/vdom\";\r\nimport { SimpleBar } from \"simplebar-vue3\";\r\nimport { CalendarIcon } from \"@zhuowenli/vue-feather-icons\";\r\n\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\r\n// import interactionPlugin, { Draggable } from \"@fullcalendar/interaction\";\r\nimport bootstrapPlugin from \"@fullcalendar/bootstrap\";\r\nimport listPlugin from \"@fullcalendar/list\";\r\n\r\nimport FullCalendar from \"@fullcalendar/vue3\";\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\n\r\nimport { required, helpers } from \"@vuelidate/validators\";\r\nimport useVuelidate from \"@vuelidate/core\";\r\n\r\n// import { INITIAL_EVENTS } from \"./calendar\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment/moment\";\r\n// import moment from \"moment\";\r\n\r\nexport default {\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  validations: {\r\n    event: {\r\n      title: {\r\n        required: helpers.withMessage(\"Title is required\", required),\r\n      },\r\n      category: {\r\n        required: helpers.withMessage(\"Category is required\", required),\r\n      },\r\n    },\r\n  },\r\n  page: {\r\n    title: \"Calendar\",\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Calendar\",\r\n      items: [\r\n        {\r\n          text: \"Apps\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Calendar\",\r\n          active: true,\r\n        },\r\n      ],\r\n      categories: [\r\n        {\r\n          name: 'Danger',\r\n          value: 'bg-danger'\r\n        },\r\n        {\r\n          name: 'Success',\r\n          value: 'bg-success'\r\n        },\r\n        {\r\n          name: 'Primary',\r\n          value: 'bg-primary'\r\n        },\r\n        {\r\n          name: 'Info',\r\n          value: 'bg-info'\r\n        },\r\n        {\r\n          name: 'Dark',\r\n          value: 'bg-dark'\r\n        },\r\n        {\r\n          name: 'Warning',\r\n          value: 'bg-warning'\r\n        },\r\n      ],\r\n      currentEvents: [],\r\n      showModal: false,\r\n      eventModal: false,\r\n      submitted: false,\r\n      submit: false,\r\n      newEventData: {},\r\n      edit: {},\r\n      deleteId: {},\r\n      errors: [],\r\n      event: {\r\n        id: \"\",\r\n        title: \"\",\r\n        description: \"\",\r\n        category: \"\",\r\n        start: null,\r\n        end: null,\r\n        location: \"\",\r\n      },\r\n      editevent: {\r\n        editID: 0,\r\n        editTitle: \"\",\r\n        editcategory: \"\",\r\n        editDescription: \"\",\r\n        editStart: \"\",\r\n        editEnd: \"\",\r\n        editLocation: \"\",\r\n      },\r\n      description: \"\",\r\n      dateTimeConfig: {\r\n        enableTime: true,\r\n        dateFormat: \"F j, Y H:i K\"\r\n      },\r\n      toDate:  null,\r\n      fromDate: null,\r\n      calendarOptions: {\r\n        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        droppable: true,\r\n        navLinks: true,\r\n        plugins: [\r\n          dayGridPlugin,\r\n          timeGridPlugin,\r\n          // interactionPlugin,\r\n          bootstrapPlugin,\r\n          listPlugin,\r\n        ],\r\n        themeSystem: \"bootstrap\",\r\n        headerToolbar: {\r\n          left: \"prev,next today\",\r\n          center: \"title\",\r\n          right: \"dayGridMonth,timeGridWeek,timeGridDay,listMonth\",\r\n        },\r\n        windowResize: () => {\r\n          this.getInitialView();\r\n        },\r\n        initialView: this.getInitialView(),\r\n        editable: true,\r\n        selectable: true,\r\n        selectMirror: true,\r\n        dayMaxEvents: true,\r\n        weekends: true,\r\n        dateClick: this.dateClicked,\r\n        eventClick: this.editEvent,\r\n        eventsSet: this.handleEvents,\r\n        eventDrop: async function (event) {\r\n          this.submit = true;\r\n          const editTitle = event.event.title;\r\n          const editcategory = event.event.classNames[0];\r\n          // console.log(editcategory)\r\n\r\n          this.edit = event.event;\r\n          this.edit.setProp(\"title\", editTitle);\r\n          this.edit.setProp(\"classNames\", editcategory);\r\n\r\n          var date = new Date();\r\n          var d = date.getDate();\r\n          var m = date.getMonth();\r\n          var y = date.getFullYear();\r\n          new Date(y, m, d + 24, 16, 0)\r\n\r\n          const data = {\r\n            token: localStorage.getItem('jwt'),\r\n            userEmail: localStorage.getItem('email'),\r\n            event: {\r\n              editID: event.event.id,\r\n              editTitle: editTitle,\r\n              editcategory: event.event.classNames[0],\r\n              editDescription: event.event.extendedProps.description,\r\n              editStart: moment(event.event.startStr).format('MMMM D, YYYY h:mm A'),\r\n              editEnd: moment(event.event.endStr).format('MMMM D, YYYY h:mm A'),\r\n              editLocation: event.event.extendedProps.location,\r\n            },\r\n            edit: this.edit,\r\n            test: new Date(y, m, d + 24, 16, 0),\r\n            userID: localStorage.getItem('id')\r\n          }\r\n\r\n          // console.log(data)\r\n\r\n          await axios\r\n              .post('/api/updateEvent', data)\r\n              .then(response => {\r\n\r\n                if (response === 'True') {\r\n                  Swal.fire({\r\n                    position: \"top-end\",\r\n                    icon: \"success\",\r\n                    title: \"Event updated!\",\r\n                    showConfirmButton: false,\r\n                    timer: 2000,\r\n                  });\r\n                  this.updateCalendarEvents()\r\n                }\r\n              })\r\n              .catch(error => {\r\n                if (error.response) {\r\n\r\n                  if (error.response.data.detail === 'Your session is expired!') {\r\n                    this.$router.push('logout')\r\n                  }\r\n\r\n                  Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n                }\r\n              })\r\n          await Swal.fire({\r\n            position: \"center\",\r\n            icon: \"success\",\r\n            title: \"Event has been updated!\",\r\n            showConfirmButton: false,\r\n            timer: 1000,\r\n          });\r\n          this.eventModal = false;\r\n        },\r\n        eventResize: async function (event) {\r\n          // console.log(event)\r\n          this.submit = true;\r\n          const editTitle = event.event.title;\r\n          const editcategory = event.event.classNames[0];\r\n\r\n          this.edit = event.event;\r\n          this.edit.setProp(\"title\", editTitle);\r\n          this.edit.setProp(\"classNames\", editcategory);\r\n\r\n          var date = new Date();\r\n          var d = date.getDate();\r\n          var m = date.getMonth();\r\n          var y = date.getFullYear();\r\n          new Date(y, m, d + 24, 16, 0)\r\n\r\n          const data = {\r\n            token: localStorage.getItem('jwt'),\r\n            userEmail: localStorage.getItem('email'),\r\n            event: {\r\n              editID: event.event.id,\r\n              editTitle: editTitle,\r\n              editcategory: event.event.classNames[0],\r\n              editDescription: event.event.extendedProps.description,\r\n              editStart: moment(event.event.startStr).format('MMMM D, YYYY h:mm A'),\r\n              editEnd: moment(event.event.endStr).format('MMMM D, YYYY h:mm A'),\r\n              editLocation: event.event.extendedProps.location\r\n            },\r\n            edit: this.edit,\r\n            test: new Date(y, m, d + 24, 16, 0),\r\n            userID: localStorage.getItem('id')\r\n          }\r\n\r\n          await axios\r\n              .post('/api/updateEvent', data)\r\n              .then(response => {\r\n\r\n                if (response === 'True') {\r\n                  Swal.fire({\r\n                    position: \"top-end\",\r\n                    icon: \"success\",\r\n                    title: \"Event updated!\",\r\n                    showConfirmButton: false,\r\n                    timer: 1000,\r\n                  });\r\n                  this.updateCalendarEvents()\r\n                }\r\n              })\r\n              .catch(error => {\r\n                if (error.response) {\r\n\r\n                  if (error.response.data.detail === 'Your session is expired!') {\r\n                    this.$router.push('logout')\r\n                  }\r\n\r\n                  Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n                }\r\n              })\r\n          await Swal.fire({\r\n            position: \"center\",\r\n            icon: \"success\",\r\n            title: \"Event has been updated!\",\r\n            showConfirmButton: false,\r\n            timer: 1000,\r\n          });\r\n          this.eventModal = false;\r\n        },\r\n        drop: function(e){\r\n\r\n          let start = moment(e.date).add(1, 'days').format('MMMM D, YYYY h:mm A');\r\n          let end = moment(start).add(1, 'hours').format('MMMM D, YYYY h:mm A');\r\n          let event = JSON.parse(localStorage.getItem('creatingEvent'))\r\n\r\n          const editTitle = event.title;\r\n          const editcategory = event.category;\r\n\r\n          this.edit = event;\r\n          this.edit[\"title\"] = editTitle;\r\n          this.edit[\"classNames\"] = editcategory;\r\n\r\n          var date = new Date();\r\n          var d = date.getDate();\r\n          var m = date.getMonth();\r\n          var y = date.getFullYear();\r\n          new Date(y, m, d + 24, 16, 0)\r\n\r\n          const data = {\r\n            token: localStorage.getItem('jwt'),\r\n            userEmail: localStorage.getItem('email'),\r\n            event: {\r\n              editID: event.id,\r\n              editTitle: editTitle,\r\n              editcategory: event.category,\r\n              editDescription: event.description,\r\n              editStart: start,\r\n              editEnd: end,\r\n              editLocation: event.location,\r\n            },\r\n            edit: this.edit,\r\n            test: new Date(y, m, d + 24, 16, 0),\r\n            userID: localStorage.getItem('id')\r\n          }\r\n\r\n          axios\r\n              .post('/api/updateEvent', data)\r\n              .then(response => {\r\n\r\n                if (response === 'True') {\r\n                  Swal.fire({\r\n                    position: \"top-end\",\r\n                    icon: \"success\",\r\n                    title: \"Event updated!\",\r\n                    showConfirmButton: false,\r\n                    timer: 2000,\r\n                  });\r\n                }\r\n              })\r\n              .catch(error => {\r\n                if (error.response) {\r\n\r\n                  if (error.response.data.detail === 'Your session is expired!') {\r\n                    this.$router.push('logout')\r\n                  }\r\n\r\n                  Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n                }\r\n              })\r\n          this.eventModal = false;\r\n\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    FullCalendar,\r\n    SimpleBar,\r\n    CalendarIcon,\r\n    flatPickr,\r\n  },\r\n  methods: {\r\n\r\n    async getData() {\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n      }\r\n\r\n      await axios\r\n          .post('/api/getAgentAppointments', data)\r\n          .then(response => {\r\n            this.calendarOptions.events = response.data;\r\n            console.log(response.data)\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    formatDate(date) {\r\n      var monthNames = [\r\n        \"January\",\r\n        \"February\",\r\n        \"March\",\r\n        \"April\",\r\n        \"May\",\r\n        \"June\",\r\n        \"July\",\r\n        \"August\",\r\n        \"September\",\r\n        \"October\",\r\n        \"November\",\r\n        \"December\",\r\n      ];\r\n      var d = new Date(date),\r\n          month = \"\" + monthNames[d.getMonth()],\r\n          day = \"\" + d.getDate(),\r\n          year = d.getFullYear();\r\n      if (month.length < 2) month = \"0\" + month;\r\n      if (day.length < 2) day = \"0\" + day;\r\n      return [day + \" \" + month, year].join(\",\");\r\n    },\r\n    formatDate22: function (date, format) {\r\n      date = moment(date).format(format)\r\n      return date;\r\n    },\r\n    getInitialView() {\r\n      if (window.innerWidth >= 768 && window.innerWidth < 1200) {\r\n        return \"timeGridWeek\";\r\n      } else if (window.innerWidth <= 768) {\r\n        return \"listMonth\";\r\n      } else {\r\n        return \"dayGridMonth\";\r\n      }\r\n    },\r\n    /**\r\n     * Modal form submit\r\n     */\r\n    // eslint-disable-next-line no-unused-vars\r\n    async handleSubmit(e) {\r\n      this.submitted = true;\r\n\r\n      // stop here if form is invalid\r\n      this.v$.$touch();\r\n      if (this.v$.$invalid) {\r\n        return;\r\n      } else {\r\n        const title = this.event.title;\r\n        const category = this.event.category;\r\n        let calendarApi = this.$refs.fullCalendar.getApi();\r\n\r\n        // console.log(calendarApi);\r\n\r\n        // const data = {\r\n        //   token: localStorage.getItem('jwt'),\r\n        //   userEmail: localStorage.getItem('email'),\r\n        //   userID: localStorage.getItem('id'),\r\n        //   event: {\r\n        //     title: eventEl.innerText,\r\n        //     start: new Date(),\r\n        //     className: eventEl.getAttribute(\"data-class\"),\r\n        //   }\r\n        // }\r\n        //\r\n        // await axios\r\n        //     .post('/api/createEvent', data)\r\n        //     .then(response => {\r\n        //       if (response){\r\n        //         Swal.fire({\r\n        //           position: \"top-end\",\r\n        //           icon: \"success\",\r\n        //           title: \"Event created!\",\r\n        //           showConfirmButton: false,\r\n        //           timer: 1000,\r\n        //         });\r\n        //         this.updateCalendarEvents()\r\n        //       }\r\n        //     })\r\n        //     .catch(error => {\r\n        //       if (error.response) {\r\n        //\r\n        //         if(error.response.data.detail === 'Your session is expired!'){\r\n        //           this.$router.push('logout')\r\n        //         }\r\n        //\r\n        //         Swal.fire(\"Oops!\", \"Calendar Events couldn't be saved, please contact your SysAdmin.\", \"error\")\r\n        //       }\r\n        //     })\r\n\r\n        // return {\r\n        //   title: eventEl.innerText,\r\n        //   start: new Date(),\r\n        //   className: eventEl.getAttribute(\"data-class\"),\r\n        // };\r\n\r\n        this.currentEvents = calendarApi.addEvent({\r\n          id: this.newEventData.length + 1,\r\n          title,\r\n          start: this.toDate,\r\n          end: this.fromDate,\r\n          classNames: [category],\r\n        });\r\n\r\n        this.successmsg();\r\n        this.showModal = false;\r\n        this.newEventData = {};\r\n      }\r\n      this.submitted = false;\r\n      this.event = {};\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    hideModal(e) {\r\n      this.submitted = false;\r\n      this.showModal = false;\r\n      this.event = {};\r\n    },\r\n    /**\r\n     * Edit event modal submit\r\n     */  // eslint-disable-next-line no-unused-vars\r\n    async editSubmit(e) {\r\n      this.submit = true;\r\n      const editTitle = this.editevent.editTitle;\r\n      const editcategory = this.editevent.editcategory;\r\n\r\n      this.edit.setProp(\"title\", editTitle);\r\n      this.edit.setProp(\"classNames\", editcategory);\r\n\r\n      var date = new Date();\r\n      var d = date.getDate();\r\n      var m = date.getMonth();\r\n      var y = date.getFullYear();\r\n      new Date(y, m, d + 24, 16, 0)\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        event: this.editevent,\r\n        edit: this.edit,\r\n        test: new Date(y, m, d + 24, 16, 0),\r\n        userID: localStorage.getItem('id')\r\n      }\r\n\r\n      await axios\r\n          .post('/api/updateEvent', data)\r\n          .then(response => {\r\n            this.updateCalendarEvents()\r\n            if(response === 'True'){\r\n              Swal.fire({\r\n                position: \"top-end\",\r\n                icon: \"success\",\r\n                title: \"Event updated!\",\r\n                showConfirmButton: false,\r\n                timer: 1000,\r\n              });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n      this.successmsg();\r\n      this.eventModal = false;\r\n    },\r\n    /**\r\n     * Delete event\r\n     */\r\n    deleteEvent() {\r\n      this.edit.remove();\r\n      this.eventModal = false;\r\n    },\r\n    /**\r\n     * Click any date to add event\r\n     * Modal open for add event\r\n     */\r\n    dateClicked(info) {\r\n      this.newEventData = info;\r\n      this.showModal = true;\r\n    },\r\n    /**\r\n     * Modal open for edit event\r\n     */\r\n    editEvent(info) {\r\n      this.edit = info.event;\r\n      this.editevent.editID = this.edit._def.publicId\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        eventID: this.editevent.editID,\r\n        userID: localStorage.getItem('id')\r\n      }\r\n\r\n      axios.post('/api/getEventByid', data)\r\n          .then(response => {\r\n            let data = response.data[0]\r\n            this.editevent.editTitle = data.title;\r\n            this.editevent.editDescription = data.description;\r\n            this.editevent.editLocation = data.location;\r\n            this.editevent.editcategory = data.className;\r\n            this.editevent.editStart = moment(data.start).format('MMMM D, YYYY h:mm A');\r\n            this.editevent.editEnd = moment(data.end).format('MMMM D, YYYY h:mm A');\r\n            // console.log(this.editevent.editStart.toLocaleString('en-US', {\r\n            //   timeZone: 'America/New_York',\r\n            // }))\r\n            // this.editevent.editStart = this.edit._instance.range.start;\r\n            // this.editevent.editEnd = this.edit._instance.range.end;\r\n            this.eventModal = true;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if (error.response.data.detail === 'Your session is expired!') {\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be updated, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    closeModal() {\r\n      this.eventModal = false;\r\n    },\r\n    confirm() {\r\n      Swal.fire({\r\n        title: \"Are you sure?\",\r\n        text: \"You won't be able to delete this!\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        confirmButtonColor: \"#34c38f\",\r\n        cancelButtonColor: \"#f46a6a\",\r\n        confirmButtonText: \"Yes, delete it!\",\r\n      }).then((result) => {\r\n        if (result.value) {\r\n          this.deleteEvent();\r\n          Swal.fire(\"Deleted!\", \"Event has been deleted.\", \"success\");\r\n        }\r\n      });\r\n    },\r\n    async updateCalendarEvents(){\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n      }\r\n\r\n      await axios\r\n          .post('/api/getAgentAppointments', data)\r\n          .then(response => {\r\n            this.calendarOptions.events = response.data;\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Calendar Events couldn't be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    },\r\n    /**\r\n     * Show list of events\r\n     */\r\n    handleEvents(events) {\r\n      this.currentEvents = events;\r\n    },\r\n    /**\r\n     * Show successfull Save Dialog\r\n     */\r\n    successmsg() {\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"success\",\r\n        title: \"Event has been saved!\",\r\n        showConfirmButton: false,\r\n        timer: 1000,\r\n      });\r\n    },\r\n    sortEvents(events){\r\n      events.sort((a, b) => {\r\n        return new Date(a.start) - new Date(b.start); // descending\r\n      })\r\n    },\r\n\r\n    createEvent(){\r\n\r\n      this.errors = []\r\n\r\n      if (!this.event.title) {\r\n        this.errors.push('Event tittle is required.');\r\n      }\r\n\r\n      if (!this.event.description) {\r\n        this.errors.push('Event Description is required.');\r\n      }\r\n\r\n      if (!this.event.description) {\r\n        this.errors.push('Event Description is required.');\r\n      }\r\n\r\n      if (!document.getElementById('createCategory').value) {\r\n        this.errors.push('Event Category is required.');\r\n      }\r\n\r\n      this.event.category = document.getElementById('createCategory').value\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n        event: {\r\n          title:  this.event.title,\r\n          start: this.event.start,\r\n          description: this.event.description,\r\n          end: this.event.end,\r\n          className: this.event.category,\r\n          createButton: 1\r\n        }\r\n      }\r\n\r\n      axios.post('/api/createEvent', data).then(response => {\r\n        if (response.status === 200){\r\n\r\n          Swal.fire({\r\n            position: \"top-end\",\r\n            icon: \"success\",\r\n            title: \"Event created!\",\r\n            showConfirmButton: false,\r\n            timer: 1000,\r\n          });\r\n          location.reload();\r\n        }\r\n      }).catch(error => {\r\n        if (error.response) {\r\n          if(error.response.data.detail === 'Your session is expired!'){\r\n            this.$router.push('logout')\r\n          }\r\n          Swal.fire(\"Oops!\", \"Calendar Events couldn't be saved, please contact your SysAdmin.\", \"error\")\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async mounted() {\r\n\r\n    const data = {\r\n      token: localStorage.getItem('jwt'),\r\n      userEmail: localStorage.getItem('email'),\r\n      userID: localStorage.getItem('id'),\r\n    }\r\n\r\n    await axios\r\n        .post('/api/getAgentAppointments', data)\r\n        .then(response => {\r\n          this.calendarOptions.events = response.data;\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n            Swal.fire(\"Oops!\", \"Calendar Events couldn't be loaded, please contact your SysAdmin.\", \"error\")\r\n          }\r\n        })\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.text-black{\r\n  color: black;\r\n}\r\n</style>\r\n<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-3\">\r\n          <div>\r\n            <h5 class=\"mb-1\">{{ $t(\"t-upcoming-events\") }}</h5>\r\n            <p class=\"text-muted\">Don't miss scheduled events</p>\r\n            <SimpleBar\r\n                class=\"upcoming-events pe-2 me-n1 mb-3\"\r\n                data-simplebar=\"init\"\r\n                style=\"height: 600px\"\r\n            >\r\n              <div\r\n                  class=\"card mb-3\"\r\n                  v-for=\"event in currentEvents\"\r\n                  :key=\"event.id\"\r\n              >\r\n                <div class=\"card-body\">\r\n                  <div class=\"d-flex mb-3\">\r\n                    <div class=\"flex-grow-1\">\r\n                      <i\r\n                          :class=\"`mdi mdi-checkbox-blank-circle me-2 ${event.classNames[0]} `\"\r\n                      ></i\r\n                      ><span class=\"fw-medium\">{{\r\n                        this.formatDate(event.start)\r\n                      }}</span>\r\n                    </div>\r\n                    <div class=\"flex-shrink-0\">\r\n                      <small class=\"badge badge-soft-primary ms-auto\"></small>\r\n                    </div>\r\n                  </div>\r\n                  <h6 class=\"card-title fs-16\">{{ event.title }}</h6>\r\n                  <p class=\"text-muted text-truncate-two-lines mb-0\">\r\n                    {{ event.description }}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </SimpleBar>\r\n          </div>\r\n          <div class=\"card\">\r\n            <div class=\"card-body bg-soft-info\">\r\n              <div class=\"d-flex\">\r\n                <div class=\"flex-shrink-0\">\r\n                  <CalendarIcon\r\n                      class=\"text-info icon-dual-info\"\r\n                  ></CalendarIcon>\r\n                </div>\r\n                <div class=\"flex-grow-1 ms-3\">\r\n                  <h6 class=\"fs-15\">Welcome to your Calendar!</h6>\r\n                  <p class=\"text-muted mb-0\">\r\n                    Event that applications book will appear here. Click on an\r\n                    event to see the details and manage applicants event.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--end card-->\r\n        </div>\r\n        <div class=\"col-xl-9\">\r\n          <div class=\"card card-h-100\">\r\n            <div class=\"card-body\">\r\n              <FullCalendar ref=\"fullCalendar\" :options=\"calendarOptions\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div style=\"clear: both\"></div>\r\n    </div>\r\n  </div>\r\n  <b-modal\r\n      v-model=\"showModal\"\r\n      title=\"Add New Event\"\r\n      title-class=\"text-black font-18\"\r\n      body-class=\"p-3\"\r\n      hide-footer>\r\n    <form @submit.prevent=\"handleSubmit\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"name\">Title</label>\r\n            <input\r\n                id=\"name\"\r\n                v-model=\"event.title\"\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Insert Event name\"\r\n                :class=\"{ 'is-invalid': submitted && v$.event.title.$error }\"\r\n            />\r\n            <div\r\n                v-if=\"submitted && v$.event.title.$error\"\r\n                class=\"invalid-feedback\">\r\n              <span v-if=\"v$.event.title.required.$message\">{{\r\n                  v$.event.title.required.$message\r\n                }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <label for=\"filterFromDate\" class=\"form-label\"> Start On </label>\r\n          <flat-pickr\r\n              v-model=\"event.start\"\r\n              :config=\"dateTimeConfig\"\r\n              class=\"form-control\"\r\n          ></flat-pickr>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <label for=\"filterToDate\" class=\"form-label\"> End On</label>\r\n          <flat-pickr\r\n              v-model=\"event.end\"\r\n              :config=\"dateTimeConfig\"\r\n              class=\"form-control\"\r\n          ></flat-pickr>\r\n        </div>\r\n        <div class=\"col-12\" style=\"margin-top: 5px;\">\r\n          <label for=\"eventDescription\" class=\"form-label\">Description</label>\r\n          <textarea class=\"form-control\" id=\"eventDescription\" rows=\"3\" v-model=\"event.description\"></textarea>\r\n        </div>\r\n        <div class=\"col-12\" style=\"margin-top: 5px;\">\r\n          <div class=\"mb-3\">\r\n            <label class=\"control-label\">Category</label>\r\n            <select\r\n                v-model=\"event.category\"\r\n                class=\"form-control\"\r\n                name=\"category\"\r\n                id=\"createCategory\"\r\n            >\r\n              <option\r\n                  v-for=\"option in categories\"\r\n                  :key=\"option.backgroundColor\"\r\n                  :value=\"`${option.value}`\"\r\n              >\r\n                {{ option.name }}\r\n              </option>\r\n            </select>\r\n            <div\r\n                v-if=\"submitted && v$.event.category.$error\"\r\n                class=\"invalid-feedback\"\r\n            >\r\n              <span v-if=\"v$.event.category.required.$message\">{{\r\n                  v$.event.category.required.$message\r\n                }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"text-end pt-5 mt-3\">\r\n        <b-button variant=\"light\" @click=\"hideModal\">Close</b-button>\r\n        <b-button type=\"submit\" variant=\"success\" class=\"ms-1\" @click=\"createEvent\">Create event</b-button>\r\n      </div>\r\n    </form>\r\n  </b-modal>\r\n\r\n<!-- Edit Modal -->\r\n<!--  <b-modal-->\r\n<!--      v-model=\"eventModal\"-->\r\n<!--      title=\"Edit Event\"-->\r\n<!--      title-class=\"text-black font-18\"-->\r\n<!--      hide-footer-->\r\n<!--      body-class=\"p-3\"-->\r\n<!--  >-->\r\n<!--    <form @submit.prevent=\"editSubmit\">-->\r\n<!--      <div class=\"row\">-->\r\n<!--        <div class=\"col-12\">-->\r\n<!--          <div class=\"mb-3\">-->\r\n<!--            <label for=\"name\">Event Name</label>-->\r\n<!--            <input-->\r\n<!--                id=\"name1\"-->\r\n<!--                v-model=\"editevent.editTitle\"-->\r\n<!--                type=\"text\"-->\r\n<!--                class=\"form-control\"-->\r\n<!--                placeholder=\"Insert Event name\"-->\r\n<!--            />-->\r\n<!--          </div>-->\r\n<!--        </div>-->\r\n<!--        <div class=\"col-6\">-->\r\n<!--          <label for=\"filterFromDate\" class=\"form-label\"> Start On </label>-->\r\n<!--          <flat-pickr-->\r\n<!--              v-model=\"editevent.editStart\"-->\r\n<!--              :config=\"dateTimeConfig\"-->\r\n<!--              class=\"form-control\"-->\r\n<!--              data-provider=\"timepickr\"-->\r\n<!--              data-time-hrs=\"true\"-->\r\n<!--          ></flat-pickr>-->\r\n<!--        </div>-->\r\n<!--        <div class=\"col-6\">-->\r\n<!--          <label for=\"filterToDate\" class=\"form-label\"> End On</label>-->\r\n<!--          <flat-pickr-->\r\n<!--              v-model=\"editevent.editEnd\"-->\r\n<!--              :config=\"dateTimeConfig\"-->\r\n<!--              class=\"form-control\"-->\r\n<!--              data-provider=\"timepickr\"-->\r\n<!--              data-time-hrs=\"true\"-->\r\n<!--          ></flat-pickr>-->\r\n<!--        </div>-->\r\n<!--        <div class=\"col-12\" style=\"margin-top: 5px;\">-->\r\n<!--          <label for=\"eventDescription\" class=\"form-label\">Description</label>-->\r\n<!--          <textarea class=\"form-control\" id=\"eventDescription\" rows=\"3\" v-model=\"editevent.editDescription\"></textarea>-->\r\n<!--        </div>-->\r\n<!--        <div class=\"col-12\" style=\"margin-top: 5px;\">-->\r\n<!--          <div class=\"mb-3\">-->\r\n<!--            <label class=\"control-label\">Category</label>-->\r\n<!--            <select-->\r\n<!--                v-model=\"editevent.editcategory\"-->\r\n<!--                class=\"form-control\"-->\r\n<!--                name=\"category\"-->\r\n<!--            >-->\r\n<!--              <option-->\r\n<!--                  v-for=\"option in categories\"-->\r\n<!--                  :key=\"option.backgroundColor\"-->\r\n<!--                  :value=\"`${option.value}`\"-->\r\n<!--              >-->\r\n<!--                {{ option.name }}-->\r\n<!--              </option>-->\r\n<!--            </select>-->\r\n<!--          </div>-->\r\n<!--        </div>-->\r\n<!--      </div>-->\r\n<!--      <div class=\"text-end p-3\">-->\r\n<!--        <b-button variant=\"light\" @click=\"closeModal\">Close</b-button>-->\r\n<!--        <b-button class=\"ms-1\" variant=\"danger\" @click=\"confirm\"-->\r\n<!--        >Delete</b-button-->\r\n<!--        >-->\r\n<!--        <b-button class=\"ms-1\" variant=\"success\" @click=\"editSubmit\"-->\r\n<!--        >Save</b-button-->\r\n<!--        >-->\r\n<!--      </div>-->\r\n<!--    </form>-->\r\n<!--  </b-modal>-->\r\n</template>\r\n"]}]}