{"remainingRequest":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\wamp64\\www\\crm\\frontend\\src\\views\\communication\\scheduleMessages.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\wamp64\\www\\crm\\frontend\\src\\views\\communication\\scheduleMessages.vue","mtime":1696608354721},{"path":"C:\\wamp64\\www\\crm\\frontend\\babel.config.js","mtime":1645939880000},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1668443304941},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1652458135842},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668443304858},{"path":"C:\\wamp64\\www\\crm\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1668443313146}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L3dhbXA2NC93d3cvY3JtL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgZmxhdFBpY2tyIGZyb20gInZ1ZS1mbGF0cGlja3ItY29tcG9uZW50IjsKaW1wb3J0ICJmbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuY3NzIjsKaW1wb3J0IExheW91dCBmcm9tICIuLi8uLi9sYXlvdXRzL21haW4udnVlIjsKaW1wb3J0IFBhZ2VIZWFkZXIgZnJvbSAiQC9jb21wb25lbnRzL3BhZ2UtaGVhZGVyIjsKaW1wb3J0IGFwcENvbmZpZyBmcm9tICIuLi8uLi8uLi9hcHAuY29uZmlnIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBQYXBhIGZyb20gInBhcGFwYXJzZSI7CmltcG9ydCBqd3RfZGVjb2RlIGZyb20gImp3dC1kZWNvZGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgcGFnZTogewogICAgdGl0bGU6ICJBZ2VudHMgTGlzdCBjYXJkcyIsCiAgICBtZXRhOiBbewogICAgICBuYW1lOiAiZGVzY3JpcHRpb24iLAogICAgICBjb250ZW50OiBhcHBDb25maWcuZGVzY3JpcHRpb24KICAgIH1dCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMYXlvdXQ6IExheW91dCwKICAgIFBhZ2VIZWFkZXI6IFBhZ2VIZWFkZXIsCiAgICBmbGF0UGlja3I6IGZsYXRQaWNrcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAiQWdlbnRzIHwgU2NoZWR1bGVkIE1lc3NhZ2VzIiwKICAgICAgaXRlbXM6IFt7CiAgICAgICAgdGV4dDogIkFnZW50cyIsCiAgICAgICAgaHJlZjogIi8iCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiQWdlbnQgTGlzdCBjYXJkcyIsCiAgICAgICAgYWN0aXZlOiB0cnVlCiAgICAgIH1dLAogICAgICB0aW1lQ29uZmlnOiB7CiAgICAgICAgZW5hYmxlVGltZTogZmFsc2UsCiAgICAgICAgZGF0ZUZvcm1hdDogImQgTSwgWSIKICAgICAgfSwKICAgICAgZGF0ZVRpbWVDb25maWc6IHsKICAgICAgICBlbmFibGVUaW1lOiB0cnVlLAogICAgICAgIGRhdGVGb3JtYXQ6ICJtLWQteSBIOmkgSyIKICAgICAgfSwKICAgICAgbGlzdDogW10sCiAgICAgIG1lc3NhZ2VMaXN0OiBbXSwKICAgICAgcmVjaWVwaWVudExpc3Q6IFtdLAogICAgICBjb250ZW50OiBbXSwKICAgICAgbnVtYmVyT2ZSZWNpcGVudHM6IDAsCiAgICAgIGh1bWFuZnJpZW5kbHlDb25maWc6IHsKICAgICAgICBkYXRlRm9ybWF0OiAiRiBqLCBZIgogICAgICB9LAogICAgICBzY2hlZHVsZU1lc3NhZ2VDb250ZW50OiAnJywKICAgICAgc2NoZWR1bGVIb3VyOiAnMTQ6MDAnLAogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiA1MCwKICAgICAgcGFnZXM6IFtdLAogICAgICB1cGxvYWRMYW5ndWFnZTogJzAnLAogICAgICBkYXRhOiB7CiAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSwKICAgICAgICBzZWFyY2hWYWx1ZXM6IHsKICAgICAgICAgIGlzQWN0aXZlOiAxLAogICAgICAgICAgbm90ZVNlYXJjaDogJycsCiAgICAgICAgICBrZXl3b3JkOiAnJywKICAgICAgICAgIGxpY2Vuc2VkOiAxLAogICAgICAgICAgbGFuZ3VhZ2U6IDMsCiAgICAgICAgICBvcmRlckJ5OiAnQVNDJywKICAgICAgICAgIHNvcnRCeTogJ25hbWUnLAogICAgICAgICAgZGVwYXJ0bWVudDogJzAnLAogICAgICAgICAgZGF0ZVJhbmdlOiAwLAogICAgICAgICAgc3RhdHVzOiAwLAogICAgICAgICAgdHlwZTogMCwKICAgICAgICAgIHRvRGF0ZTogbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLXVzJywgewogICAgICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgICAgIG1vbnRoOiAibG9uZyIsCiAgICAgICAgICAgIGRheTogIm51bWVyaWMiCiAgICAgICAgICB9KSwKICAgICAgICAgIGZyb21EYXRlOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEZ1bGxZZWFyKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIDEpKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLXVzJywgewogICAgICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgICAgIG1vbnRoOiAibG9uZyIsCiAgICAgICAgICAgIGRheTogIm51bWVyaWMiCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSwKICAgICAgc3RhdHVzTGlzdDoge30sCiAgICAgIHBhcnNlZDogZmFsc2UsCiAgICAgIGZpbmRBZ2VudHM6ICIxIiwKICAgICAgc3BlY3RlZENvbHVtbnM6IFsiRnVsbCBuYW1lIChvcHRpb25hbCkiLCAiRmlyc3QgTmFtZSIsICJMYXN0IE5hbWUiLCAiUGhvbmUiLCAiRW1haWwiXSwKICAgICAgZGF0ZTogJycsCiAgICAgIHRvdGFsQ2hhcmFjdGVyczogMCwKICAgICAgYXZhaWxhYmxlTWVzc2FnZXM6IDAKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgY29udGFjdHNMaXN0OiBmdW5jdGlvbiBjb250YWN0c0xpc3QoKSB7CiAgICAgIHRoaXMuc2V0UGFnZXMoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldFBhZ2VzKCk7CiAgfSwKICBjb21wdXRlZDogewogICAgZGlzcGxheWVkUG9zdHM6IGZ1bmN0aW9uIGRpc3BsYXllZFBvc3RzKCkgewogICAgICByZXR1cm4gdGhpcy5wYWdpbmF0ZSh0aGlzLmxpc3QpOwogICAgfSwKICAgIHJlc3VsdFF1ZXJ5OiBmdW5jdGlvbiByZXN1bHRRdWVyeSgpIHsKICAgICAgaWYgKHRoaXMuZGF0YS5zZWFyY2hWYWx1ZXMua2V5d29yZC5sZW5ndGggPj0gMykgewogICAgICAgIHZhciBzZWFyY2ggPSB0aGlzLmRhdGEuc2VhcmNoVmFsdWVzLmtleXdvcmQudG9Mb3dlckNhc2UoKTsKICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5ZWRQb3N0cy5maWx0ZXIoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmFkZHJlc3MudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEuYWdlbnROdW1iZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEuY2l0eS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5waG9uZU51bWJlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgfHwgZGF0YS5maXJzdE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEubGFzdE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEuZnVsbG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpIHx8IGRhdGEuc3RhdHVzTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheWVkUG9zdHM7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGZvcm1hdERhdGU6IGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSwgZm9ybWF0KSB7CiAgICAgIGRhdGUgPSBtb21lbnQoZGF0ZSkuZm9ybWF0KGZvcm1hdCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfSwKICAgIHNldFBhZ2VzOiBmdW5jdGlvbiBzZXRQYWdlcygpIHsKICAgICAgdmFyIG51bWJlck9mUGFnZXMgPSBNYXRoLmNlaWwodGhpcy5saXN0Lmxlbmd0aCAvIHRoaXMucGVyUGFnZSk7CiAgICAgIHRoaXMucGFnZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPD0gbnVtYmVyT2ZQYWdlczsgaW5kZXgrKykgewogICAgICAgIHRoaXMucGFnZXMucHVzaChpbmRleCk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdpbmF0ZTogZnVuY3Rpb24gcGFnaW5hdGUoY29udGFjdHNMaXN0KSB7CiAgICAgIHZhciBwYWdlID0gdGhpcy5wYWdlOwogICAgICB2YXIgcGVyUGFnZSA9IHRoaXMucGVyUGFnZTsKICAgICAgdmFyIGZyb20gPSBwYWdlICogcGVyUGFnZSAtIHBlclBhZ2U7CiAgICAgIHZhciB0byA9IHBhZ2UgKiBwZXJQYWdlOwogICAgICByZXR1cm4gY29udGFjdHNMaXN0LnNsaWNlKGZyb20sIHRvKTsKICAgIH0sCiAgICBmb3JtYXRQaG9uZTogZnVuY3Rpb24gZm9ybWF0UGhvbmUocGhvbmUpIHsKICAgICAgdmFyIGZsYWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CgogICAgICAvLyBpZiBmbGFnID09IDEgcHV0IHZhbHVlIGluIHBob25lIEVkaXQKICAgICAgaWYgKHBob25lICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB2YXIgeCA9IHBob25lLnJlcGxhY2UoL1xEL2csICcnKS5tYXRjaCgvKFxkezAsM30pKFxkezAsM30pKFxkezAsNH0pLyk7CiAgICAgICAgcGhvbmUgPSAheFsyXSA/IHhbMV0gOiAnKCcgKyB4WzFdICsgJykgJyArIHhbMl0gKyAoeFszXSA/ICctJyArIHhbM10gOiAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGhvbmUgPSAnJzsKICAgICAgfQoKICAgICAgaWYgKGZsYWcgIT09IDEpIHsKICAgICAgICByZXR1cm4gcGhvbmU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRQaG9uZU51bWJlcicpLnZhbHVlID0gcGhvbmU7CiAgICAgIH0KICAgIH0sCiAgICBhZGRSZWNpcGllbnRzOiBmdW5jdGlvbiBhZGRSZWNpcGllbnRzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgaWRzX2FycmF5LCBpdGVtcywgdXJsLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlkc19hcnJheSA9IFtdOwogICAgICAgICAgICAgICAgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiY2hrX2NoaWxkIik7CiAgICAgICAgICAgICAgICB1cmwgPSAnJzsKICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZSkgewogICAgICAgICAgICAgICAgICBpZiAoZWxlLmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ck5vZGUgPSBlbGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gdHJOb2RlLnF1ZXJ5U2VsZWN0b3IoIi5pZCBhIikuaW5uZXJIVE1MOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIWlkc19hcnJheS5pbmNsdWRlcyhpZCkpIHsKICAgICAgICAgICAgICAgICAgICAgIGlkc19hcnJheS5wdXNoKGlkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghKHR5cGVvZiBpZHNfYXJyYXkgIT09ICJ1bmRlZmluZWQiICYmIGlkc19hcnJheS5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHJlY2lwaWVudHNMaXN0OiBpZHNfYXJyYXkuam9pbigpCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5maW5kQWdlbnRzID09PSAiMSIpIHsKICAgICAgICAgICAgICAgICAgdXJsID0gJy9hcGkvZ2V0VXNlckJ5aWRzJzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHVybCA9ICcvYXBpL2NsaWVudC9nZXRDbGllbnRzQnlpRFMnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB2YXIgYXJyYXkxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZWNpZXBpZW50TGlzdCkpOwogICAgICAgICAgICAgICAgICB2YXIgYXJyYXkyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7CiAgICAgICAgICAgICAgICAgIHZhciBhcnJheTMgPSBhcnJheTEuY29uY2F0KGFycmF5Mik7CiAgICAgICAgICAgICAgICAgIGFycmF5MyA9IGFycmF5My5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgc2VsZikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCA9PT0gc2VsZi5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LklEID09PSB2YWx1ZS5JRCAmJiB0LnBob25lTnVtYmVyID09PSB2YWx1ZS5waG9uZU51bWJlcjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnJlY2llcGllbnRMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcnJheTMpKTsKICAgICAgICAgICAgICAgICAgX3RoaXMubnVtYmVyT2ZSZWNpcGVudHMgPSBfdGhpcy5yZWNpZXBpZW50TGlzdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGUuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICBlbGUuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgZWxlLmNsb3Nlc3QoInRyIikuY2xhc3NMaXN0LnJlbW92ZSgidGFibGUtYWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkRlcGFydG1lbnRzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlLCBzZWxlY3QgYXQgbGVhc3Qgb25lIHJlY2lwaWVudCEiLAogICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWRkUmVjaXBpZW50c0Zyb21GaWxlOiBmdW5jdGlvbiBhZGRSZWNpcGllbnRzRnJvbUZpbGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGxhbmd1YWdlLCBhcnJheTEsIGFycmF5MiwgYXJyYXkzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9IF90aGlzMi51cGxvYWRMYW5ndWFnZTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLmNvbnRlbnQuZGF0YS5sZW5ndGggPiAwICYmIGxhbmd1YWdlICE9PSAnMCcpIHsKICAgICAgICAgICAgICAgICAgYXJyYXkxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczIucmVjaWVwaWVudExpc3QpKTsKICAgICAgICAgICAgICAgICAgYXJyYXkyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczIuY29udGVudC5kYXRhKSk7CiAgICAgICAgICAgICAgICAgIGFycmF5MyA9IFtdOwogICAgICAgICAgICAgICAgICBhcnJheTIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdE5hbWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdE5hbWUgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bJ0ZpcnN0IE5hbWUnXS5sZW5ndGggPiAxICYmIGl0ZW1bJ0xhc3QgTmFtZSddLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZSA9IGl0ZW1bJ0ZpcnN0IE5hbWUnXTsKICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lID0gaXRlbVsnTGFzdCBOYW1lJ107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGxpdEZ1bGxOYW1lID0gaXRlbVsnRnVsbCBuYW1lIChvcHRpb25hbCknXS5zcGxpdCgnJyk7CiAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWUgPSBzcGxpdEZ1bGxOYW1lWzBdOwogICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWUgPSBzcGxpdEZ1bGxOYW1lWzFdOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgYXJyYXkzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgJ0lEJzogMCwKICAgICAgICAgICAgICAgICAgICAgICdkZXBhcnRtZW50TmFtZSc6ICduL2EnLAogICAgICAgICAgICAgICAgICAgICAgJ2VtYWlsJzogaXRlbVsnRW1haWwnXSwKICAgICAgICAgICAgICAgICAgICAgICdmaXJzdE5hbWUnOiBmaXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAnbGFuZ3VhZ2UnOiBsYW5ndWFnZSwKICAgICAgICAgICAgICAgICAgICAgICdsYXN0TmFtZSc6IGxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAgICAgJ3Bob25lTnVtYmVyJzogaXRlbVsnUGhvbmUnXSwKICAgICAgICAgICAgICAgICAgICAgICdzdGF0dXNOYW1lJzogJ24vYScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5yZWNpZXBpZW50TGlzdCA9IGFycmF5MS5jb25jYXQoYXJyYXkzKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLnJlY2llcGllbnRMaXN0KTsKICAgICAgICAgICAgICAgICAgX3RoaXMyLm51bWJlck9mUmVjaXBlbnRzID0gX3RoaXMyLnJlY2llcGllbnRMaXN0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlTGlzdE1vZGFsJykuY2xpY2soKTsgLy8gdGhpcy5vcGVuTW9kYWwoJ2NyZWF0ZU1lc3NhZ2UnKQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIudXBsb2FkTGFuZ3VhZ2UgPT09ICcwJykgewogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiUGxlYXNlLCBzZWxlY3QgdGhlIGxhbmd1YWdlISIsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAiYnRuIGJ0bi1pbmZvIiwKICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIlBsZWFzZSwgdXBsb2FkIGFsbW9zdCBvbmUgcmVjaXBpZW50IGluIHRoZSBsaXN0ISIsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAiYnRuIGJ0bi1pbmZvIiwKICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZW1vdmVSZWNpcGllbnQ6IGZ1bmN0aW9uIHJlbW92ZVJlY2lwaWVudChpbmRleCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiVGhpcyByZWNpcGllbnQgd2lsbCBiZSByZW1vdmVkISIsCiAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjMmNhMjE5IiwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjZTEyZTJlIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgZGVsZXRlIGl0ISIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgX3RoaXMzLnJlY2llcGllbnRMaXN0LnNwbGljZShfdGhpczMucmVjaWVwaWVudExpc3QuaW5kZXhPZihpbmRleCksIDEpOwoKICAgICAgICAgIFN3YWwuZmlyZSgiRGVsZXRlZCEiLCAiUmVjaXBpZW50IGhhcyBiZWVuIGRlbGV0ZWQuIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgIF90aGlzMy5udW1iZXJPZlJlY2lwZW50cyA9IF90aGlzMy5yZWNpZXBpZW50TGlzdC5sZW5ndGg7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzY2hlZHVsZU1lc3NhZ2U6IGZ1bmN0aW9uIHNjaGVkdWxlTWVzc2FnZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgdmFsaWRhdGUsIGVycm9ycywgZGF0YSwgbGlzdCwgaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdmFsaWRhdGUgPSB0cnVlOwogICAgICAgICAgICAgICAgZXJyb3JzID0gW107CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC5zY2hlZHVsZU1lc3NhZ2VDb250ZW50ID09PSAnJyAmJiBfdGhpczQuc2NoZWR1bGVNZXNzYWdlQ29udGVudC5sZW5ndGggPCAxMCkgewogICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgnTWVzc2FnZSBzaG91bGQgYmUgbG9uZ2VyIHRoYW4gMTAgY2hhcmFjdGVycyEnKTsKICAgICAgICAgICAgICAgICAgdmFsaWRhdGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LnNjaGVkdWxlSG91ciA9PT0gJycgJiYgX3RoaXM0LnNjaGVkdWxlSG91ci5sZW5ndGggPCAzKSB7CiAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCdQbGVhc2UsIHNldCB0aGUgc2NoZWR1bGUgaG91ciBmb3IgdGhlIG1lc3NhZ2UhJyk7CiAgICAgICAgICAgICAgICAgIHZhbGlkYXRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC5yZWNpZXBpZW50TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1BsZWFzZSwgYWRkIGFsbW9zdCBvbmUgcmVjaXBpZW50IHRvIHRoZSBsaXN0IScpOwogICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQudG90YWxDaGFyYWN0ZXJzIDwgMCkgewogICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgnWW91ciBtZXNzYWdlIGlzIGxvbmdlciB0aGFuIDE1MCBjaGFyYWN0ZXJzIScpOwogICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQuYXZhaWxhYmxlTWVzc2FnZXMgPD0gMCkgewogICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgnWW91IHJlYWNoZWQgdGhlIGxpbWl0IG9mIGRhaWx5IG1lc3NhZ2VzIScpOwogICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQucmVjaWVwaWVudExpc3QubGVuZ3RoID4gX3RoaXM0LmF2YWlsYWJsZU1lc3NhZ2VzKSB7CiAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCdZb3UgY2FuXCd0IGFkZCBtb3JlIHJlY2lwaWVudHMgdGhhbiB5b3UgbWVzc2FnZSBsaW1pdCEnKTsKICAgICAgICAgICAgICAgICAgdmFsaWRhdGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICByZWNpcGllbnRzOiBfdGhpczQucmVjaWVwaWVudExpc3QsCiAgICAgICAgICAgICAgICAgIGhvdXI6IF90aGlzNC5zY2hlZHVsZUhvdXIsCiAgICAgICAgICAgICAgICAgIGRhdGU6IF90aGlzNC5kYXRlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBfdGhpczQuc2NoZWR1bGVNZXNzYWdlQ29udGVudCwKICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkYXRlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9jb21tL3NhdmVTY2hlZHVsZU1lc3NhZ2UnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2Vtb2RhbCcpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnU3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ01lc3NhZ2Ugc2NoZWR1bGVkIHN1Y2Nlc3NmdWxseSEnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJQbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGxpc3QgPSAnJzsKCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZXJyb3JzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QgKz0gZXJyb3JzW2ldICsgJyBcbic7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxODsKICAgICAgICAgICAgICAgIHJldHVybiBTd2FsLmZpcmUoIiIgKyBsaXN0LCAnJywgJ2luZm8nKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICAvLyB0aGlzLnJlY2llcGllbnRMaXN0ID0gW107CiAgICAgIHRoaXMubnVtYmVyT2ZSZWNpcGVudHMgPSAwOwogICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZUNvbnRlbnQgPSAnJzsKICAgICAgdGhpcy5zY2hlZHVsZUhvdXIgPSAnMTQ6MDAnOwogICAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEZ1bGxZZWFyKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIDEpKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLXVzJywgewogICAgICAgIHllYXI6ICJudW1lcmljIiwKICAgICAgICBtb250aDogImxvbmciLAogICAgICAgIGRheTogIm51bWVyaWMiCiAgICAgIH0pOwogICAgICB0aGlzLmdldFF1b3RhKCk7CiAgICB9LAogICAgdXBkYXRlQWdlbnRMaXN0OiBmdW5jdGlvbiB1cGRhdGVBZ2VudExpc3QoKSB7CiAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzLAogICAgICAgICAgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBzdGF0dXMsIHZhbGlkYXRlLCBlcnJvcnMsIGZpbHRlcktleXdvcmQsIGZpbHRlckxhbmd1YWdlLCBkYXRhLCBsaXN0LCBpOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0dXMgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgX2FyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1swXSA6IDA7CiAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBlcnJvcnMgPSBbXTsKICAgICAgICAgICAgICAgIGZpbHRlcktleXdvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyS2V5d29yZCIpLnZhbHVlOwogICAgICAgICAgICAgICAgX3RoaXM1LmRhdGEuc2VhcmNoVmFsdWVzLnN0YXR1cyA9IHN0YXR1czsKICAgICAgICAgICAgICAgIGZpbHRlckxhbmd1YWdlID0gX3RoaXM1LmRhdGEuc2VhcmNoVmFsdWVzLmxhbmd1YWdlOwoKICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJMYW5ndWFnZSAhPT0gJycgJiYgKGZpbHRlckxhbmd1YWdlID09PSAnMScgfHwgZmlsdGVyTGFuZ3VhZ2UgPT09ICcyJykpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LmRhdGEuc2VhcmNoVmFsdWVzLmxhbmd1YWdlID0gZmlsdGVyTGFuZ3VhZ2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGZpbHRlcktleXdvcmQgIT09ICcnICYmIGZpbHRlcktleXdvcmQubGVuZ3RoID49IDMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LmRhdGEuc2VhcmNoVmFsdWVzLmtleXdvcmQgPSBmaWx0ZXJLZXl3b3JkOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJLZXl3b3JkICE9PSAnJyAmJiBmaWx0ZXJLZXl3b3JkLmxlbmd0aCA8IDMpIHsKICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goJ0tleXdvcmQgc2VhcmNoIHNob3VsZCBoYXZlIDMgb3IgbW9yZSBjaGFyYWN0ZXJzIScpOwogICAgICAgICAgICAgICAgICB2YWxpZGF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHNlYXJjaFZhbHVlczogX3RoaXM1LmRhdGEuc2VhcmNoVmFsdWVzLAogICAgICAgICAgICAgICAgICBpc0FnZW50OiBfdGhpczUuZGF0YS5zZWFyY2hWYWx1ZXMubGljZW5zZWQsCiAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJykKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBheGlvcy5wb3N0KCcvYXBpL2xpc3RBZ2VudHMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczUubGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgIF90aGlzNS5wYWdlID0gMTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNS5zZXRQYWdlcygpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0gLy8gZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lcnJvcnMucHVzaChgJHtwcm9wZXJ0eX06ICR7ZXJyb3IucmVzcG9uc2UuZGF0YVtwcm9wZXJ0eV19YCkKICAgICAgICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczUuZXJyb3JzLnB1c2goJ1NvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uJyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgbGlzdCA9ICcnOwoKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBlcnJvcnMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgbGlzdCArPSBlcnJvcnNbaV0gKyAnIFxuJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgcmV0dXJuIFN3YWwuZmlyZSgiIiArIGxpc3QsICcnLCAnaW5mbycpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcGFyc2VGaWxlOiBmdW5jdGlvbiBwYXJzZUZpbGUoKSB7CiAgICAgIHZhciBhbGxvd2VkRXh0ZW5zaW9ucyA9IC8oXC5jc3YpJC9pOwoKICAgICAgaWYgKGFsbG93ZWRFeHRlbnNpb25zLmV4ZWModGhpcy5maWxlLm5hbWUpKSB7CiAgICAgICAgUGFwYS5wYXJzZSh0aGlzLmZpbGUsIHsKICAgICAgICAgIGhlYWRlcjogdHJ1ZSwKICAgICAgICAgIHNraXBFbXB0eUxpbmVzOiB0cnVlLAogICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChyZXN1bHRzKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmUodGhpcy5zcGVjdGVkQ29sdW1ucywgcmVzdWx0cy5tZXRhLmZpZWxkcykpIHsKICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSByZXN1bHRzOwogICAgICAgICAgICAgIHRoaXMucGFyc2VkID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJPb3BzLCB0aGlzIGZpbGUgaXMgbm90IHdoYXQgd2Ugc3BlY3RlZCEiLAogICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAiYnRuIGJ0bi1pbmZvIiwKICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LmJpbmQodGhpcykKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJGaWxlIGV4dGVuc2lvbiBub3Qgc3VwcG9ydGVkISIsCiAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICJidG4gYnRuLWluZm8iLAogICAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlLAogICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVGaWxlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVGaWxlVXBsb2FkKCkgewogICAgICB0aGlzLmZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdEZpbGUnKS5maWxlc1swXTsKICAgICAgdGhpcy5wYXJzZUZpbGUoKTsKICAgIH0sCiAgICBjb21wYXJlOiBmdW5jdGlvbiBjb21wYXJlKG8xLCBvMikgewogICAgICBmb3IgKHZhciBwIGluIG8xKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwogICAgICAgIGlmIChvMS5oYXNPd25Qcm9wZXJ0eShwKSkgewogICAgICAgICAgaWYgKG8xW3BdICE9PSBvMltwXSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKHZhciBfcCBpbiBvMikgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgICBpZiAobzIuaGFzT3duUHJvcGVydHkoX3ApKSB7CiAgICAgICAgICBpZiAobzFbX3BdICE9PSBvMltfcF0pIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbiBkZWxldGVSZWNvcmQoZWxlKSB7CiAgICAgIGVsZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpOwogICAgfSwKICAgIHVwZGF0ZVJlY2lwaWVudHNMaXN0OiBmdW5jdGlvbiB1cGRhdGVSZWNpcGllbnRzTGlzdCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHt9OwoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNi5maW5kQWdlbnRzID09PSAiMSIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIHNlYXJjaFZhbHVlczogX3RoaXM2LmRhdGEuc2VhcmNoVmFsdWVzLAogICAgICAgICAgICAgICAgICBpc0FnZW50OiAxLAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvbGlzdERlcGFydG1lbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmRlcGFydG1lbnRMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIkRlcGFydG1lbnRzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9saXN0U3RhdHVzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2LnN0YXR1c0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU3RhdHVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9saXN0QWdlbnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2Lmxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICBfdGhpczYucGFnZSA9IDE7CgogICAgICAgICAgICAgICAgICBfdGhpczYuc2V0UGFnZXMoKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsvLyBmb3IgKGNvbnN0IHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVycm9ycy5wdXNoKGAke3Byb3BlcnR5fTogJHtlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XX1gKQogICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2FzIHdyb25nLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLicpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2xpc3RTb3VyY2UnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczYudHlwZUxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJTdGF0dXMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgICBzZWFyY2hWYWx1ZXM6IF90aGlzNi5kYXRhLnNlYXJjaFZhbHVlcywKICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSwKICAgICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICAgICAgICAgICAgaXNQcm9zcGVjdDogMCwKICAgICAgICAgICAgICAgICAgZGVsZXRlZDogMCwKICAgICAgICAgICAgICAgICAgYWdlbnRTZWFyY2g6IFtdCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczYuZmluZEFnZW50cyA9PT0gIjMiKSB7CiAgICAgICAgICAgICAgICAgIGRhdGEuaXNQcm9zcGVjdCA9IDE7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2NsaWVudC9saXN0Q2xpZW50cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5saXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXM2LnBhZ2UgPSAxOwoKICAgICAgICAgICAgICAgICAgX3RoaXM2LnNldFBhZ2VzKCk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnWW91ciBzZXNzaW9uIGlzIGV4cGlyZWQhJykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoIk9vcHMhIiwgIlN0YXR1cyBjb3VsZCBub3QgYmUgbG9hZGVkLCBwbGVhc2UgY29udGFjdCB5b3VyIFN5c0FkbWluLiIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9jbGllbnQvY2xpZW50U3RhdHVzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2LnN0YXR1c0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi4kcm91dGVyLnB1c2goJ2xvZ291dCcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJTdGF0dXMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY2xpZW50L2NsaWVudFR5cGVzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2LnR5cGVMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczYuJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU3RhdHVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXM2LmZpbmRBZ2VudHMpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2hhcmFjdGVyQ291bnRlcjogZnVuY3Rpb24gY2hhcmFjdGVyQ291bnRlcigpIHsKICAgICAgdmFyIHRleHRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1wbGVGb3JtQ29udHJvbFRleHRhcmVhNSIpOwogICAgICB2YXIgY2hhcmFjdGVyQ291bnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGFyX2NvdW50Iik7CiAgICAgIHZhciBtYXhOdW1PZkNoYXJzID0gMTUwOwogICAgICB2YXIgbnVtT2ZFbnRlcmVkQ2hhcnMgPSB0ZXh0QXJlYS52YWx1ZS5sZW5ndGg7CiAgICAgIHZhciBjb3VudGVyID0gbWF4TnVtT2ZDaGFycyAtIG51bU9mRW50ZXJlZENoYXJzOwogICAgICBjaGFyYWN0ZXJDb3VudGVyLnRleHRDb250ZW50ID0gY291bnRlciArICIvMTUwIjsKICAgICAgdGhpcy50b3RhbENoYXJhY3RlcnMgPSBjb3VudGVyOwoKICAgICAgaWYgKGNvdW50ZXIgPCAwKSB7CiAgICAgICAgY2hhcmFjdGVyQ291bnRlci5zdHlsZS5jb2xvciA9ICJyZWQiOwogICAgICB9IGVsc2UgaWYgKGNvdW50ZXIgPCAxMDApIHsKICAgICAgICBjaGFyYWN0ZXJDb3VudGVyLnN0eWxlLmNvbG9yID0gIm9yYW5nZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hhcmFjdGVyQ291bnRlci5zdHlsZS5jb2xvciA9ICJibGFjayI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRRdW90YTogZnVuY3Rpb24gZ2V0UXVvdGEoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHVybCwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXJsID0gImFwaS9jb21tL2dldFNNU1F1b3RhIjsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzNy5zY2hlZHVsZU1lc3NhZ2VDb250ZW50LAogICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczcuYXZhaWxhYmxlTWVzc2FnZXMgPSBwYXJzZUludChyZXNwb25zZS5kYXRhLnNjaGVkdWxlQ291bnQpICsgcGFyc2VJbnQocmVzcG9uc2UuZGF0YS50b3RhbFNlbnQpOwogICAgICAgICAgICAgICAgICBfdGhpczcuYXZhaWxhYmxlTWVzc2FnZXMgPSAxMDAgLSBfdGhpczcuYXZhaWxhYmxlTWVzc2FnZXM7CgogICAgICAgICAgICAgICAgICBpZiAoX3RoaXM3LnZpZXdVc2VyR3JvdXAoJ1NVUEVSX0FETUlOX0dST1VQJykpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczcuYXZhaWxhYmxlTWVzc2FnZXMgPSAxMDAwMDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiUGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHZpZXdVc2VyR3JvdXA6IGZ1bmN0aW9uIHZpZXdVc2VyR3JvdXAocmVxdWVzdCkgewogICAgICB2YXIgY3VycmVudFJvbGUgPSBqd3RfZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKSk7CiAgICAgIHJldHVybiBjdXJyZW50Um9sZS51c2VyR3JvdXAuaW5jbHVkZXMocmVxdWVzdCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgIHZhciBkYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGRhdGEgPSB7fTsKCiAgICAgICAgICAgICAgaWYgKCEoX3RoaXM4LmZpbmRBZ2VudHMgPT09ICIxIikpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgc2VhcmNoVmFsdWVzOiBfdGhpczguZGF0YS5zZWFyY2hWYWx1ZXMsCiAgICAgICAgICAgICAgICBpc0FnZW50OiAxLAogICAgICAgICAgICAgICAgdXNlckVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2xpc3REZXBhcnRtZW50cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczguZGVwYXJ0bWVudExpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiRGVwYXJ0bWVudHMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvbGlzdFN0YXR1cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczguc3RhdHVzTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJTdGF0dXMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvbGlzdEFnZW50cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczgubGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpczgucGFnZSA9IDE7CgogICAgICAgICAgICAgICAgX3RoaXM4LnNldFBhZ2VzKCk7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsvLyBmb3IgKGNvbnN0IHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lcnJvcnMucHVzaChgJHtwcm9wZXJ0eX06ICR7ZXJyb3IucmVzcG9uc2UuZGF0YVtwcm9wZXJ0eV19YCkKICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC5lcnJvcnMucHVzaCgnU29tZXRoaW5nIHdhcyB3cm9uZywgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDExOwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2xpc3RTb3VyY2UnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM4LnR5cGVMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM4LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU3RhdHVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICAgICAgICAgICAgc2VhcmNoVmFsdWVzOiBfdGhpczguZGF0YS5zZWFyY2hWYWx1ZXMsCiAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpLAogICAgICAgICAgICAgICAgdXNlcklEOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSwKICAgICAgICAgICAgICAgIGlzUHJvc3BlY3Q6IDAsCiAgICAgICAgICAgICAgICBkZWxldGVkOiAwLAogICAgICAgICAgICAgICAgYWdlbnRTZWFyY2g6IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE2OwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvYXBpL2NsaWVudC9jbGllbnRTdGF0dXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM4LnN0YXR1c0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczguJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKCJPb3BzISIsICJTdGF0dXMgY291bGQgbm90IGJlIGxvYWRlZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBTeXNBZG1pbi4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxODsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS9jbGllbnQvY2xpZW50VHlwZXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM4LnR5cGVMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdZb3VyIHNlc3Npb24gaXMgZXhwaXJlZCEnKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM4LiRyb3V0ZXIucHVzaCgnbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgiT29wcyEiLCAiU3RhdHVzIGNvdWxkIG5vdCBiZSBsb2FkZWQsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvY29tbS9nZXRTY2hlZHVsZWRNZXNzYWdlcycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczgubWVzc2FnZUxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbCA9PT0gJ1lvdXIgc2Vzc2lvbiBpcyBleHBpcmVkIScpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczguJHJvdXRlci5wdXNoKCdsb2dvdXQnKTsKICAgICAgICAgICAgICAgICAgfSAvLyBmb3IgKGNvbnN0IHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lcnJvcnMucHVzaChgJHtwcm9wZXJ0eX06ICR7ZXJyb3IucmVzcG9uc2UuZGF0YVtwcm9wZXJ0eV19YCkKICAgICAgICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICBfdGhpczguZXJyb3JzLnB1c2goJ1NvbWV0aGluZyB3YXMgd3JvbmcsIHBsZWFzZSBjb250YWN0IHlvdXIgU3lzQWRtaW4uJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIF90aGlzOC51cGRhdGVBZ2VudExpc3QoKTsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNyk7CiAgICB9KSkoKTsKICB9Cn07"},{"version":3,"mappings":"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","names":["flatPickr","Layout","PageHeader","appConfig","moment","axios","Swal","Papa","jwt_decode","page","title","meta","name","content","description","components","data","items","text","href","active","timeConfig","enableTime","dateFormat","dateTimeConfig","list","messageList","reciepientList","numberOfRecipents","humanfriendlyConfig","scheduleMessageContent","scheduleHour","perPage","pages","uploadLanguage","token","localStorage","getItem","searchValues","isActive","noteSearch","keyword","licensed","language","orderBy","sortBy","department","dateRange","status","type","toDate","Date","toLocaleDateString","year","month","day","fromDate","setFullYear","getFullYear","statusList","parsed","findAgents","spectedColumns","date","totalCharacters","availableMessages","watch","contactsList","setPages","created","computed","displayedPosts","paginate","resultQuery","length","search","toLowerCase","filter","address","includes","agentNumber","city","email","phoneNumber","firstName","lastName","fullname","statusName","methods","formatDate","format","numberOfPages","Math","ceil","index","push","from","to","slice","formatPhone","phone","flag","undefined","x","replace","match","document","getElementById","value","addRecipients","ids_array","getElementsByName","url","forEach","ele","checked","trNode","parentNode","id","querySelector","innerHTML","recipientsList","join","post","then","array1","JSON","parse","stringify","array2","response","array3","concat","self","findIndex","t","ID","closest","classList","remove","catch","error","fire","confirmButtonClass","buttonsStyling","showCloseButton","addRecipientsFromFile","item","splitFullName","split","console","log","click","removeRecipient","icon","showCancelButton","cancelButtonColor","confirmButtonColor","confirmButtonText","result","splice","indexOf","scheduleMessage","validate","errors","recipients","hour","message","userEmail","i","resetForm","getQuota","updateAgentList","filterKeyword","filterLanguage","isAgent","detail","$router","parseFile","allowedExtensions","exec","file","header","skipEmptyLines","complete","results","compare","fields","bind","handleFileUpload","files","o1","o2","p","hasOwnProperty","deleteRecord","target","parentElement","updateRecipientsList","departmentList","typeList","userID","isProspect","deleted","agentSearch","characterCounter","textArea","maxNumOfChars","numOfEnteredChars","counter","textContent","style","color","parseInt","scheduleCount","totalSent","viewUserGroup","request","currentRole","userGroup","mounted"],"sourceRoot":"","sources":["C:\\wamp64\\www\\crm\\frontend\\src\\views\\communication\\scheduleMessages.vue"],"sourcesContent":["<script>\r\nimport flatPickr from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport Layout from \"../../layouts/main.vue\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport appConfig from \"../../../app.config\";\r\nimport moment from \"moment\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport Papa from \"papaparse\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nexport default {\r\n  page: {\r\n    title: \"Agents List cards\",\r\n    meta: [{name: \"description\", content: appConfig.description}],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n    flatPickr,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Agents | Scheduled Messages\",\r\n      items: [\r\n        {\r\n          text: \"Agents\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Agent List cards\",\r\n          active: true,\r\n        },\r\n      ],\r\n      timeConfig: {\r\n        enableTime: false,\r\n        dateFormat: \"d M, Y\"\r\n      },\r\n      dateTimeConfig: {\r\n        enableTime: true,\r\n        dateFormat: \"m-d-y H:i K\"\r\n      },\r\n      list: [],\r\n      messageList: [],\r\n      reciepientList: [],\r\n      content: [],\r\n      numberOfRecipents: 0,\r\n      humanfriendlyConfig: {\r\n        dateFormat: \"F j, Y\",\r\n      },\r\n      scheduleMessageContent: '',\r\n      scheduleHour: '14:00',\r\n      page: 1,\r\n      perPage: 50,\r\n      pages: [],\r\n      uploadLanguage: '0',\r\n      data: {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: {\r\n          isActive: 1,\r\n          noteSearch: '',\r\n          keyword: '',\r\n          licensed: 1,\r\n          language: 3,\r\n          orderBy: 'ASC',\r\n          sortBy: 'name',\r\n          department: '0',\r\n          dateRange: 0,\r\n          status: 0,\r\n          type: 0,\r\n          toDate: new Date().toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"}) ,\r\n          fromDate: new Date(new Date().setFullYear(new Date().getFullYear() - 1)).toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"}),\r\n        }\r\n      },\r\n      statusList: {},\r\n      parsed: false,\r\n      findAgents: \"1\",\r\n      spectedColumns: [\r\n        \"Full name (optional)\",\r\n        \"First Name\",\r\n        \"Last Name\",\r\n        \"Phone\",\r\n        \"Email\"\r\n      ],\r\n      date: '',\r\n      totalCharacters: 0,\r\n      availableMessages: 0\r\n    };\r\n  },\r\n  watch: {\r\n    contactsList() {\r\n      this.setPages();\r\n    },\r\n  },\r\n  created() {\r\n    this.setPages();\r\n  },\r\n  computed: {\r\n    displayedPosts() {\r\n      return this.paginate(this.list);\r\n    },\r\n    resultQuery() {\r\n      if (this.data.searchValues.keyword.length >= 3) {\r\n        const search = this.data.searchValues.keyword.toLowerCase();\r\n        return this.displayedPosts.filter((data) => {\r\n          return (\r\n              data.address.toLowerCase().includes(search) ||\r\n              data.agentNumber.toLowerCase().includes(search) ||\r\n              data.city.toLowerCase().includes(search) ||\r\n              data.email.toLowerCase().includes(search) ||\r\n              data.phoneNumber.toLowerCase().includes(search) ||\r\n              data.firstName.toLowerCase().includes(search) ||\r\n              data.lastName.toLowerCase().includes(search) ||\r\n              data.fullname.toLowerCase().includes(search) ||\r\n              data.statusName.toLowerCase().includes(search)\r\n          );\r\n        });\r\n      } else {\r\n        return this.displayedPosts;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    formatDate: function (date, format) {\r\n      date = moment(date).format(format)\r\n      return date;\r\n    },\r\n    setPages() {\r\n\r\n      let numberOfPages = Math.ceil(this.list.length / this.perPage);\r\n      this.pages = []\r\n      for (let index = 1; index <= numberOfPages; index++) {\r\n        this.pages.push(index);\r\n      }\r\n    },\r\n    paginate(contactsList) {\r\n      let page = this.page;\r\n      let perPage = this.perPage;\r\n      let from = page * perPage - perPage;\r\n      let to = page * perPage;\r\n      return contactsList.slice(from, to);\r\n    },\r\n    formatPhone: function(phone, flag=0) {\r\n\r\n      // if flag == 1 put value in phone Edit\r\n      if(phone !== undefined){\r\n        const x = phone.replace(/\\D/g, '').match(/(\\d{0,3})(\\d{0,3})(\\d{0,4})/);\r\n        phone = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');\r\n      }else{\r\n        phone = ''\r\n      }\r\n\r\n      if(flag !== 1){\r\n        return phone;\r\n      }else{\r\n        document.getElementById('editPhoneNumber').value = phone;\r\n      }\r\n    },\r\n    async addRecipients() {\r\n      let ids_array = [];\r\n      let items = document.getElementsByName(\"chk_child\");\r\n      let url = '';\r\n      items.forEach(function (ele) {\r\n        if (ele.checked == true) {\r\n          let trNode = ele.parentNode.parentNode.parentNode;\r\n          let id = trNode.querySelector(\".id a\").innerHTML;\r\n\r\n          if(!ids_array.includes(id)){\r\n            ids_array.push(id);\r\n          }\r\n        }\r\n      });\r\n\r\n      if (typeof ids_array !== \"undefined\" && ids_array.length > 0) {\r\n        const data = {\r\n          token: localStorage.getItem('jwt'),\r\n          recipientsList: ids_array.join(),\r\n        }\r\n\r\n        if(this.findAgents === \"1\"){\r\n          url = '/api/getUserByids'\r\n        }else{\r\n          url = '/api/client/getClientsByiDS'\r\n        }\r\n\r\n        await axios\r\n            .post(url, data)\r\n            .then(response => {\r\n              let array1 = JSON.parse(JSON.stringify(this.reciepientList))\r\n              let array2 = JSON.parse(JSON.stringify(response.data))\r\n              let array3 = array1.concat(array2);\r\n\r\n              array3 = array3.filter((value, index, self) =>\r\n                index === self.findIndex((t) => (\r\n                    t.ID === value.ID && t.phoneNumber === value.phoneNumber\r\n                ))\r\n              )\r\n\r\n              this.reciepientList = JSON.parse(JSON.stringify(array3));\r\n              this.numberOfRecipents = this.reciepientList.length\r\n\r\n              items.forEach(function (ele) {\r\n                if (ele.checked == true) {\r\n                  ele.checked = false\r\n                  ele.closest(\"tr\").classList.remove(\"table-active\");\r\n                }\r\n              });\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                Swal.fire(\"Oops!\", \"Departments could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n              })\r\n      } else {\r\n        Swal.fire({\r\n          title: \"Please, select at least one recipient!\",\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    async addRecipientsFromFile() {\r\n      let language = this.uploadLanguage;\r\n      if (this.content.data.length > 0 && language !== '0') {\r\n        let array1 = JSON.parse(JSON.stringify(this.reciepientList))\r\n        let array2 = JSON.parse(JSON.stringify(this.content.data))\r\n        let array3 = []\r\n\r\n        array2.forEach(function (item) {\r\n          let firstName = '';\r\n          let lastName = '';\r\n\r\n          if (item['First Name'].length > 1 && item['Last Name'].length > 1) {\r\n            firstName = item['First Name']\r\n            lastName = item['Last Name']\r\n          } else {\r\n            let splitFullName = item['Full name (optional)'].split('')\r\n            firstName = splitFullName[0]\r\n            lastName = splitFullName[1]\r\n          }\r\n\r\n          array3.push({\r\n            'ID': 0,\r\n            'departmentName': 'n/a',\r\n            'email': item['Email'],\r\n            'firstName': firstName,\r\n            'language': language,\r\n            'lastName': lastName,\r\n            'phoneNumber': item['Phone'],\r\n            'statusName': 'n/a'\r\n          })\r\n        });\r\n\r\n        this.reciepientList = array1.concat(array3);\r\n        console.log(this.reciepientList)\r\n        this.numberOfRecipents = this.reciepientList.length\r\n\r\n        document.getElementById('closeListModal').click()\r\n        // this.openModal('createMessage')\r\n\r\n      }else if(this.uploadLanguage === '0'){\r\n        Swal.fire({\r\n          title: \"Please, select the language!\",\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      } else {\r\n        Swal.fire({\r\n          title: \"Please, upload almost one recipient in the list!\",\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    removeRecipient(index){\r\n      Swal.fire({\r\n        title: \"Are you sure?\",\r\n        text: \"This recipient will be removed!\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        cancelButtonColor: \"#2ca219\",\r\n        confirmButtonColor: \"#e12e2e\",\r\n        confirmButtonText: \"Yes, delete it!\",\r\n      }).then((result) => {\r\n        if (result.value) {\r\n          this.reciepientList.splice(this.reciepientList.indexOf(index), 1);\r\n          Swal.fire(\"Deleted!\", \"Recipient has been deleted.\", \"success\");\r\n          this.numberOfRecipents = this.reciepientList.length\r\n        }\r\n      });\r\n    },\r\n    async scheduleMessage() {\r\n\r\n      let validate = true;\r\n      let errors = [];\r\n\r\n      if (this.scheduleMessageContent === '' && this.scheduleMessageContent.length < 10) {\r\n        errors.push('Message should be longer than 10 characters!')\r\n        validate = false;\r\n      }\r\n\r\n      if (this.scheduleHour === '' && this.scheduleHour.length < 3) {\r\n        errors.push('Please, set the schedule hour for the message!')\r\n        validate = false;\r\n      }\r\n\r\n      if (this.reciepientList.length === 0) {\r\n        errors.push('Please, add almost one recipient to the list!')\r\n        validate = false;\r\n      }\r\n\r\n      if (this.totalCharacters < 0) {\r\n        errors.push('Your message is longer than 150 characters!')\r\n        validate = false;\r\n      }\r\n\r\n      if(this.availableMessages <= 0){\r\n        errors.push('You reached the limit of daily messages!')\r\n        validate = false;\r\n      }\r\n\r\n      if(this.reciepientList.length > this.availableMessages ){\r\n        errors.push('You can\\'t add more recipients than you message limit!')\r\n        validate = false;\r\n      }\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        recipients: this.reciepientList,\r\n        hour: this.scheduleHour,\r\n        date: this.date,\r\n        message: this.scheduleMessageContent,\r\n        userEmail: localStorage.getItem('email'),\r\n      }\r\n\r\n      if(validate){\r\n        await axios\r\n            .post('/api/comm/saveScheduleMessage', data)\r\n            .then(response => {\r\n              document.getElementById('closemodal').click();\r\n              Swal.fire({\r\n                icon: 'success',\r\n                title: 'Success',\r\n                text: 'Message scheduled successfully!'\r\n              });\r\n              console.log(response)\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                Swal.fire(\"Oops!\", \"Please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n      }else{\r\n        let list = '';\r\n        for (var i = 0; i < errors.length; i+=1) {\r\n          list += errors[i] + ' \\n';\r\n        }\r\n\r\n        await Swal.fire(\"\" + list, '', 'info');\r\n\r\n      }\r\n    },\r\n    resetForm(){\r\n      // this.reciepientList = [];\r\n      this.numberOfRecipents = 0;\r\n      this.scheduleMessageContent = '';\r\n      this.scheduleHour = '14:00'\r\n      this.date = new Date(new Date().setFullYear(new Date().getFullYear() - 1)).toLocaleDateString('en-us', { year:\"numeric\", month:\"long\", day:\"numeric\"})\r\n\r\n      this.getQuota()\r\n    },\r\n    async updateAgentList(status=0) {\r\n\r\n      let validate = true;\r\n      let errors = [];\r\n      let filterKeyword = document.getElementById(\"filterKeyword\").value;\r\n      this.data.searchValues.status = status;\r\n      let filterLanguage = this.data.searchValues.language;\r\n\r\n      if (filterLanguage !== '' && (filterLanguage === '1' || filterLanguage === '2')){\r\n        this.data.searchValues.language = filterLanguage;\r\n      }\r\n\r\n      if (filterKeyword !== '' && filterKeyword.length >= 3) {\r\n        this.data.searchValues.keyword = filterKeyword;\r\n      } else if (filterKeyword !== '' && filterKeyword.length < 3) {\r\n        errors.push('Keyword search should have 3 or more characters!')\r\n        validate = false;\r\n      }\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: this.data.searchValues,\r\n        isAgent: this.data.searchValues.licensed,\r\n        userEmail: localStorage.getItem('email'),\r\n      }\r\n\r\n      if(validate){\r\n        axios\r\n            .post('/api/listAgents', data)\r\n            .then(response => {\r\n              this.list=response.data\r\n              this.page = 1\r\n              this.setPages()\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n\r\n                if(error.response.data.detail === 'Your session is expired!'){\r\n                  this.$router.push('logout')\r\n                }\r\n                // for (const property in error.response.data) {\r\n                // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                // }\r\n              } else if (error.message) {\r\n                this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n              }\r\n            })\r\n      }else{\r\n        let list = '';\r\n        for (var i = 0; i < errors.length; i+=1) {\r\n          list += errors[i] + ' \\n';\r\n        }\r\n\r\n        await Swal.fire(\"\" + list, '', 'info');\r\n\r\n      }\r\n\r\n    },\r\n    parseFile() {\r\n      var allowedExtensions = /(\\.csv)$/i;\r\n      if (allowedExtensions.exec(this.file.name)) {\r\n        Papa.parse( this.file, {\r\n          header: true,\r\n          skipEmptyLines: true,\r\n          complete: function ( results ) {\r\n            if( this.compare(this.spectedColumns, results.meta.fields)){\r\n              this.content = results;\r\n              this.parsed = true;\r\n            } else {\r\n              Swal.fire({\r\n                title: \"Oops, this file is not what we spected!\",\r\n                icon: 'warning',\r\n                confirmButtonClass: \"btn btn-info\",\r\n                buttonsStyling: false,\r\n                showCloseButton: true,\r\n              });\r\n            }\r\n          }.bind(this)\r\n        } );\r\n      } else {\r\n        Swal.fire({\r\n          title: \"File extension not supported!\",\r\n          icon: 'warning',\r\n          confirmButtonClass: \"btn btn-info\",\r\n          buttonsStyling: false,\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    },\r\n    handleFileUpload() {\r\n      this.file = document.getElementById('listFile').files[0];\r\n      this.parseFile();\r\n    },\r\n    compare (o1, o2){\r\n      for(let p in o1){\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if(o1.hasOwnProperty(p)){\r\n          if(o1[p] !== o2[p]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      for(let p in o2){\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if(o2.hasOwnProperty(p)){\r\n          if(o1[p] !== o2[p]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n    deleteRecord(ele){\r\n      ele.target.parentElement.parentElement.remove();\r\n    },\r\n    async updateRecipientsList() {\r\n      let data = {}\r\n\r\n      if (this.findAgents === \"1\") {\r\n\r\n        data = {\r\n          token: localStorage.getItem('jwt'),\r\n          searchValues: this.data.searchValues,\r\n          isAgent: 1,\r\n          userEmail: localStorage.getItem('email'),\r\n        }\r\n\r\n        await axios\r\n            .post('/api/listDepartments', data)\r\n            .then(response => {\r\n              this.departmentList = response.data\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                Swal.fire(\"Oops!\", \"Departments could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n\r\n        await axios\r\n            .post('/api/listStatus', data)\r\n            .then(response => {\r\n              this.statusList = response.data\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n\r\n        await axios\r\n            .post('/api/listAgents', data)\r\n            .then(response => {\r\n              this.list = response.data\r\n              this.page = 1\r\n              this.setPages()\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n                // for (const property in error.response.data) {\r\n                // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n                // }\r\n              } else if (error.message) {\r\n                this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n              }\r\n            })\r\n\r\n        await axios\r\n            .post('/api/listSource', data)\r\n            .then(response => {\r\n              this.typeList = response.data\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n\r\n                if (error.response.data.detail === 'Your session is expired!') {\r\n                  this.$router.push('logout')\r\n                }\r\n\r\n                Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n\r\n      } else {\r\n        data = {\r\n          token: localStorage.getItem('jwt'),\r\n          searchValues: this.data.searchValues,\r\n          userEmail: localStorage.getItem('email'),\r\n          userID: localStorage.getItem('id'),\r\n          isProspect: 0,\r\n          deleted: 0,\r\n          agentSearch: []\r\n        }\r\n\r\n        if(this.findAgents === \"3\"){\r\n          data.isProspect = 1\r\n        }\r\n\r\n        await axios\r\n            .post('/api/client/listClients', data)\r\n            .then(response => {\r\n              this.list = response.data\r\n              this.page = 1\r\n              this.setPages()\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n\r\n                if (error.response.data.detail === 'Your session is expired!') {\r\n                  this.$router.push('logout')\r\n                }\r\n\r\n                Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n\r\n        await axios\r\n            .post('/api/client/clientStatus', data)\r\n            .then(response => {\r\n              this.statusList = response.data\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n\r\n                if (error.response.data.detail === 'Your session is expired!') {\r\n                  this.$router.push('logout')\r\n                }\r\n\r\n                Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n\r\n        await axios\r\n            .post('/api/client/clientTypes', data)\r\n            .then(response => {\r\n              this.typeList = response.data\r\n            })\r\n            .catch(error => {\r\n              if (error.response) {\r\n\r\n                if (error.response.data.detail === 'Your session is expired!') {\r\n                  this.$router.push('logout')\r\n                }\r\n\r\n                Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n              }\r\n            })\r\n      }\r\n\r\n      console.log(this.findAgents)\r\n    },\r\n    characterCounter(){\r\n      let textArea = document.getElementById(\"exampleFormControlTextarea5\");\r\n      let characterCounter = document.getElementById(\"char_count\");\r\n      const maxNumOfChars = 150;\r\n\r\n      let numOfEnteredChars = textArea.value.length;\r\n      let counter = maxNumOfChars - numOfEnteredChars;\r\n      characterCounter.textContent = counter + \"/150\";\r\n      this.totalCharacters = counter;\r\n\r\n      if (counter < 0) {\r\n        characterCounter.style.color = \"red\";\r\n      } else if (counter < 100) {\r\n        characterCounter.style.color = \"orange\";\r\n      } else {\r\n        characterCounter.style.color = \"black\";\r\n      }\r\n    },\r\n    async getQuota() {\r\n      let url = \"api/comm/getSMSQuota\"\r\n\r\n      const data = {\r\n        token: localStorage.getItem('jwt'),\r\n        message: this.scheduleMessageContent,\r\n        userEmail: localStorage.getItem('email'),\r\n      }\r\n\r\n      await axios\r\n          .post(url, data)\r\n          .then(response => {\r\n\r\n            this.availableMessages = parseInt(response.data.scheduleCount) + parseInt(response.data.totalSent)\r\n            this.availableMessages = 100 - this.availableMessages\r\n\r\n            if (this.viewUserGroup('SUPER_ADMIN_GROUP')){\r\n              this.availableMessages = 10000\r\n            }\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n              Swal.fire(\"Oops!\", \"Please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n\r\n    },\r\n    viewUserGroup(request){\r\n      const currentRole = jwt_decode(localStorage.getItem('jwt'))\r\n      return currentRole.userGroup.includes(request)\r\n    },\r\n  },\r\n  async mounted() {\r\n\r\n    let data = {}\r\n\r\n    if(this.findAgents === \"1\"){\r\n\r\n      data = {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: this.data.searchValues,\r\n        isAgent: 1,\r\n        userEmail: localStorage.getItem('email'),\r\n      }\r\n\r\n      await axios\r\n          .post('/api/listDepartments', data)\r\n          .then(response => {\r\n            this.departmentList=response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n              Swal.fire(\"Oops!\", \"Departments could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n\r\n      await axios\r\n          .post('/api/listStatus', data)\r\n          .then(response => {\r\n            this.statusList=response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n\r\n      await axios\r\n          .post('/api/listAgents', data)\r\n          .then(response => {\r\n            this.list=response.data\r\n            this.page = 1\r\n            this.setPages()\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n              // for (const property in error.response.data) {\r\n              // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n              // }\r\n            } else if (error.message) {\r\n              this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n            }\r\n          })\r\n\r\n      await axios\r\n          .post('/api/listSource', data)\r\n          .then(response => {\r\n            this.typeList = response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n\r\n    } else {\r\n      data = {\r\n        token: localStorage.getItem('jwt'),\r\n        searchValues: this.data.searchValues,\r\n        userEmail: localStorage.getItem('email'),\r\n        userID: localStorage.getItem('id'),\r\n        isProspect: 0,\r\n        deleted: 0,\r\n        agentSearch: []\r\n      }\r\n\r\n      await axios\r\n          .post('/api/client/clientStatus', data)\r\n          .then(response => {\r\n            this.statusList=response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n\r\n      await axios\r\n          .post('/api/client/clientTypes', data)\r\n          .then(response => {\r\n            this.typeList = response.data\r\n          })\r\n          .catch(error => {\r\n            if (error.response) {\r\n\r\n              if(error.response.data.detail === 'Your session is expired!'){\r\n                this.$router.push('logout')\r\n              }\r\n\r\n              Swal.fire(\"Oops!\", \"Status could not be loaded, please contact your SysAdmin.\", \"error\")\r\n            }\r\n          })\r\n    }\r\n\r\n    await axios\r\n        .post('/api/comm/getScheduledMessages', data)\r\n        .then(response => {\r\n          this.messageList=response.data\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n\r\n            if(error.response.data.detail === 'Your session is expired!'){\r\n              this.$router.push('logout')\r\n            }\r\n\r\n            // for (const property in error.response.data) {\r\n            // this.errors.push(`${property}: ${error.response.data[property]}`)\r\n            // }\r\n          } else if (error.message) {\r\n            this.errors.push('Something was wrong, please contact your SysAdmin.')\r\n          }\r\n        })\r\n    this.updateAgentList()\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\"/>\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\" id=\"leadsList\">\r\n          <div class=\"card-header border-0\">\r\n            <div class=\"row g-4 align-items-center\">\r\n              <div class=\"col-sm-3\">\r\n                <div class=\"search-box\">\r\n                  <input\r\n                      type=\"text\"\r\n                      class=\"form-control search\"\r\n                      placeholder=\"Search for...\"\r\n                  />\r\n                  <i class=\"ri-search-line search-icon\"></i>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-auto ms-auto\">\r\n                <div class=\"hstack gap-2\">\r\n                  <button type=\"button\" class=\"btn btn-soft-success add-btn\" href=\"#open-filters\" data-bs-toggle=\"modal\">\r\n                    <i class=\"ri-filter-line align-bottom me-1\"></i> Filters\r\n                  </button>\r\n                  <button type=\"button\" class=\"btn btn-soft-success\" href=\"#createMessage\" data-bs-toggle=\"modal\" @click=\"resetForm\">\r\n                    <i class=\"ri-message-2-line align-bottom me-1\"></i> Create Message\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Table Head -->\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table align-middle table-nowrap mb-0\">\r\n              <thead class=\"table-light\">\r\n              <tr>\r\n                <th scope=\"col\" style=\"width: 50px\">\r\n                  <div class=\"form-check\">\r\n                    <input\r\n                        class=\"form-check-input\"\r\n                        type=\"checkbox\"\r\n                        id=\"checkAll\"\r\n                        value=\"option\"\r\n                    />\r\n                  </div>\r\n                </th>\r\n                <th scope=\"col\">Message</th>\r\n                <th scope=\"col\">Is Active</th>\r\n                <th scope=\"col\">Sent</th>\r\n                <th scope=\"col\">Scheduled To</th>\r\n                <th scope=\"col\">Create Date</th>\r\n                <th scope=\"col\">Actions</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(data, index) of messageList\" :key=\"index\">\r\n                <td>\r\n                  <div class=\"form-check\">\r\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"cardtableCheck01\">\r\n                    <label class=\"form-check-label\" for=\"cardtableCheck01\"></label>\r\n                  </div>\r\n                </td>\r\n                <td>{{ data.message }}</td>\r\n                <td><a href=\"javascript:void(0);\" :class=\" data.active === 1 ? 'link-success' : 'link-danger'\" >{{ data.active === 1 ? 'Yes' : 'No' }}</a></td>\r\n                <td>{{ data.sent === 1 ? 'Yes' : 'No' }}</td>\r\n                <td>{{formatDate(data.scheduledTo, 'MMMM Do YYYY, h:mmA') }}</td>\r\n                <td>{{formatDate(data.createdOn, 'MMM Do YYYY, h:mmA') }}</td>\r\n                <td>\r\n                  <ul class=\"list-inline hstack gap-2 mb-0\">\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"modal\" href=\"#createMessage\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Edit\" @click=\"getMessage(data.ID)\">\r\n                      <a class=\"edit-item-btn\" href=\"javascript:void(0);\"><i class=\"ri-pencil-fill align-bottom text-muted\"></i></a>\r\n                    </li>\r\n                    <li class=\"list-inline-item\" data-bs-toggle=\"tooltip\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Delete\">\r\n                      <a class=\"remove-item-btn\" data-bs-toggle=\"modal\" href=\"javascript:void(0);\">\r\n                        <i class=\"ri-delete-bin-fill align-bottom text-muted\"></i>\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--end col-->\r\n    </div>\r\n    <!--end row-->\r\n\r\n    <!-- Filters Modal -->\r\n    <div id=\"open-filters\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"myModalLabel\">Filters</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"> </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-12\">\r\n                <label for=\"filterKeyword\" class=\"form-label\">Keyword</label>\r\n                <input type=\"text\" id=\"filterKeyword\" name=\"filterKeyword\" class=\"form-control mb-2\" placeholder=\"Enter Keyword\" v-model=\"this.data.searchValues.keyword\">\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterLicensed\" class=\"form-label\">Licensed agents?</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Licensed Agents?\" id=\"filterLicensed\" name=\"filterLicensed\" v-model=\"this.data.searchValues.licensed\">\r\n                  <option value=\"1\" selected>Both</option>\r\n                  <option value=\"2\">Yes</option>\r\n                  <option value=\"3\">No</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <div class=\"form-check form-switch form-switch-lg\" dir=\"ltr\" style=\"margin: 0;position: absolute;top: 50%;-ms-transform: translateY(-50%);transform: translateY(-50%);\">\r\n                  <input type=\"checkbox\" class=\"form-check-input\" id=\"isActive\" checked=\"\">\r\n                  <label class=\"form-check-label\" for=\"isActive\">Active</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"filterLanguage\" name=\"filterLanguage\" v-model=\"this.data.searchValues.language\">\r\n                  <option value=\"3\" selected>Both</option>\r\n                  <option value=\"1\" selected>English</option>\r\n                  <option value=\"2\">Spanish</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"editStatus\" class=\"form-label\">Search by Notes</label>\r\n                <input type=\"text\" id=\"filterNotes\" name=\"filterNotes\" class=\"form-control mb-2\" placeholder=\"Enter note\" v-model=\"this.data.searchValues.noteSearch\">\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterFromDate\" class=\"form-label\"> From date </label>\r\n                <flat-pickr\r\n                    v-model=\"this.data.searchValues.fromDate\"\r\n                    :config=\"humanfriendlyConfig\"\r\n                    class=\"form-control flatpickr-input\"\r\n                    id=\"filterFromDate\"\r\n                    name=\"filterFromDate\"\r\n                ></flat-pickr>\r\n              </div>\r\n              <div class=\"col-lg-6\">\r\n                <label for=\"filterToDate\" class=\"form-label\"> To Date </label>\r\n                <flat-pickr\r\n                    v-model=\"this.data.searchValues.toDate\"\r\n                    :config=\"humanfriendlyConfig\"\r\n                    class=\"form-control flatpickr-input\"\r\n                    id=\"filterToDate\"\r\n                    name=\"filterToDate\"\r\n                ></flat-pickr>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-light\" data-bs-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"updateAgentList()\">Search</button>\r\n          </div>\r\n\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!--  Create message Modal  -->\r\n    <div id=\"createMessage\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n      <div class=\"modal-dialog  modal-fullscreen\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"myModalLabel\">Create Schedule Message</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"> </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-5\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-6\">\r\n                    <label for=\"filterFromDate\" class=\"form-label\"> Date</label>\r\n                    <flat-pickr\r\n                        class=\"form-control flatpickr-input\"\r\n                        id=\"filterFromDate\"\r\n                        name=\"filterFromDate\"\r\n                    ></flat-pickr>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div>\r\n                      <label for=\"exampleInputtime\" class=\"form-label\">Hour</label>\r\n                      <input type=\"time\" class=\"form-control\" id=\"exampleInputtime\" v-model=\"scheduleHour\">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\" style=\"margin-top: 10px;\">\r\n                    <div>\r\n                      <label for=\"exampleFormControlTextarea5\" class=\"form-label\">Message Content</label>\r\n                      <textarea class=\"form-control\" id=\"exampleFormControlTextarea5\" rows=\"15\" v-model=\"scheduleMessageContent\" @keyup=\"characterCounter\"></textarea>\r\n                      <span id=\"char_count\">150/150</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-7\">\r\n                  <div class=\"row\" style=\"margin-top: 0px;\">\r\n                    <div class=\"col-sm-6\">\r\n                      <label for=\"filterKeyword\" class=\"form-label\">Keyword Search</label>\r\n                      <input type=\"text\" id=\"filterKeyword\"\r\n                             name=\"filterKeyword\"\r\n                             class=\"form-control search\"\r\n                             placeholder=\"Search for...\"\r\n                             v-model=\"this.data.searchValues.keyword\"\r\n                             @change=\"this.data.searchValues.keyword.length >= 3 ? updateAgentList(): ''\"\r\n                             v-on:keyup.enter=\"this.data.searchValues.keyword === '' ? updateAgentList() : ''\">\r\n                    </div>\r\n                    <div class=\"col-sm-3\">\r\n                      <label for=\"filterLicensed\" class=\"form-label\">Licensed agents?</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Licensed Agents?\" id=\"filterLicensed\" name=\"filterLicensed\" v-model=\"this.data.searchValues.licensed\" @change=\"updateRecipientsList\">\r\n                        <option value=\"1\" selected>Both</option>\r\n                        <option value=\"2\">Yes</option>\r\n                        <option value=\"3\">No</option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-sm-3\">\r\n                      <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"filterLanguage\" name=\"filterLanguage\" v-model=\"this.data.searchValues.language\" @change=\"updateRecipientsList\">\r\n                        <option value=\"3\" selected>Both</option>\r\n                        <option value=\"1\" selected>English</option>\r\n                        <option value=\"2\">Spanish</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                <div class=\"row\" style=\"margin-bottom: 10px;\">\r\n                  <div class=\"col-sm-4\">\r\n                    <label for=\"editLanguage\" class=\"form-label\">Recipients List</label>\r\n                    <select class=\"form-select mb-3\" aria-label=\"Language\" id=\"filterLanguage\" name=\"filterLanguage\" v-model=\"this.findAgents\" @change=\"updateRecipientsList\">\r\n                      <option value=\"1\" selected>Agents</option>\r\n                      <option value=\"2\">Clients</option>\r\n                      <option value=\"3\">Prospects</option>\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"col-sm-4\">\r\n                    <label for=\"filterStatus\" class=\"form-label\">Status</label>\r\n                    <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"filterStatus\" v-model=\"this.data.searchValues.status\" @change=\"updateRecipientsList\">\r\n                      <option value=\"0\">All</option>\r\n                      <option v-for=\"(status, statusIndex) of statusList\" :key=\"statusIndex\" v-bind:value=\"status.statusID\">{{ status.name }}</option>\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"col-sm-4\">\r\n                    <label for=\"filterType\" class=\"form-label\">Type</label>\r\n                    <select class=\"form-select mb-2\" aria-label=\"Status\" id=\"filterType\" name=\"filterType\" v-model=\"this.data.searchValues.type\" @change=\"updateRecipientsList\">\r\n                      <option value=\"0\">All</option>\r\n                      <option v-for=\"(type, typeIndex) of typeList\" :key=\"typeIndex\" v-bind:value=\"type.name\">{{ type.name }}</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div class=\"table-responsive\" style=\"max-height: 500px;\">\r\n                  <table class=\"table align-middle table-nowrap mb-0\">\r\n                    <thead class=\"table-light\">\r\n                    <tr>\r\n                      <th scope=\"col\" style=\"width: 50px\">\r\n                        #\r\n                      </th>\r\n                      <th scope=\"col\">Name</th>\r\n                      <th scope=\"col\">Status</th>\r\n                      <th scope=\"col\">Phone</th>\r\n                      <th scope=\"col\">Department</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr v-for=\"(data, index) of resultQuery\" :key=\"index\">\r\n                      <td>\r\n                        <div class=\"form-check\">\r\n                          <input class=\"form-check-input\"\r\n                                 type=\"checkbox\"\r\n                                 name=\"chk_child\"\r\n                                 value=\"option1\">\r\n                        </div>\r\n                      </td>\r\n                      <td class=\"id\" style=\"display: none\">\r\n                        <a\r\n                            href=\"javascript:void(0);\"\r\n                            class=\"fw-medium link-primary\"\r\n                        >{{ data.ID }}</a>\r\n                      </td>\r\n                      <td>{{ data.firstName }} {{ data.lastName }}</td>\r\n                      <td><a href=\"javascript:void(0);\" class=\"link-success\">{{ data.statusName }}</a></td>\r\n                      <td>{{ formatPhone(data.phoneNumber) }}</td>\r\n                      <td>{{ data.departmentName }}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  <div class=\"d-flex justify-content-end mt-3\" v-if=\"resultQuery.length >= 0\">\r\n                    <button type=\"button\" class=\"btn btn-soft-success custom-toggle active\" data-bs-toggle=\"button\" @click=\"addRecipients()\" style=\"margin-right: 5px;\">\r\n                      <span class=\"icon-on\">+ Recipient</span>\r\n                    </button>\r\n                    <div class=\"col-md-2\" style=\"margin-top: 5px;\">\r\n                      <button\r\n                          type=\"button\"\r\n                          id=\"dropdownMenuLink1\"\r\n                          data-bs-toggle=\"dropdown\"\r\n                          aria-expanded=\"false\"\r\n                          class=\"btn btn-soft-info\"\r\n                      >\r\n                        <i class=\"ri-more-2-fill\"></i>\r\n                      </button>\r\n                      <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink1\">\r\n                        <li><a class=\"dropdown-item\" href=\"#uploadRecipients\" data-bs-toggle=\"modal\">Upload Recipients</a></li>\r\n                      </ul>\r\n                    </div>\r\n                    <div class=\"pagination-wrap hstack gap-2\">\r\n                      <a\r\n                          class=\"page-item pagination-prev disabled\"\r\n                          href=\"#\"\r\n                          v-if=\"page !== 1\"\r\n                          @click=\"page--\"\r\n                      >\r\n                        Previous\r\n                      </a>\r\n                      <ul class=\"pagination listjs-pagination mb-0\">\r\n                        <li\r\n                            :class=\"{\r\n                      active: pageNumber == page,\r\n                      disabled: pageNumber == '...',\r\n                    }\"\r\n                            v-for=\"(pageNumber, index) in pages.slice(\r\n                      page - 1,\r\n                      page + 5\r\n                    )\"\r\n                            :key=\"index\"\r\n                            @click=\"page = pageNumber\"\r\n                        >\r\n                          <a class=\"page\" href=\"#\">{{ pageNumber }}</a>\r\n                        </li>\r\n                      </ul>\r\n                      <a\r\n                          class=\"page-item pagination-next\"\r\n                          href=\"#\"\r\n                          @click=\"page++\"\r\n                          v-if=\"page < pages.length\"\r\n                      >\r\n                        Next\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"align-middle \">\r\n                <p><b style=\"font-size: 1.2em;\">Remaining Messages: {{ availableMessages }}</b></p>\r\n                <p><b style=\"font-size: 1.2em;\">Number Of Recipients: {{ numberOfRecipents }}</b></p>\r\n              </div>\r\n              <div class=\"table-responsive\" style=\"max-height: 500px;\">\r\n                <table class=\"table align-middle table-nowrap mb-0\">\r\n                  <thead class=\"table-light\">\r\n                  <tr>\r\n                    <th scope=\"col\" style=\"width: 50px\">\r\n                      #\r\n                    </th>\r\n                    <th scope=\"col\">Name</th>\r\n                    <th scope=\"col\">Status</th>\r\n                    <th scope=\"col\">Phone</th>\r\n                    <th scope=\"col\">Department</th>\r\n                    <th scope=\"col\">Remove</th>\r\n                  </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                  <tr v-for=\"(data, index) of reciepientList\" :key=\"index\">\r\n                    <td>\r\n                      <div class=\"form-check\">\r\n                        <input class=\"form-check-input\"\r\n                               type=\"checkbox\"\r\n                               name=\"chk_child\"\r\n                               value=\"option1\">\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"id\" style=\"display: none\">\r\n                      <a\r\n                          href=\"javascript:void(0);\"\r\n                          class=\"fw-medium link-primary\"\r\n                      >{{ data.ID }}</a>\r\n                    </td>\r\n                    <td>{{ data.firstName }} {{ data.lastName }}</td>\r\n                    <td><a href=\"javascript:void(0);\" class=\"link-success\">{{ data.statusName }}</a></td>\r\n                    <td>{{ formatPhone(data.phoneNumber) }}</td>\r\n                    <td>{{ data.departmentName }}</td>\r\n                    <td>\r\n                      <b-button variant=\"danger\" class=\"btn-icon waves-effect waves-light\" size=\"sm\" @click=\"removeRecipient(index)\">\r\n                        <i class=\"ri-delete-bin-5-line\"></i>\r\n                      </b-button>\r\n                    </td>\r\n                  </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-light\" id=\"closemodal\" data-bs-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-success\" @click=\"scheduleMessage()\">Scheduled</button>\r\n          </div>\r\n\r\n        </div><!-- /.modal-content -->\r\n      </div><!-- /.modal-dialog -->\r\n    </div><!-- /.modal -->\r\n\r\n    <!-- Upload Prospects Modal -->\r\n    <b-modal id=\"uploadRecipients\" title=\"Fullscreen | Upload Clients\" class=\"v-modal-custom\" fullscreen>\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-12\">\r\n          <form>\r\n            <!-- end card -->\r\n\r\n            <div class=\"card\">\r\n              <div class=\"card-body\">\r\n                <div class=\"vstack gap-2\">\r\n                  <h5 class=\"fs-14 mb-1\">Upload Your Recipients List</h5>\r\n                  <h6> <span style=\"color:red; font-size: 0.7em;\">Please, upload a .csv file or convert the .xls/.xlsx to .csv</span></h6>\r\n                  <input class=\"form-control\" id=\"listFile\" type=\"file\"\r\n                         accept=\"text/csv\" @change=\"selectedFile\"/>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-lg-3\">\r\n                      <label for=\"editLanguage\" class=\"form-label\">Language</label>\r\n                      <select class=\"form-select mb-2\" aria-label=\"Language\" id=\"uploadLanguage\" name=\"uploadLanguage\" v-model=\"uploadLanguage\">\r\n                        <option value=\"0\">...</option>\r\n                        <option value=\"1\">English</option>\r\n                        <option value=\"2\">Spanish</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"border rounded\" v-for=\"(file, index) of files\" :key=\"index\">\r\n                    <div class=\"d-flex align-items-center p-2\">\r\n                      <div class=\"flex-grow-1\">\r\n                        <div class=\"pt-1\">\r\n                          <h5 class=\"fs-14 mb-1\" data-dz-name=\"\">\r\n                            {{ file.name }}\r\n                          </h5>\r\n                          <p class=\"fs-13 text-muted mb-0\" data-dz-size=\"\">\r\n                            <strong>{{ file.size / 1024 }}</strong> KB\r\n                          </p>\r\n                          <strong class=\"error text-danger\" data-dz-errormessage=\"\"></strong>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"flex-shrink-0 ms-3\">\r\n                        <button data-dz-remove=\"\" class=\"btn btn-sm btn-danger\" @click=\"deleteRecord\">\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"text-end mb-3\">\r\n                    <button type=\"button\" class=\"btn btn-success w-sm\" @click=\"handleFileUpload\">Process File</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- end card -->\r\n          </form>\r\n        </div>\r\n        <!-- end col -->\r\n\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n\r\n            <!-- Tables Border Colors -->\r\n            <table class=\"table table-bordered border-secondary table-nowrap\" v-if=\"parsed\">\r\n              <thead>\r\n              <tr>\r\n                <th scope=\"col\">\r\n                  ID\r\n                </th>\r\n                <th v-for=\"(header, key) in content.meta.fields\"\r\n                    v-bind:key=\"'header-'+key\" scope=\"col\">{{ header }}\r\n                </th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(row, rowKey) in content.data\"\r\n                  v-bind:key=\"'row-'+rowKey\">\r\n                <td>\r\n                  <b>{{ (rowKey+1) }}</b>\r\n                </td>\r\n                <td v-for=\"(column, columnKey) in content.meta.fields\"\r\n                    v-bind:key=\"'row-'+rowKey+'-column-'+columnKey\">\r\n                  {{ content.data[rowKey][column] }}\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n\r\n          </div>\r\n        </div>\r\n        <div class=\"text-end mb-3\">\r\n          <button type=\"button\" class=\"btn btn-light\" id=\"closeListModal\" data-bs-dismiss=\"modal\">Close</button>\r\n          <button type=\"button\" class=\"btn btn-success w-sm\" @click=\"addRecipientsFromFile\">Add to recipients list</button>\r\n        </div>\r\n      </div>\r\n    </b-modal>\r\n\r\n  </Layout>\r\n</template>\r\n"]}]}